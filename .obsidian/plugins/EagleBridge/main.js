/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin,
  print: () => print,
  setDebug: () => setDebug6
});
module.exports = __toCommonJS(main_exports);
var import_obsidian7 = require("obsidian");

// src/server.ts
var http = __toESM(require("http"));
var fs = __toESM(require("fs"));
var path = __toESM(require("path"));

// node_modules/chokidar/esm/index.js
var import_fs2 = require("fs");
var import_promises3 = require("fs/promises");
var import_events = require("events");
var sysPath2 = __toESM(require("path"), 1);

// node_modules/readdirp/esm/index.js
var import_promises = require("fs/promises");
var import_stream = require("stream");
var import_path = require("path");
function defaultOptions() {
  return {
    root: ".",
    fileFilter: (_path) => true,
    directoryFilter: (_path) => true,
    type: FILE_TYPE,
    lstat: false,
    depth: 2147483648,
    alwaysStat: false,
    highWaterMark: 4096
  };
}
var RECURSIVE_ERROR_CODE = "READDIRP_RECURSIVE_ERROR";
var NORMAL_FLOW_ERRORS = /* @__PURE__ */ new Set(["ENOENT", "EPERM", "EACCES", "ELOOP", RECURSIVE_ERROR_CODE]);
var FILE_TYPE = "files";
var DIR_TYPE = "directories";
var FILE_DIR_TYPE = "files_directories";
var EVERYTHING_TYPE = "all";
var ALL_TYPES = [FILE_TYPE, DIR_TYPE, FILE_DIR_TYPE, EVERYTHING_TYPE];
var DIR_TYPES = /* @__PURE__ */ new Set([DIR_TYPE, FILE_DIR_TYPE, EVERYTHING_TYPE]);
var FILE_TYPES = /* @__PURE__ */ new Set([FILE_TYPE, FILE_DIR_TYPE, EVERYTHING_TYPE]);
var isNormalFlowError = (error) => NORMAL_FLOW_ERRORS.has(error.code);
var wantBigintFsStats = process.platform === "win32";
var emptyFn = (_path) => true;
var normalizeFilter = (filter) => {
  if (filter === void 0)
    return emptyFn;
  if (typeof filter === "function")
    return filter;
  if (typeof filter === "string") {
    const fl = filter.trim();
    return (entry) => entry.basename === fl;
  }
  if (Array.isArray(filter)) {
    const trItems = filter.map((item) => item.trim());
    return (entry) => trItems.some((f) => entry.basename === f);
  }
  return emptyFn;
};
var ReaddirpStream = class extends import_stream.Readable {
  constructor(options = {}) {
    super({
      objectMode: true,
      autoDestroy: true,
      highWaterMark: options.highWaterMark
    });
    const opts = { ...defaultOptions(), ...options };
    const { root, type } = opts;
    this._fileFilter = normalizeFilter(opts.fileFilter);
    this._directoryFilter = normalizeFilter(opts.directoryFilter);
    const statMethod = opts.lstat ? import_promises.lstat : import_promises.stat;
    if (wantBigintFsStats) {
      this._stat = (path4) => statMethod(path4, { bigint: true });
    } else {
      this._stat = statMethod;
    }
    this._maxDepth = opts.depth;
    this._wantsDir = DIR_TYPES.has(type);
    this._wantsFile = FILE_TYPES.has(type);
    this._wantsEverything = type === EVERYTHING_TYPE;
    this._root = (0, import_path.resolve)(root);
    this._isDirent = !opts.alwaysStat;
    this._statsProp = this._isDirent ? "dirent" : "stats";
    this._rdOptions = { encoding: "utf8", withFileTypes: this._isDirent };
    this.parents = [this._exploreDir(root, 1)];
    this.reading = false;
    this.parent = void 0;
  }
  async _read(batch) {
    if (this.reading)
      return;
    this.reading = true;
    try {
      while (!this.destroyed && batch > 0) {
        const par = this.parent;
        const fil = par && par.files;
        if (fil && fil.length > 0) {
          const { path: path4, depth } = par;
          const slice = fil.splice(0, batch).map((dirent) => this._formatEntry(dirent, path4));
          const awaited = await Promise.all(slice);
          for (const entry of awaited) {
            if (!entry) {
              batch--;
              return;
            }
            if (this.destroyed)
              return;
            const entryType = await this._getEntryType(entry);
            if (entryType === "directory" && this._directoryFilter(entry)) {
              if (depth <= this._maxDepth) {
                this.parents.push(this._exploreDir(entry.fullPath, depth + 1));
              }
              if (this._wantsDir) {
                this.push(entry);
                batch--;
              }
            } else if ((entryType === "file" || this._includeAsFile(entry)) && this._fileFilter(entry)) {
              if (this._wantsFile) {
                this.push(entry);
                batch--;
              }
            }
          }
        } else {
          const parent = this.parents.pop();
          if (!parent) {
            this.push(null);
            break;
          }
          this.parent = await parent;
          if (this.destroyed)
            return;
        }
      }
    } catch (error) {
      this.destroy(error);
    } finally {
      this.reading = false;
    }
  }
  async _exploreDir(path4, depth) {
    let files;
    try {
      files = await (0, import_promises.readdir)(path4, this._rdOptions);
    } catch (error) {
      this._onError(error);
    }
    return { files, depth, path: path4 };
  }
  async _formatEntry(dirent, path4) {
    let entry;
    const basename4 = this._isDirent ? dirent.name : dirent;
    try {
      const fullPath = (0, import_path.resolve)((0, import_path.join)(path4, basename4));
      entry = { path: (0, import_path.relative)(this._root, fullPath), fullPath, basename: basename4 };
      entry[this._statsProp] = this._isDirent ? dirent : await this._stat(fullPath);
    } catch (err) {
      this._onError(err);
      return;
    }
    return entry;
  }
  _onError(err) {
    if (isNormalFlowError(err) && !this.destroyed) {
      this.emit("warn", err);
    } else {
      this.destroy(err);
    }
  }
  async _getEntryType(entry) {
    if (!entry && this._statsProp in entry) {
      return "";
    }
    const stats = entry[this._statsProp];
    if (stats.isFile())
      return "file";
    if (stats.isDirectory())
      return "directory";
    if (stats && stats.isSymbolicLink()) {
      const full = entry.fullPath;
      try {
        const entryRealPath = await (0, import_promises.realpath)(full);
        const entryRealPathStats = await (0, import_promises.lstat)(entryRealPath);
        if (entryRealPathStats.isFile()) {
          return "file";
        }
        if (entryRealPathStats.isDirectory()) {
          const len = entryRealPath.length;
          if (full.startsWith(entryRealPath) && full.substr(len, 1) === import_path.sep) {
            const recursiveError = new Error(`Circular symlink detected: "${full}" points to "${entryRealPath}"`);
            recursiveError.code = RECURSIVE_ERROR_CODE;
            return this._onError(recursiveError);
          }
          return "directory";
        }
      } catch (error) {
        this._onError(error);
        return "";
      }
    }
  }
  _includeAsFile(entry) {
    const stats = entry && entry[this._statsProp];
    return stats && this._wantsEverything && !stats.isDirectory();
  }
};
var readdirp = (root, options = {}) => {
  let type = options.entryType || options.type;
  if (type === "both")
    type = FILE_DIR_TYPE;
  if (type)
    options.type = type;
  if (!root) {
    throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");
  } else if (typeof root !== "string") {
    throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");
  } else if (type && !ALL_TYPES.includes(type)) {
    throw new Error(`readdirp: Invalid type passed. Use one of ${ALL_TYPES.join(", ")}`);
  }
  options.root = root;
  return new ReaddirpStream(options);
};

// node_modules/chokidar/esm/handler.js
var import_fs = require("fs");
var import_promises2 = require("fs/promises");
var sysPath = __toESM(require("path"), 1);
var import_os = require("os");
var STR_DATA = "data";
var STR_END = "end";
var STR_CLOSE = "close";
var EMPTY_FN = () => {
};
var pl = process.platform;
var isWindows = pl === "win32";
var isMacos = pl === "darwin";
var isLinux = pl === "linux";
var isFreeBSD = pl === "freebsd";
var isIBMi = (0, import_os.type)() === "OS400";
var EVENTS = {
  ALL: "all",
  READY: "ready",
  ADD: "add",
  CHANGE: "change",
  ADD_DIR: "addDir",
  UNLINK: "unlink",
  UNLINK_DIR: "unlinkDir",
  RAW: "raw",
  ERROR: "error"
};
var EV = EVENTS;
var THROTTLE_MODE_WATCH = "watch";
var statMethods = { lstat: import_promises2.lstat, stat: import_promises2.stat };
var KEY_LISTENERS = "listeners";
var KEY_ERR = "errHandlers";
var KEY_RAW = "rawEmitters";
var HANDLER_KEYS = [KEY_LISTENERS, KEY_ERR, KEY_RAW];
var binaryExtensions = /* @__PURE__ */ new Set([
  "3dm",
  "3ds",
  "3g2",
  "3gp",
  "7z",
  "a",
  "aac",
  "adp",
  "afdesign",
  "afphoto",
  "afpub",
  "ai",
  "aif",
  "aiff",
  "alz",
  "ape",
  "apk",
  "appimage",
  "ar",
  "arj",
  "asf",
  "au",
  "avi",
  "bak",
  "baml",
  "bh",
  "bin",
  "bk",
  "bmp",
  "btif",
  "bz2",
  "bzip2",
  "cab",
  "caf",
  "cgm",
  "class",
  "cmx",
  "cpio",
  "cr2",
  "cur",
  "dat",
  "dcm",
  "deb",
  "dex",
  "djvu",
  "dll",
  "dmg",
  "dng",
  "doc",
  "docm",
  "docx",
  "dot",
  "dotm",
  "dra",
  "DS_Store",
  "dsk",
  "dts",
  "dtshd",
  "dvb",
  "dwg",
  "dxf",
  "ecelp4800",
  "ecelp7470",
  "ecelp9600",
  "egg",
  "eol",
  "eot",
  "epub",
  "exe",
  "f4v",
  "fbs",
  "fh",
  "fla",
  "flac",
  "flatpak",
  "fli",
  "flv",
  "fpx",
  "fst",
  "fvt",
  "g3",
  "gh",
  "gif",
  "graffle",
  "gz",
  "gzip",
  "h261",
  "h263",
  "h264",
  "icns",
  "ico",
  "ief",
  "img",
  "ipa",
  "iso",
  "jar",
  "jpeg",
  "jpg",
  "jpgv",
  "jpm",
  "jxr",
  "key",
  "ktx",
  "lha",
  "lib",
  "lvp",
  "lz",
  "lzh",
  "lzma",
  "lzo",
  "m3u",
  "m4a",
  "m4v",
  "mar",
  "mdi",
  "mht",
  "mid",
  "midi",
  "mj2",
  "mka",
  "mkv",
  "mmr",
  "mng",
  "mobi",
  "mov",
  "movie",
  "mp3",
  "mp4",
  "mp4a",
  "mpeg",
  "mpg",
  "mpga",
  "mxu",
  "nef",
  "npx",
  "numbers",
  "nupkg",
  "o",
  "odp",
  "ods",
  "odt",
  "oga",
  "ogg",
  "ogv",
  "otf",
  "ott",
  "pages",
  "pbm",
  "pcx",
  "pdb",
  "pdf",
  "pea",
  "pgm",
  "pic",
  "png",
  "pnm",
  "pot",
  "potm",
  "potx",
  "ppa",
  "ppam",
  "ppm",
  "pps",
  "ppsm",
  "ppsx",
  "ppt",
  "pptm",
  "pptx",
  "psd",
  "pya",
  "pyc",
  "pyo",
  "pyv",
  "qt",
  "rar",
  "ras",
  "raw",
  "resources",
  "rgb",
  "rip",
  "rlc",
  "rmf",
  "rmvb",
  "rpm",
  "rtf",
  "rz",
  "s3m",
  "s7z",
  "scpt",
  "sgi",
  "shar",
  "snap",
  "sil",
  "sketch",
  "slk",
  "smv",
  "snk",
  "so",
  "stl",
  "suo",
  "sub",
  "swf",
  "tar",
  "tbz",
  "tbz2",
  "tga",
  "tgz",
  "thmx",
  "tif",
  "tiff",
  "tlz",
  "ttc",
  "ttf",
  "txz",
  "udf",
  "uvh",
  "uvi",
  "uvm",
  "uvp",
  "uvs",
  "uvu",
  "viv",
  "vob",
  "war",
  "wav",
  "wax",
  "wbmp",
  "wdp",
  "weba",
  "webm",
  "webp",
  "whl",
  "wim",
  "wm",
  "wma",
  "wmv",
  "wmx",
  "woff",
  "woff2",
  "wrm",
  "wvx",
  "xbm",
  "xif",
  "xla",
  "xlam",
  "xls",
  "xlsb",
  "xlsm",
  "xlsx",
  "xlt",
  "xltm",
  "xltx",
  "xm",
  "xmind",
  "xpi",
  "xpm",
  "xwd",
  "xz",
  "z",
  "zip",
  "zipx"
]);
var isBinaryPath = (filePath) => binaryExtensions.has(sysPath.extname(filePath).slice(1).toLowerCase());
var foreach = (val, fn) => {
  if (val instanceof Set) {
    val.forEach(fn);
  } else {
    fn(val);
  }
};
var addAndConvert = (main, prop, item) => {
  let container = main[prop];
  if (!(container instanceof Set)) {
    main[prop] = container = /* @__PURE__ */ new Set([container]);
  }
  container.add(item);
};
var clearItem = (cont) => (key) => {
  const set = cont[key];
  if (set instanceof Set) {
    set.clear();
  } else {
    delete cont[key];
  }
};
var delFromSet = (main, prop, item) => {
  const container = main[prop];
  if (container instanceof Set) {
    container.delete(item);
  } else if (container === item) {
    delete main[prop];
  }
};
var isEmptySet = (val) => val instanceof Set ? val.size === 0 : !val;
var FsWatchInstances = /* @__PURE__ */ new Map();
function createFsWatchInstance(path4, options, listener, errHandler, emitRaw) {
  const handleEvent = (rawEvent, evPath) => {
    listener(path4);
    emitRaw(rawEvent, evPath, { watchedPath: path4 });
    if (evPath && path4 !== evPath) {
      fsWatchBroadcast(sysPath.resolve(path4, evPath), KEY_LISTENERS, sysPath.join(path4, evPath));
    }
  };
  try {
    return (0, import_fs.watch)(path4, {
      persistent: options.persistent
    }, handleEvent);
  } catch (error) {
    errHandler(error);
    return void 0;
  }
}
var fsWatchBroadcast = (fullPath, listenerType, val1, val2, val3) => {
  const cont = FsWatchInstances.get(fullPath);
  if (!cont)
    return;
  foreach(cont[listenerType], (listener) => {
    listener(val1, val2, val3);
  });
};
var setFsWatchListener = (path4, fullPath, options, handlers) => {
  const { listener, errHandler, rawEmitter } = handlers;
  let cont = FsWatchInstances.get(fullPath);
  let watcher;
  if (!options.persistent) {
    watcher = createFsWatchInstance(path4, options, listener, errHandler, rawEmitter);
    if (!watcher)
      return;
    return watcher.close.bind(watcher);
  }
  if (cont) {
    addAndConvert(cont, KEY_LISTENERS, listener);
    addAndConvert(cont, KEY_ERR, errHandler);
    addAndConvert(cont, KEY_RAW, rawEmitter);
  } else {
    watcher = createFsWatchInstance(
      path4,
      options,
      fsWatchBroadcast.bind(null, fullPath, KEY_LISTENERS),
      errHandler,
      // no need to use broadcast here
      fsWatchBroadcast.bind(null, fullPath, KEY_RAW)
    );
    if (!watcher)
      return;
    watcher.on(EV.ERROR, async (error) => {
      const broadcastErr = fsWatchBroadcast.bind(null, fullPath, KEY_ERR);
      if (cont)
        cont.watcherUnusable = true;
      if (isWindows && error.code === "EPERM") {
        try {
          const fd = await (0, import_promises2.open)(path4, "r");
          await fd.close();
          broadcastErr(error);
        } catch (err) {
        }
      } else {
        broadcastErr(error);
      }
    });
    cont = {
      listeners: listener,
      errHandlers: errHandler,
      rawEmitters: rawEmitter,
      watcher
    };
    FsWatchInstances.set(fullPath, cont);
  }
  return () => {
    delFromSet(cont, KEY_LISTENERS, listener);
    delFromSet(cont, KEY_ERR, errHandler);
    delFromSet(cont, KEY_RAW, rawEmitter);
    if (isEmptySet(cont.listeners)) {
      cont.watcher.close();
      FsWatchInstances.delete(fullPath);
      HANDLER_KEYS.forEach(clearItem(cont));
      cont.watcher = void 0;
      Object.freeze(cont);
    }
  };
};
var FsWatchFileInstances = /* @__PURE__ */ new Map();
var setFsWatchFileListener = (path4, fullPath, options, handlers) => {
  const { listener, rawEmitter } = handlers;
  let cont = FsWatchFileInstances.get(fullPath);
  const copts = cont && cont.options;
  if (copts && (copts.persistent < options.persistent || copts.interval > options.interval)) {
    (0, import_fs.unwatchFile)(fullPath);
    cont = void 0;
  }
  if (cont) {
    addAndConvert(cont, KEY_LISTENERS, listener);
    addAndConvert(cont, KEY_RAW, rawEmitter);
  } else {
    cont = {
      listeners: listener,
      rawEmitters: rawEmitter,
      options,
      watcher: (0, import_fs.watchFile)(fullPath, options, (curr, prev) => {
        foreach(cont.rawEmitters, (rawEmitter2) => {
          rawEmitter2(EV.CHANGE, fullPath, { curr, prev });
        });
        const currmtime = curr.mtimeMs;
        if (curr.size !== prev.size || currmtime > prev.mtimeMs || currmtime === 0) {
          foreach(cont.listeners, (listener2) => listener2(path4, curr));
        }
      })
    };
    FsWatchFileInstances.set(fullPath, cont);
  }
  return () => {
    delFromSet(cont, KEY_LISTENERS, listener);
    delFromSet(cont, KEY_RAW, rawEmitter);
    if (isEmptySet(cont.listeners)) {
      FsWatchFileInstances.delete(fullPath);
      (0, import_fs.unwatchFile)(fullPath);
      cont.options = cont.watcher = void 0;
      Object.freeze(cont);
    }
  };
};
var NodeFsHandler = class {
  constructor(fsW) {
    this.fsw = fsW;
    this._boundHandleError = (error) => fsW._handleError(error);
  }
  /**
   * Watch file for changes with fs_watchFile or fs_watch.
   * @param path to file or dir
   * @param listener on fs change
   * @returns closer for the watcher instance
   */
  _watchWithNodeFs(path4, listener) {
    const opts = this.fsw.options;
    const directory = sysPath.dirname(path4);
    const basename4 = sysPath.basename(path4);
    const parent = this.fsw._getWatchedDir(directory);
    parent.add(basename4);
    const absolutePath = sysPath.resolve(path4);
    const options = {
      persistent: opts.persistent
    };
    if (!listener)
      listener = EMPTY_FN;
    let closer;
    if (opts.usePolling) {
      const enableBin = opts.interval !== opts.binaryInterval;
      options.interval = enableBin && isBinaryPath(basename4) ? opts.binaryInterval : opts.interval;
      closer = setFsWatchFileListener(path4, absolutePath, options, {
        listener,
        rawEmitter: this.fsw._emitRaw
      });
    } else {
      closer = setFsWatchListener(path4, absolutePath, options, {
        listener,
        errHandler: this._boundHandleError,
        rawEmitter: this.fsw._emitRaw
      });
    }
    return closer;
  }
  /**
   * Watch a file and emit add event if warranted.
   * @returns closer for the watcher instance
   */
  _handleFile(file, stats, initialAdd) {
    if (this.fsw.closed) {
      return;
    }
    const dirname3 = sysPath.dirname(file);
    const basename4 = sysPath.basename(file);
    const parent = this.fsw._getWatchedDir(dirname3);
    let prevStats = stats;
    if (parent.has(basename4))
      return;
    const listener = async (path4, newStats) => {
      if (!this.fsw._throttle(THROTTLE_MODE_WATCH, file, 5))
        return;
      if (!newStats || newStats.mtimeMs === 0) {
        try {
          const newStats2 = await (0, import_promises2.stat)(file);
          if (this.fsw.closed)
            return;
          const at = newStats2.atimeMs;
          const mt = newStats2.mtimeMs;
          if (!at || at <= mt || mt !== prevStats.mtimeMs) {
            this.fsw._emit(EV.CHANGE, file, newStats2);
          }
          if ((isMacos || isLinux || isFreeBSD) && prevStats.ino !== newStats2.ino) {
            this.fsw._closeFile(path4);
            prevStats = newStats2;
            const closer2 = this._watchWithNodeFs(file, listener);
            if (closer2)
              this.fsw._addPathCloser(path4, closer2);
          } else {
            prevStats = newStats2;
          }
        } catch (error) {
          this.fsw._remove(dirname3, basename4);
        }
      } else if (parent.has(basename4)) {
        const at = newStats.atimeMs;
        const mt = newStats.mtimeMs;
        if (!at || at <= mt || mt !== prevStats.mtimeMs) {
          this.fsw._emit(EV.CHANGE, file, newStats);
        }
        prevStats = newStats;
      }
    };
    const closer = this._watchWithNodeFs(file, listener);
    if (!(initialAdd && this.fsw.options.ignoreInitial) && this.fsw._isntIgnored(file)) {
      if (!this.fsw._throttle(EV.ADD, file, 0))
        return;
      this.fsw._emit(EV.ADD, file, stats);
    }
    return closer;
  }
  /**
   * Handle symlinks encountered while reading a dir.
   * @param entry returned by readdirp
   * @param directory path of dir being read
   * @param path of this item
   * @param item basename of this item
   * @returns true if no more processing is needed for this entry.
   */
  async _handleSymlink(entry, directory, path4, item) {
    if (this.fsw.closed) {
      return;
    }
    const full = entry.fullPath;
    const dir = this.fsw._getWatchedDir(directory);
    if (!this.fsw.options.followSymlinks) {
      this.fsw._incrReadyCount();
      let linkPath;
      try {
        linkPath = await (0, import_promises2.realpath)(path4);
      } catch (e) {
        this.fsw._emitReady();
        return true;
      }
      if (this.fsw.closed)
        return;
      if (dir.has(item)) {
        if (this.fsw._symlinkPaths.get(full) !== linkPath) {
          this.fsw._symlinkPaths.set(full, linkPath);
          this.fsw._emit(EV.CHANGE, path4, entry.stats);
        }
      } else {
        dir.add(item);
        this.fsw._symlinkPaths.set(full, linkPath);
        this.fsw._emit(EV.ADD, path4, entry.stats);
      }
      this.fsw._emitReady();
      return true;
    }
    if (this.fsw._symlinkPaths.has(full)) {
      return true;
    }
    this.fsw._symlinkPaths.set(full, true);
  }
  _handleRead(directory, initialAdd, wh, target, dir, depth, throttler) {
    directory = sysPath.join(directory, "");
    throttler = this.fsw._throttle("readdir", directory, 1e3);
    if (!throttler)
      return;
    const previous = this.fsw._getWatchedDir(wh.path);
    const current = /* @__PURE__ */ new Set();
    let stream = this.fsw._readdirp(directory, {
      fileFilter: (entry) => wh.filterPath(entry),
      directoryFilter: (entry) => wh.filterDir(entry)
    });
    if (!stream)
      return;
    stream.on(STR_DATA, async (entry) => {
      if (this.fsw.closed) {
        stream = void 0;
        return;
      }
      const item = entry.path;
      let path4 = sysPath.join(directory, item);
      current.add(item);
      if (entry.stats.isSymbolicLink() && await this._handleSymlink(entry, directory, path4, item)) {
        return;
      }
      if (this.fsw.closed) {
        stream = void 0;
        return;
      }
      if (item === target || !target && !previous.has(item)) {
        this.fsw._incrReadyCount();
        path4 = sysPath.join(dir, sysPath.relative(dir, path4));
        this._addToNodeFs(path4, initialAdd, wh, depth + 1);
      }
    }).on(EV.ERROR, this._boundHandleError);
    return new Promise((resolve3, reject) => {
      if (!stream)
        return reject();
      stream.once(STR_END, () => {
        if (this.fsw.closed) {
          stream = void 0;
          return;
        }
        const wasThrottled = throttler ? throttler.clear() : false;
        resolve3(void 0);
        previous.getChildren().filter((item) => {
          return item !== directory && !current.has(item);
        }).forEach((item) => {
          this.fsw._remove(directory, item);
        });
        stream = void 0;
        if (wasThrottled)
          this._handleRead(directory, false, wh, target, dir, depth, throttler);
      });
    });
  }
  /**
   * Read directory to add / remove files from `@watched` list and re-read it on change.
   * @param dir fs path
   * @param stats
   * @param initialAdd
   * @param depth relative to user-supplied path
   * @param target child path targeted for watch
   * @param wh Common watch helpers for this path
   * @param realpath
   * @returns closer for the watcher instance.
   */
  async _handleDir(dir, stats, initialAdd, depth, target, wh, realpath2) {
    const parentDir = this.fsw._getWatchedDir(sysPath.dirname(dir));
    const tracked = parentDir.has(sysPath.basename(dir));
    if (!(initialAdd && this.fsw.options.ignoreInitial) && !target && !tracked) {
      this.fsw._emit(EV.ADD_DIR, dir, stats);
    }
    parentDir.add(sysPath.basename(dir));
    this.fsw._getWatchedDir(dir);
    let throttler;
    let closer;
    const oDepth = this.fsw.options.depth;
    if ((oDepth == null || depth <= oDepth) && !this.fsw._symlinkPaths.has(realpath2)) {
      if (!target) {
        await this._handleRead(dir, initialAdd, wh, target, dir, depth, throttler);
        if (this.fsw.closed)
          return;
      }
      closer = this._watchWithNodeFs(dir, (dirPath, stats2) => {
        if (stats2 && stats2.mtimeMs === 0)
          return;
        this._handleRead(dirPath, false, wh, target, dir, depth, throttler);
      });
    }
    return closer;
  }
  /**
   * Handle added file, directory, or glob pattern.
   * Delegates call to _handleFile / _handleDir after checks.
   * @param path to file or ir
   * @param initialAdd was the file added at watch instantiation?
   * @param priorWh depth relative to user-supplied path
   * @param depth Child path actually targeted for watch
   * @param target Child path actually targeted for watch
   */
  async _addToNodeFs(path4, initialAdd, priorWh, depth, target) {
    const ready = this.fsw._emitReady;
    if (this.fsw._isIgnored(path4) || this.fsw.closed) {
      ready();
      return false;
    }
    const wh = this.fsw._getWatchHelpers(path4);
    if (priorWh) {
      wh.filterPath = (entry) => priorWh.filterPath(entry);
      wh.filterDir = (entry) => priorWh.filterDir(entry);
    }
    try {
      const stats = await statMethods[wh.statMethod](wh.watchPath);
      if (this.fsw.closed)
        return;
      if (this.fsw._isIgnored(wh.watchPath, stats)) {
        ready();
        return false;
      }
      const follow = this.fsw.options.followSymlinks;
      let closer;
      if (stats.isDirectory()) {
        const absPath = sysPath.resolve(path4);
        const targetPath = follow ? await (0, import_promises2.realpath)(path4) : path4;
        if (this.fsw.closed)
          return;
        closer = await this._handleDir(wh.watchPath, stats, initialAdd, depth, target, wh, targetPath);
        if (this.fsw.closed)
          return;
        if (absPath !== targetPath && targetPath !== void 0) {
          this.fsw._symlinkPaths.set(absPath, targetPath);
        }
      } else if (stats.isSymbolicLink()) {
        const targetPath = follow ? await (0, import_promises2.realpath)(path4) : path4;
        if (this.fsw.closed)
          return;
        const parent = sysPath.dirname(wh.watchPath);
        this.fsw._getWatchedDir(parent).add(wh.watchPath);
        this.fsw._emit(EV.ADD, wh.watchPath, stats);
        closer = await this._handleDir(parent, stats, initialAdd, depth, path4, wh, targetPath);
        if (this.fsw.closed)
          return;
        if (targetPath !== void 0) {
          this.fsw._symlinkPaths.set(sysPath.resolve(path4), targetPath);
        }
      } else {
        closer = this._handleFile(wh.watchPath, stats, initialAdd);
      }
      ready();
      if (closer)
        this.fsw._addPathCloser(path4, closer);
      return false;
    } catch (error) {
      if (this.fsw._handleError(error)) {
        ready();
        return path4;
      }
    }
  }
};

// node_modules/chokidar/esm/index.js
var SLASH = "/";
var SLASH_SLASH = "//";
var ONE_DOT = ".";
var TWO_DOTS = "..";
var STRING_TYPE = "string";
var BACK_SLASH_RE = /\\/g;
var DOUBLE_SLASH_RE = /\/\//;
var DOT_RE = /\..*\.(sw[px])$|~$|\.subl.*\.tmp/;
var REPLACER_RE = /^\.[/\\]/;
function arrify(item) {
  return Array.isArray(item) ? item : [item];
}
var isMatcherObject = (matcher) => typeof matcher === "object" && matcher !== null && !(matcher instanceof RegExp);
function createPattern(matcher) {
  if (typeof matcher === "function")
    return matcher;
  if (typeof matcher === "string")
    return (string) => matcher === string;
  if (matcher instanceof RegExp)
    return (string) => matcher.test(string);
  if (typeof matcher === "object" && matcher !== null) {
    return (string) => {
      if (matcher.path === string)
        return true;
      if (matcher.recursive) {
        const relative4 = sysPath2.relative(matcher.path, string);
        if (!relative4) {
          return false;
        }
        return !relative4.startsWith("..") && !sysPath2.isAbsolute(relative4);
      }
      return false;
    };
  }
  return () => false;
}
function normalizePath(path4) {
  if (typeof path4 !== "string")
    throw new Error("string expected");
  path4 = sysPath2.normalize(path4);
  path4 = path4.replace(/\\/g, "/");
  let prepend = false;
  if (path4.startsWith("//"))
    prepend = true;
  const DOUBLE_SLASH_RE2 = /\/\//;
  while (path4.match(DOUBLE_SLASH_RE2))
    path4 = path4.replace(DOUBLE_SLASH_RE2, "/");
  if (prepend)
    path4 = "/" + path4;
  return path4;
}
function matchPatterns(patterns, testString, stats) {
  const path4 = normalizePath(testString);
  for (let index = 0; index < patterns.length; index++) {
    const pattern = patterns[index];
    if (pattern(path4, stats)) {
      return true;
    }
  }
  return false;
}
function anymatch(matchers, testString) {
  if (matchers == null) {
    throw new TypeError("anymatch: specify first argument");
  }
  const matchersArray = arrify(matchers);
  const patterns = matchersArray.map((matcher) => createPattern(matcher));
  if (testString == null) {
    return (testString2, stats) => {
      return matchPatterns(patterns, testString2, stats);
    };
  }
  return matchPatterns(patterns, testString);
}
var unifyPaths = (paths_) => {
  const paths = arrify(paths_).flat();
  if (!paths.every((p) => typeof p === STRING_TYPE)) {
    throw new TypeError(`Non-string provided as watch path: ${paths}`);
  }
  return paths.map(normalizePathToUnix);
};
var toUnix = (string) => {
  let str = string.replace(BACK_SLASH_RE, SLASH);
  let prepend = false;
  if (str.startsWith(SLASH_SLASH)) {
    prepend = true;
  }
  while (str.match(DOUBLE_SLASH_RE)) {
    str = str.replace(DOUBLE_SLASH_RE, SLASH);
  }
  if (prepend) {
    str = SLASH + str;
  }
  return str;
};
var normalizePathToUnix = (path4) => toUnix(sysPath2.normalize(toUnix(path4)));
var normalizeIgnored = (cwd = "") => (path4) => {
  if (typeof path4 === "string") {
    return normalizePathToUnix(sysPath2.isAbsolute(path4) ? path4 : sysPath2.join(cwd, path4));
  } else {
    return path4;
  }
};
var getAbsolutePath = (path4, cwd) => {
  if (sysPath2.isAbsolute(path4)) {
    return path4;
  }
  return sysPath2.join(cwd, path4);
};
var EMPTY_SET = Object.freeze(/* @__PURE__ */ new Set());
var DirEntry = class {
  constructor(dir, removeWatcher) {
    this.path = dir;
    this._removeWatcher = removeWatcher;
    this.items = /* @__PURE__ */ new Set();
  }
  add(item) {
    const { items } = this;
    if (!items)
      return;
    if (item !== ONE_DOT && item !== TWO_DOTS)
      items.add(item);
  }
  async remove(item) {
    const { items } = this;
    if (!items)
      return;
    items.delete(item);
    if (items.size > 0)
      return;
    const dir = this.path;
    try {
      await (0, import_promises3.readdir)(dir);
    } catch (err) {
      if (this._removeWatcher) {
        this._removeWatcher(sysPath2.dirname(dir), sysPath2.basename(dir));
      }
    }
  }
  has(item) {
    const { items } = this;
    if (!items)
      return;
    return items.has(item);
  }
  getChildren() {
    const { items } = this;
    if (!items)
      return [];
    return [...items.values()];
  }
  dispose() {
    this.items.clear();
    this.path = "";
    this._removeWatcher = EMPTY_FN;
    this.items = EMPTY_SET;
    Object.freeze(this);
  }
};
var STAT_METHOD_F = "stat";
var STAT_METHOD_L = "lstat";
var WatchHelper = class {
  constructor(path4, follow, fsw) {
    this.fsw = fsw;
    const watchPath = path4;
    this.path = path4 = path4.replace(REPLACER_RE, "");
    this.watchPath = watchPath;
    this.fullWatchPath = sysPath2.resolve(watchPath);
    this.dirParts = [];
    this.dirParts.forEach((parts) => {
      if (parts.length > 1)
        parts.pop();
    });
    this.followSymlinks = follow;
    this.statMethod = follow ? STAT_METHOD_F : STAT_METHOD_L;
  }
  entryPath(entry) {
    return sysPath2.join(this.watchPath, sysPath2.relative(this.watchPath, entry.fullPath));
  }
  filterPath(entry) {
    const { stats } = entry;
    if (stats && stats.isSymbolicLink())
      return this.filterDir(entry);
    const resolvedPath = this.entryPath(entry);
    return this.fsw._isntIgnored(resolvedPath, stats) && this.fsw._hasReadPermissions(stats);
  }
  filterDir(entry) {
    return this.fsw._isntIgnored(this.entryPath(entry), entry.stats);
  }
};
var FSWatcher = class extends import_events.EventEmitter {
  // Not indenting methods for history sake; for now.
  constructor(_opts = {}) {
    super();
    this.closed = false;
    this._closers = /* @__PURE__ */ new Map();
    this._ignoredPaths = /* @__PURE__ */ new Set();
    this._throttled = /* @__PURE__ */ new Map();
    this._streams = /* @__PURE__ */ new Set();
    this._symlinkPaths = /* @__PURE__ */ new Map();
    this._watched = /* @__PURE__ */ new Map();
    this._pendingWrites = /* @__PURE__ */ new Map();
    this._pendingUnlinks = /* @__PURE__ */ new Map();
    this._readyCount = 0;
    this._readyEmitted = false;
    const awf = _opts.awaitWriteFinish;
    const DEF_AWF = { stabilityThreshold: 2e3, pollInterval: 100 };
    const opts = {
      // Defaults
      persistent: true,
      ignoreInitial: false,
      ignorePermissionErrors: false,
      interval: 100,
      binaryInterval: 300,
      followSymlinks: true,
      usePolling: false,
      // useAsync: false,
      atomic: true,
      // NOTE: overwritten later (depends on usePolling)
      ..._opts,
      // Change format
      ignored: _opts.ignored ? arrify(_opts.ignored) : arrify([]),
      awaitWriteFinish: awf === true ? DEF_AWF : typeof awf === "object" ? { ...DEF_AWF, ...awf } : false
    };
    if (isIBMi)
      opts.usePolling = true;
    if (opts.atomic === void 0)
      opts.atomic = !opts.usePolling;
    const envPoll = process.env.CHOKIDAR_USEPOLLING;
    if (envPoll !== void 0) {
      const envLower = envPoll.toLowerCase();
      if (envLower === "false" || envLower === "0")
        opts.usePolling = false;
      else if (envLower === "true" || envLower === "1")
        opts.usePolling = true;
      else
        opts.usePolling = !!envLower;
    }
    const envInterval = process.env.CHOKIDAR_INTERVAL;
    if (envInterval)
      opts.interval = Number.parseInt(envInterval, 10);
    let readyCalls = 0;
    this._emitReady = () => {
      readyCalls++;
      if (readyCalls >= this._readyCount) {
        this._emitReady = EMPTY_FN;
        this._readyEmitted = true;
        process.nextTick(() => this.emit(EVENTS.READY));
      }
    };
    this._emitRaw = (...args) => this.emit(EVENTS.RAW, ...args);
    this._boundRemove = this._remove.bind(this);
    this.options = opts;
    this._nodeFsHandler = new NodeFsHandler(this);
    Object.freeze(opts);
  }
  _addIgnoredPath(matcher) {
    if (isMatcherObject(matcher)) {
      for (const ignored of this._ignoredPaths) {
        if (isMatcherObject(ignored) && ignored.path === matcher.path && ignored.recursive === matcher.recursive) {
          return;
        }
      }
    }
    this._ignoredPaths.add(matcher);
  }
  _removeIgnoredPath(matcher) {
    this._ignoredPaths.delete(matcher);
    if (typeof matcher === "string") {
      for (const ignored of this._ignoredPaths) {
        if (isMatcherObject(ignored) && ignored.path === matcher) {
          this._ignoredPaths.delete(ignored);
        }
      }
    }
  }
  // Public methods
  /**
   * Adds paths to be watched on an existing FSWatcher instance.
   * @param paths_ file or file list. Other arguments are unused
   */
  add(paths_, _origAdd, _internal) {
    const { cwd } = this.options;
    this.closed = false;
    this._closePromise = void 0;
    let paths = unifyPaths(paths_);
    if (cwd) {
      paths = paths.map((path4) => {
        const absPath = getAbsolutePath(path4, cwd);
        return absPath;
      });
    }
    paths.forEach((path4) => {
      this._removeIgnoredPath(path4);
    });
    this._userIgnored = void 0;
    if (!this._readyCount)
      this._readyCount = 0;
    this._readyCount += paths.length;
    Promise.all(paths.map(async (path4) => {
      const res = await this._nodeFsHandler._addToNodeFs(path4, !_internal, void 0, 0, _origAdd);
      if (res)
        this._emitReady();
      return res;
    })).then((results) => {
      if (this.closed)
        return;
      results.forEach((item) => {
        if (item)
          this.add(sysPath2.dirname(item), sysPath2.basename(_origAdd || item));
      });
    });
    return this;
  }
  /**
   * Close watchers or start ignoring events from specified paths.
   */
  unwatch(paths_) {
    if (this.closed)
      return this;
    const paths = unifyPaths(paths_);
    const { cwd } = this.options;
    paths.forEach((path4) => {
      if (!sysPath2.isAbsolute(path4) && !this._closers.has(path4)) {
        if (cwd)
          path4 = sysPath2.join(cwd, path4);
        path4 = sysPath2.resolve(path4);
      }
      this._closePath(path4);
      this._addIgnoredPath(path4);
      if (this._watched.has(path4)) {
        this._addIgnoredPath({
          path: path4,
          recursive: true
        });
      }
      this._userIgnored = void 0;
    });
    return this;
  }
  /**
   * Close watchers and remove all listeners from watched paths.
   */
  close() {
    if (this._closePromise) {
      return this._closePromise;
    }
    this.closed = true;
    this.removeAllListeners();
    const closers = [];
    this._closers.forEach((closerList) => closerList.forEach((closer) => {
      const promise = closer();
      if (promise instanceof Promise)
        closers.push(promise);
    }));
    this._streams.forEach((stream) => stream.destroy());
    this._userIgnored = void 0;
    this._readyCount = 0;
    this._readyEmitted = false;
    this._watched.forEach((dirent) => dirent.dispose());
    this._closers.clear();
    this._watched.clear();
    this._streams.clear();
    this._symlinkPaths.clear();
    this._throttled.clear();
    this._closePromise = closers.length ? Promise.all(closers).then(() => void 0) : Promise.resolve();
    return this._closePromise;
  }
  /**
   * Expose list of watched paths
   * @returns for chaining
   */
  getWatched() {
    const watchList = {};
    this._watched.forEach((entry, dir) => {
      const key = this.options.cwd ? sysPath2.relative(this.options.cwd, dir) : dir;
      const index = key || ONE_DOT;
      watchList[index] = entry.getChildren().sort();
    });
    return watchList;
  }
  emitWithAll(event, args) {
    this.emit(event, ...args);
    if (event !== EVENTS.ERROR)
      this.emit(EVENTS.ALL, event, ...args);
  }
  // Common helpers
  // --------------
  /**
   * Normalize and emit events.
   * Calling _emit DOES NOT MEAN emit() would be called!
   * @param event Type of event
   * @param path File or directory path
   * @param stats arguments to be passed with event
   * @returns the error if defined, otherwise the value of the FSWatcher instance's `closed` flag
   */
  async _emit(event, path4, stats) {
    if (this.closed)
      return;
    const opts = this.options;
    if (isWindows)
      path4 = sysPath2.normalize(path4);
    if (opts.cwd)
      path4 = sysPath2.relative(opts.cwd, path4);
    const args = [path4];
    if (stats != null)
      args.push(stats);
    const awf = opts.awaitWriteFinish;
    let pw;
    if (awf && (pw = this._pendingWrites.get(path4))) {
      pw.lastChange = new Date();
      return this;
    }
    if (opts.atomic) {
      if (event === EVENTS.UNLINK) {
        this._pendingUnlinks.set(path4, [event, ...args]);
        setTimeout(() => {
          this._pendingUnlinks.forEach((entry, path5) => {
            this.emit(...entry);
            this.emit(EVENTS.ALL, ...entry);
            this._pendingUnlinks.delete(path5);
          });
        }, typeof opts.atomic === "number" ? opts.atomic : 100);
        return this;
      }
      if (event === EVENTS.ADD && this._pendingUnlinks.has(path4)) {
        event = EVENTS.CHANGE;
        this._pendingUnlinks.delete(path4);
      }
    }
    if (awf && (event === EVENTS.ADD || event === EVENTS.CHANGE) && this._readyEmitted) {
      const awfEmit = (err, stats2) => {
        if (err) {
          event = EVENTS.ERROR;
          args[0] = err;
          this.emitWithAll(event, args);
        } else if (stats2) {
          if (args.length > 1) {
            args[1] = stats2;
          } else {
            args.push(stats2);
          }
          this.emitWithAll(event, args);
        }
      };
      this._awaitWriteFinish(path4, awf.stabilityThreshold, event, awfEmit);
      return this;
    }
    if (event === EVENTS.CHANGE) {
      const isThrottled = !this._throttle(EVENTS.CHANGE, path4, 50);
      if (isThrottled)
        return this;
    }
    if (opts.alwaysStat && stats === void 0 && (event === EVENTS.ADD || event === EVENTS.ADD_DIR || event === EVENTS.CHANGE)) {
      const fullPath = opts.cwd ? sysPath2.join(opts.cwd, path4) : path4;
      let stats2;
      try {
        stats2 = await (0, import_promises3.stat)(fullPath);
      } catch (err) {
      }
      if (!stats2 || this.closed)
        return;
      args.push(stats2);
    }
    this.emitWithAll(event, args);
    return this;
  }
  /**
   * Common handler for errors
   * @returns The error if defined, otherwise the value of the FSWatcher instance's `closed` flag
   */
  _handleError(error) {
    const code = error && error.code;
    if (error && code !== "ENOENT" && code !== "ENOTDIR" && (!this.options.ignorePermissionErrors || code !== "EPERM" && code !== "EACCES")) {
      this.emit(EVENTS.ERROR, error);
    }
    return error || this.closed;
  }
  /**
   * Helper utility for throttling
   * @param actionType type being throttled
   * @param path being acted upon
   * @param timeout duration of time to suppress duplicate actions
   * @returns tracking object or false if action should be suppressed
   */
  _throttle(actionType, path4, timeout) {
    if (!this._throttled.has(actionType)) {
      this._throttled.set(actionType, /* @__PURE__ */ new Map());
    }
    const action = this._throttled.get(actionType);
    if (!action)
      throw new Error("invalid throttle");
    const actionPath = action.get(path4);
    if (actionPath) {
      actionPath.count++;
      return false;
    }
    let timeoutObject;
    const clear = () => {
      const item = action.get(path4);
      const count = item ? item.count : 0;
      action.delete(path4);
      clearTimeout(timeoutObject);
      if (item)
        clearTimeout(item.timeoutObject);
      return count;
    };
    timeoutObject = setTimeout(clear, timeout);
    const thr = { timeoutObject, clear, count: 0 };
    action.set(path4, thr);
    return thr;
  }
  _incrReadyCount() {
    return this._readyCount++;
  }
  /**
   * Awaits write operation to finish.
   * Polls a newly created file for size variations. When files size does not change for 'threshold' milliseconds calls callback.
   * @param path being acted upon
   * @param threshold Time in milliseconds a file size must be fixed before acknowledging write OP is finished
   * @param event
   * @param awfEmit Callback to be called when ready for event to be emitted.
   */
  _awaitWriteFinish(path4, threshold, event, awfEmit) {
    const awf = this.options.awaitWriteFinish;
    if (typeof awf !== "object")
      return;
    const pollInterval = awf.pollInterval;
    let timeoutHandler;
    let fullPath = path4;
    if (this.options.cwd && !sysPath2.isAbsolute(path4)) {
      fullPath = sysPath2.join(this.options.cwd, path4);
    }
    const now = new Date();
    const writes = this._pendingWrites;
    function awaitWriteFinishFn(prevStat) {
      (0, import_fs2.stat)(fullPath, (err, curStat) => {
        if (err || !writes.has(path4)) {
          if (err && err.code !== "ENOENT")
            awfEmit(err);
          return;
        }
        const now2 = Number(new Date());
        if (prevStat && curStat.size !== prevStat.size) {
          writes.get(path4).lastChange = now2;
        }
        const pw = writes.get(path4);
        const df = now2 - pw.lastChange;
        if (df >= threshold) {
          writes.delete(path4);
          awfEmit(void 0, curStat);
        } else {
          timeoutHandler = setTimeout(awaitWriteFinishFn, pollInterval, curStat);
        }
      });
    }
    if (!writes.has(path4)) {
      writes.set(path4, {
        lastChange: now,
        cancelWait: () => {
          writes.delete(path4);
          clearTimeout(timeoutHandler);
          return event;
        }
      });
      timeoutHandler = setTimeout(awaitWriteFinishFn, pollInterval);
    }
  }
  /**
   * Determines whether user has asked to ignore this path.
   */
  _isIgnored(path4, stats) {
    if (this.options.atomic && DOT_RE.test(path4))
      return true;
    if (!this._userIgnored) {
      const { cwd } = this.options;
      const ign = this.options.ignored;
      const ignored = (ign || []).map(normalizeIgnored(cwd));
      const ignoredPaths = [...this._ignoredPaths];
      const list = [...ignoredPaths.map(normalizeIgnored(cwd)), ...ignored];
      this._userIgnored = anymatch(list, void 0);
    }
    return this._userIgnored(path4, stats);
  }
  _isntIgnored(path4, stat5) {
    return !this._isIgnored(path4, stat5);
  }
  /**
   * Provides a set of common helpers and properties relating to symlink handling.
   * @param path file or directory pattern being watched
   */
  _getWatchHelpers(path4) {
    return new WatchHelper(path4, this.options.followSymlinks, this);
  }
  // Directory helpers
  // -----------------
  /**
   * Provides directory tracking objects
   * @param directory path of the directory
   */
  _getWatchedDir(directory) {
    const dir = sysPath2.resolve(directory);
    if (!this._watched.has(dir))
      this._watched.set(dir, new DirEntry(dir, this._boundRemove));
    return this._watched.get(dir);
  }
  // File helpers
  // ------------
  /**
   * Check for read permissions: https://stackoverflow.com/a/11781404/1358405
   */
  _hasReadPermissions(stats) {
    if (this.options.ignorePermissionErrors)
      return true;
    return Boolean(Number(stats.mode) & 256);
  }
  /**
   * Handles emitting unlink events for
   * files and directories, and via recursion, for
   * files and directories within directories that are unlinked
   * @param directory within which the following item is located
   * @param item      base path of item/directory
   */
  _remove(directory, item, isDirectory) {
    const path4 = sysPath2.join(directory, item);
    const fullPath = sysPath2.resolve(path4);
    isDirectory = isDirectory != null ? isDirectory : this._watched.has(path4) || this._watched.has(fullPath);
    if (!this._throttle("remove", path4, 100))
      return;
    if (!isDirectory && this._watched.size === 1) {
      this.add(directory, item, true);
    }
    const wp = this._getWatchedDir(path4);
    const nestedDirectoryChildren = wp.getChildren();
    nestedDirectoryChildren.forEach((nested) => this._remove(path4, nested));
    const parent = this._getWatchedDir(directory);
    const wasTracked = parent.has(item);
    parent.remove(item);
    if (this._symlinkPaths.has(fullPath)) {
      this._symlinkPaths.delete(fullPath);
    }
    let relPath = path4;
    if (this.options.cwd)
      relPath = sysPath2.relative(this.options.cwd, path4);
    if (this.options.awaitWriteFinish && this._pendingWrites.has(relPath)) {
      const event = this._pendingWrites.get(relPath).cancelWait();
      if (event === EVENTS.ADD)
        return;
    }
    this._watched.delete(path4);
    this._watched.delete(fullPath);
    const eventName = isDirectory ? EVENTS.UNLINK_DIR : EVENTS.UNLINK;
    if (wasTracked && !this._isIgnored(path4))
      this._emit(eventName, path4);
    this._closePath(path4);
  }
  /**
   * Closes all watchers for a path
   */
  _closePath(path4) {
    this._closeFile(path4);
    const dir = sysPath2.dirname(path4);
    this._getWatchedDir(dir).remove(sysPath2.basename(path4));
  }
  /**
   * Closes only file-specific watchers
   */
  _closeFile(path4) {
    const closers = this._closers.get(path4);
    if (!closers)
      return;
    closers.forEach((closer) => closer());
    this._closers.delete(path4);
  }
  _addPathCloser(path4, closer) {
    if (!closer)
      return;
    let list = this._closers.get(path4);
    if (!list) {
      list = [];
      this._closers.set(path4, list);
    }
    list.push(closer);
  }
  _readdirp(root, opts) {
    if (this.closed)
      return;
    const options = { type: EVENTS.ALL, alwaysStat: true, lstat: true, ...opts, depth: 0 };
    let stream = readdirp(root, options);
    this._streams.add(stream);
    stream.once(STR_CLOSE, () => {
      stream = void 0;
    });
    stream.once(STR_END, () => {
      if (stream) {
        this._streams.delete(stream);
        stream = void 0;
      }
    });
    return stream;
  }
};
function watch(paths, options = {}) {
  const watcher = new FSWatcher(options);
  watcher.add(paths);
  return watcher;
}
var esm_default = { watch, FSWatcher };

// src/server.ts
var import_events2 = require("events");
var server;
var isServerRunning = false;
var latestDirUrl = null;
var urlEmitter = new import_events2.EventEmitter();
function getContentType(ext) {
  switch (ext) {
    case ".jpg":
    case ".jpeg":
      return "image/jpeg";
    case ".png":
      return "image/png";
    case ".gif":
      return "image/gif";
    case ".webp":
      return "image/webp";
    case ".svg":
      return "image/svg+xml";
    case ".pdf":
      return "application/pdf";
    case ".mp4":
      return "video/mp4";
    case ".mp3":
      return "audio/mpeg";
    case ".ogg":
      return "audio/ogg";
    case ".wav":
      return "audio/wav";
    case ".json":
      return "application/json";
    case ".xml":
      return "application/xml";
    case ".ico":
      return "image/x-icon";
    case ".txt":
      return "text/plain";
    case ".csv":
      return "text/csv";
    case ".html":
      return "text/html";
    case ".css":
      return "text/css";
    case ".js":
      return "application/javascript";
    default:
      return null;
  }
}
function startServer(libraryPath, port) {
  if (isServerRunning)
    return;
  const imagesPath = path.join(libraryPath, "images");
  const watcher = esm_default.watch(imagesPath, {
    ignored: /(^|[\/\\])\../,
    // 
    persistent: true,
    depth: 1,
    // 
    ignoreInitial: true
    // 
  });
  watcher.on("addDir", (dirPath) => {
    const relativePath = path.relative(libraryPath, dirPath).replace(/\\/g, "/");
    latestDirUrl = `http://localhost:${port}/${relativePath}`;
    urlEmitter.emit("urlUpdated", latestDirUrl);
  });
  server = http.createServer((req, res) => {
    res.setHeader("Access-Control-Allow-Origin", "*");
    res.setHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS, PUT, PATCH, DELETE");
    res.setHeader("Access-Control-Allow-Headers", "X-Requested-With,content-type");
    res.setHeader("Access-Control-Allow-Credentials", "true");
    const filePath = path.join(libraryPath, req.url || "");
    const url = new URL(req.url || "/", `http://${req.headers.host}`);
    const noAutoplay = url.searchParams.has("noautoplay");
    req.noAutoplay = noAutoplay;
    if (!filePath.startsWith(path.join(libraryPath, "images") + path.sep)) {
      res.writeHead(404);
      res.end();
      return;
    }
    fs.stat(filePath, (err, stats) => {
      if (err) {
        if (err.code === "ENOENT") {
          res.writeHead(404).end();
        } else {
          res.writeHead(500).end("Internal Error");
        }
        return;
      }
      if (stats.isDirectory()) {
        const jsonFilePath = path.join(filePath, "metadata.json");
        if (!fs.existsSync(jsonFilePath)) {
          res.writeHead(404).end();
          return;
        }
        fs.readFile(jsonFilePath, "utf8", (err2, data) => {
          if (err2) {
            console.error("Error reading JSON file:", err2);
            res.writeHead(500, { "Content-Type": "text/plain" });
            res.end("Internal Server Error");
          } else {
            try {
              const info = JSON.parse(data);
              const imageName = info.name;
              const imageExt = info.ext;
              const imageFile = `${imageName}.${imageExt}`;
              const imagePath = path.join(filePath, imageFile);
              fs.readFile(imagePath, (err3, data2) => {
                if (err3) {
                  console.error("Error reading file:", err3);
                  res.writeHead(404, { "Content-Type": "text/plain" });
                  res.end("File not found");
                } else {
                  if (imageExt === "url") {
                    const content = data2.toString("utf8");
                    const urlMatch = content.match(/URL=(.+)/i);
                    if (urlMatch && urlMatch[1]) {
                      res.writeHead(302, { "Location": urlMatch[1] });
                      res.end();
                      return;
                    }
                  }
                  const contentType = getContentType(`.${imageExt}`);
                  if (contentType === null) {
                    res.writeHead(204);
                    res.end();
                    return;
                  }
                  res.writeHead(200, { "Content-Type": contentType });
                  res.end(data2);
                }
              });
            } catch (parseErr) {
              console.error("Error parsing JSON:", parseErr);
              res.writeHead(500, { "Content-Type": "text/plain" });
              res.end("Error parsing JSON");
            }
          }
        });
      } else {
        res.setHeader("Cache-Control", "public, max-age=604800");
        fs.readFile(filePath, (err2, data) => {
          if (err2) {
            res.writeHead(500, { "Content-Type": "text/plain" });
            res.end("Internal Server Error");
          } else {
            const ext = path.extname(filePath).toLowerCase();
            const contentType = getContentType(ext);
            if (contentType === null) {
              res.writeHead(204);
              res.end();
              return;
            }
            if (ext === ".url") {
              const content = data.toString("utf8");
              const urlMatch = content.match(/URL=(.+)/i);
              if (urlMatch && urlMatch[1]) {
                res.writeHead(302, { "Location": urlMatch[1] });
                res.end();
                return;
              }
            }
            res.writeHead(200, { "Content-Type": contentType });
            res.end(data);
          }
        });
      }
    });
  });
  server.listen(port, () => {
    isServerRunning = true;
    print(`Server is running at http://localhost:${port}/`);
  });
}
function refreshServer(libraryPath, port) {
  if (!isServerRunning)
    return;
  server.close(() => {
    isServerRunning = false;
    print("Server stopped for refresh.");
    startServer(libraryPath, port);
  });
}
function stopServer() {
  if (isServerRunning) {
    server.close(() => {
      isServerRunning = false;
      print("Server stopped.");
    });
  }
}

// src/urlHandler.ts
var import_obsidian = require("obsidian");
var fs2 = __toESM(require("fs"));
var path2 = __toESM(require("path"));
var os = __toESM(require("os"));
var electron = require("electron");
var clipboard = electron.clipboard;
async function handlePasteEvent(clipboardEvent, editor, port, pluginInstance) {
  var _a, _b;
  let clipboardText = (_a = clipboardEvent.clipboardData) == null ? void 0 : _a.getData("text/plain");
  let filePath = "";
  if ((_b = clipboardEvent.clipboardData) == null ? void 0 : _b.files.length) {
    clipboardEvent.preventDefault();
    const file = clipboardEvent.clipboardData.files[0];
    filePath = electron.webUtils.getPathForFile(file);
    if (!filePath) {
      const tempDir = os.tmpdir();
      const uploadDir = path2.join(tempDir, "obsidian-uploads");
      if (!fs2.existsSync(uploadDir)) {
        fs2.mkdirSync(uploadDir);
      }
      filePath = path2.join(uploadDir, file.name);
      const buffer = await file.arrayBuffer();
      fs2.writeFileSync(filePath, Buffer.from(buffer));
    }
  }
  if (clipboardText && /^https?:\/\/[^\s]+$/.test(clipboardText) && !clipboardText.startsWith("http://localhost")) {
    if (pluginInstance.settings.websiteUpload) {
      clipboardEvent.preventDefault();
      try {
        const url = `${clipboardText}`;
        await uploadByUrl(url, pluginInstance, editor);
        new import_obsidian.Notice("URL uploaded successfully, please wait for Eagle link update", 12e3);
      } catch (error) {
        new import_obsidian.Notice("URL upload failed");
      }
      print(`Clipboard has text: ${clipboardText}`);
    } else {
      return;
    }
  } else if (filePath) {
    clipboardEvent.preventDefault();
    if (!filePath.startsWith(pluginInstance.settings.libraryPath)) {
      print("filePath1:", filePath);
      try {
        await uploadByClipboard(filePath, pluginInstance);
        new import_obsidian.Notice("File uploaded successfully");
        urlEmitter.once("urlUpdated", (latestDirUrl2) => {
          const fileName = path2.basename(filePath);
          const fileExt = path2.extname(filePath).toLowerCase();
          if ([".png", ".jpg", ".jpeg", ".gif", ".webp"].includes(fileExt)) {
            editor.replaceSelection(`![${fileName}|${pluginInstance.settings.imageSize}](${latestDirUrl2})`);
            new import_obsidian.Notice("Eagle link converted");
          } else {
            editor.replaceSelection(`[${fileName}](${latestDirUrl2})`);
          }
        });
      } catch (error) {
        new import_obsidian.Notice("File upload failed, check if Eagle is running");
      }
    } else {
      const match = filePath.match(/images\\[^\\]+\.info/);
      if (match) {
        const fileName = path2.basename(filePath);
        const fileExt = path2.extname(filePath).toLowerCase();
        let updatedText;
        const urlPath = match[0].replace(/\\/g, "/");
        if ([".png", ".jpg", ".jpeg"].includes(fileExt)) {
          clipboardEvent.preventDefault();
          updatedText = `![${fileName}|${pluginInstance.settings.imageSize}](http://localhost:${port}/${urlPath})`;
        } else {
          clipboardEvent.preventDefault();
          updatedText = `[${fileName}](http://localhost:${port}/${urlPath})`;
        }
        editor.replaceSelection(updatedText);
        new import_obsidian.Notice("Eagle link converted");
      } else {
        new import_obsidian.Notice("Non-Eagle link");
      }
    }
  }
}
async function uploadByClipboard(filePath, pluginInstance) {
  const folderId = pluginInstance.settings.folderId || "";
  const data = {
    "path": filePath,
    // 
    "name": path2.basename(filePath),
    // 
    "folderId": folderId
    // "token": "58f7ecda-250f-4043-8ae0-cd11d673f680" // API
  };
  const requestOptions = {
    method: "POST",
    body: JSON.stringify(data),
    redirect: "follow"
  };
  const response = await fetch("http://localhost:41595/api/item/addFromPath", requestOptions);
  if (!response.ok) {
    throw new Error("Upload Failed");
  }
  return;
}
async function uploadByUrl(url, pluginInstance, editor) {
  const folderId = pluginInstance.settings.folderId || "";
  const data = {
    "url": url,
    // "name": "",
    // "tags": ["FGO", ""],
    "folderId": folderId
  };
  print("Request data:", data);
  const requestOptions = {
    method: "POST",
    body: JSON.stringify(data),
    redirect: "follow"
  };
  try {
    const response = await fetch("http://localhost:41595/api/item/addBookmark", requestOptions);
    if (!response.ok) {
      const errorResult = await response.json();
      console.error("Error response:", errorResult);
      throw new Error("Upload Failed");
    }
    urlEmitter.once("urlUpdated", async (latestDirUrl2) => {
      print("latestDirUrl:", latestDirUrl2);
      const match = latestDirUrl2.match(/images\/([^/]+)\.info/);
      if (match && match[1]) {
        const fileId = match[1];
        await new Promise((resolve3) => setTimeout(resolve3, 2e3));
        const requestOptions2 = {
          method: "GET",
          redirect: "follow"
        };
        try {
          const response2 = await fetch(`http://localhost:41595/api/item/info?id=${fileId}`, requestOptions2);
          const result = await response2.json();
          if (result.status === "success" && result.data) {
            const fileName = result.data.name + "." + result.data.ext;
            editor.replaceSelection(`[${fileName}](${latestDirUrl2})`);
          } else {
            print(`Failed to get file information: ${result}`);
          }
        } catch (error) {
          print(`Request error: ${error}`);
        }
      } else {
        print("Cannot extract file ID");
      }
    });
  } catch (error) {
    console.error("Fetch error:", error);
    throw error;
  }
}
async function handleDropEvent(dropEvent, editor, port, pluginInstance) {
  var _a;
  dropEvent.preventDefault();
  if ((_a = dropEvent.dataTransfer) == null ? void 0 : _a.files.length) {
    const files = dropEvent.dataTransfer.files;
    for (let i = 0; i < files.length; i++) {
      const file = files[i];
      const filePath = electron.webUtils.getPathForFile(file);
      print(`Drag file path: ${filePath}`);
      if (!filePath.startsWith(pluginInstance.settings.libraryPath)) {
        try {
          await uploadByClipboard(filePath, pluginInstance);
          new import_obsidian.Notice("File uploaded successfully");
          urlEmitter.once("urlUpdated", (latestDirUrl2) => {
            const fileName = path2.basename(filePath);
            const fileExt = path2.extname(filePath).toLowerCase();
            let insertText;
            if ([".png", ".jpg", ".jpeg", ".gif", ".webp"].includes(fileExt)) {
              insertText = `![${fileName}|${pluginInstance.settings.imageSize}](${latestDirUrl2})`;
              new import_obsidian.Notice("Eagle link converted");
            } else {
              insertText = `[${fileName}](${latestDirUrl2})`;
            }
            editor.replaceSelection(insertText);
            new import_obsidian.Notice("Eagle\u94FE\u63A5\u5DF2\u8F6C\u6362");
          });
        } catch (error) {
          new import_obsidian.Notice("File upload failed, check if Eagle is running");
        }
      } else {
        const match = filePath.match(/images\\[^\\]+\.info/);
        if (match) {
          const fileName = path2.basename(filePath);
          const fileExt = path2.extname(filePath).toLowerCase();
          let updatedText;
          const urlPath = match[0].replace(/\\/g, "/");
          if ([".png", ".jpg", ".jpeg"].includes(fileExt)) {
            updatedText = `![${fileName}|${pluginInstance.settings.imageSize}](http://localhost:${port}/${urlPath})`;
          } else {
            updatedText = `[${fileName}](http://localhost:${port}/${urlPath})`;
          }
          editor.replaceSelection(updatedText);
          new import_obsidian.Notice("Eagle\u94FE\u63A5\u5DF2\u8F6C\u6362");
        } else {
          new import_obsidian.Notice("\u975EEagle\u94FE\u63A5");
        }
      }
    }
  }
}

// src/onElement.ts
function onElement(el, event, selector, listener, options) {
  el.on(event, selector, listener, options);
  return () => el.off(event, selector, listener, options);
}

// src/synchronizedpagetabs.ts
var import_obsidian2 = require("obsidian");
async function syncTags(app, settings) {
  try {
    const yamlTags = getYamlTagsFromCurrentFile(app);
    let additionalTags = [];
    if (settings.advancedID) {
      const yamlId = getYamlIdFromCurrentFile(app);
      if (yamlId) {
        additionalTags.push(yamlId);
      }
    }
    const infoFileIds = await getInfoFileIdsFromCurrentFile(app);
    for (const id of infoFileIds) {
      const currentTags = await fetchTagsForInfoFile(id);
      const newTags = Array.from(/* @__PURE__ */ new Set([...currentTags, ...yamlTags, ...additionalTags]));
      await updateTagsForInfoFile(id, newTags);
      new import_obsidian2.Notice("Tags synced successfully");
    }
  } catch (error) {
    print("Error syncing tags:", error);
    new import_obsidian2.Notice("Error syncing tags. Check console for details.");
  }
}
async function fetchTagsForInfoFile(id) {
  const requestOptions = {
    method: "GET",
    redirect: "follow"
  };
  const response = await fetch(`http://localhost:41595/api/item/info?token=YOUR_API_TOKEN&id=${id}`, requestOptions);
  const result = await response.json();
  return result.data.tags || [];
}
async function updateTagsForInfoFile(id, tags) {
  const data = {
    id,
    tags
  };
  const requestOptions = {
    method: "POST",
    body: JSON.stringify(data),
    redirect: "follow"
  };
  const response = await fetch("http://localhost:41595/api/item/update", requestOptions);
  const result = await response.json();
  print(`Updated tags for ${id}:`, result);
}
function getYamlTagsFromCurrentFile(app) {
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian2.Notice("No active file found.");
    return [];
  }
  const fileCache = app.metadataCache.getFileCache(activeFile);
  if (!fileCache || !fileCache.frontmatter) {
    new import_obsidian2.Notice("No YAML frontmatter found.");
    return [];
  }
  return fileCache.frontmatter.tags || [];
}
async function getInfoFileIdsFromCurrentFile(app) {
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian2.Notice("No active file found.");
    return [];
  }
  const fileContent = await app.vault.read(activeFile);
  const regex = /http:\/\/localhost:\d+\/images\/([A-Z0-9]+)\.info/g;
  let match;
  const ids = /* @__PURE__ */ new Set();
  while ((match = regex.exec(fileContent)) !== null) {
    ids.add(match[1]);
  }
  return Array.from(ids);
}
function getYamlIdFromCurrentFile(app) {
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian2.Notice("No active file found.");
    return null;
  }
  const fileCache = app.metadataCache.getFileCache(activeFile);
  if (!fileCache || !fileCache.frontmatter) {
    new import_obsidian2.Notice("No YAML frontmatter found.");
    return null;
  }
  return fileCache.frontmatter.id || null;
}

// src/eaglejumpobsidian.ts
var import_obsidian3 = require("obsidian");
var EagleJumpModal = class extends import_obsidian3.Modal {
  constructor(app, settings, onSubmit) {
    super(app);
    this.settings = settings;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", { text: "Please enter Page id or Eagle image link" });
    let linkInput;
    new import_obsidian3.Setting(contentEl).addText((text) => {
      linkInput = text.inputEl;
      text.setPlaceholder("link...");
      linkInput.style.width = "400px";
    });
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.alignItems = "end";
    buttonContainer.style.justifyContent = "center";
    new import_obsidian3.Setting(buttonContainer).addButton((btn) => btn.setButtonText("Jump").setCta().onClick(() => {
      const link = linkInput.value.trim();
      if (link) {
        const eaglePattern = /^eagle:\/\/item\/([A-Z0-9]+)$/;
        const uuidPattern = /^.+$/;
        const imagePattern = /http:\/\/localhost:\d+\/images\/([A-Z0-9]+)\.info/;
        const eagleMatch = link.match(eaglePattern);
        const uuidMatch = link.match(uuidPattern);
        const imageMatch = link.match(imagePattern);
        if (eagleMatch || imageMatch) {
          const itemId = eagleMatch ? eagleMatch[1] : imageMatch ? imageMatch[1] : null;
          if (itemId) {
            print(`Search ID in Obsidian: ${itemId}`);
            let searchLeaf = this.app.workspace.getLeavesOfType("search")[0];
            if (!searchLeaf) {
              searchLeaf = this.app.workspace.getLeaf(true);
              searchLeaf.setViewState({ type: "search" });
            }
            this.app.workspace.revealLeaf(searchLeaf);
            const searchView = searchLeaf.view;
            if (searchView && typeof searchView.setQuery === "function") {
              searchView.setQuery(itemId);
            } else {
              new import_obsidian3.Notice("Search view does not support setQuery");
            }
          } else {
            new import_obsidian3.Notice("Cannot extract a valid ID");
          }
        } else if (uuidMatch) {
          const obsidianStoreId = this.settings.obsidianStoreId;
          const advUri = `obsidian://adv-uri?vault=${obsidianStoreId}&uid=${link}`;
          print(`Run link: ${advUri}`);
          window.open(advUri, "_blank");
        } else {
          new import_obsidian3.Notice("Please enter a valid link");
        }
        this.close();
      } else {
        new import_obsidian3.Notice("Please enter a valid link");
      }
    }));
    new import_obsidian3.Setting(buttonContainer).addButton((btn) => btn.setButtonText("Cancel").onClick(() => {
      this.close();
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function jumpModal(app, settings) {
  new EagleJumpModal(app, settings, (link) => {
    print(`User input link: ${link}`);
  }).open();
}

// src/addCommand-config.ts
var addCommandSynchronizedPageTabs = (myPlugin) => {
  myPlugin.addCommand({
    id: "synchronized-page-tabs",
    name: "synchronized-page-tabs",
    callback: async () => {
      syncTags(myPlugin.app, myPlugin.settings);
    }
  });
};
var addCommandEagleJump = (myPlugin) => {
  myPlugin.addCommand({
    id: "eagle-jump-obsidian",
    name: "eagle-jump-obsidian",
    callback: async () => {
      jumpModal(myPlugin.app, myPlugin.settings);
    }
  });
};

// src/main.ts
var import_fs4 = require("fs");

// src/setting.ts
var import_obsidian4 = require("obsidian");
var DEFAULT_SETTINGS = {
  mySetting: "default",
  port: 6060,
  libraryPath: "",
  folderId: "",
  clickView: false,
  adaptiveRatio: 0.8,
  advancedID: false,
  obsidianStoreId: "",
  imageSize: void 0,
  websiteUpload: false,
  libraryPaths: [],
  debug: false,
  openInObsidian: "newPage"
};
var SampleSettingTab = class extends import_obsidian4.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian4.Setting(containerEl).setName("Port").setDesc("Enter the port number of the server, ranging from 1000 to 9999, and do not modify it after setting.").addText((text) => text.setPlaceholder("Enter port number").setValue(this.plugin.settings.port.toString()).onChange(async (value) => {
      this.plugin.settings.port = parseInt(value);
      await this.plugin.saveSettings();
    }));
    new import_obsidian4.Setting(containerEl).setName("Library Paths").setDesc(`Enter multiple library paths for the server. Current valid path: ${this.plugin.settings.libraryPath}`).addButton((button) => {
      button.setButtonText("+").setCta().onClick(() => {
        this.plugin.settings.libraryPaths.push("");
        this.plugin.saveSettings();
        this.display();
      });
    });
    this.plugin.settings.libraryPaths.forEach((path4, index) => {
      new import_obsidian4.Setting(containerEl).addText((text) => text.setPlaceholder("Enter library path").setValue(path4).onChange(async (value) => {
        this.plugin.settings.libraryPaths[index] = value;
        await this.plugin.saveSettings();
        await this.plugin.updateLibraryPath();
        this.display();
      })).addExtraButton((button) => {
        button.setIcon("cross").setTooltip("Remove").onClick(async () => {
          this.plugin.settings.libraryPaths.splice(index, 1);
          await this.plugin.saveSettings();
          await this.plugin.updateLibraryPath();
          this.display();
        });
      });
    });
    new import_obsidian4.Setting(containerEl).setName("Eagle Folder ID").setDesc("Enter the folder ID for Eagle").addText((text) => text.setPlaceholder("Enter folder ID").setValue(this.plugin.settings.folderId || "").onChange(async (value) => {
      this.plugin.settings.folderId = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian4.Setting(containerEl).setName("Image size").setDesc("Default size for image import").addText((text) => {
      var _a;
      return text.setPlaceholder("Enter image size").setValue(((_a = this.plugin.settings.imageSize) == null ? void 0 : _a.toString()) || "").onChange(async (value) => {
        this.plugin.settings.imageSize = value ? parseInt(value) : void 0;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName("Click to view images").setDesc("Click the right half of the image to view the image in detail.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.clickView).onChange(async (value) => {
        this.plugin.settings.clickView = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName("Adaptive image display ratio based on window size").setDesc("When the image exceeds the window size, the image is displayed adaptively according to the window size.").addSlider((slider) => {
      slider.setLimits(0.1, 1, 0.05);
      slider.setValue(this.plugin.settings.adaptiveRatio);
      slider.onChange(async (value) => {
        this.plugin.settings.adaptiveRatio = value;
        new import_obsidian4.Notice(`Adaptive ratio: ${value}`);
        await this.plugin.saveSettings();
      });
      slider.setDynamicTooltip();
    });
    new import_obsidian4.Setting(containerEl).setName("Synchronizing advanced URI as a tag").setDesc("Synchronize advanced URI as a tag when page ids exist.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.advancedID).onChange(async (value) => {
        this.plugin.settings.advancedID = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName("Obsidian store ID").setDesc("Enter the Obsidian store ID").addText((text) => text.setPlaceholder("Enter Obsidian store ID").setValue(this.plugin.settings.obsidianStoreId).onChange(async (value) => {
      this.plugin.settings.obsidianStoreId = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian4.Setting(containerEl).setName("Open in obsidian").setDesc("Default opening of attachments in obsidian").addDropdown((dropdown) => {
      dropdown.addOption("newPage", "Open in new page").addOption("popup", "Open in popup").addOption("rightPane", "Open in right pane").setValue(this.plugin.settings.openInObsidian || "newPage").onChange(async (value) => {
        this.plugin.settings.openInObsidian = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName("Website upload").setDesc("URL uploaded to eagle. note: 1. eagle will automatically get the cover, with a certain delay. 2. when exporting notes to share, may not be able to jump effectively. 3.This option does not affect links dragged/copied from eagle to obsidian.").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.websiteUpload).onChange(async (value) => {
        this.plugin.settings.websiteUpload = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian4.Setting(containerEl).setName("Refresh Server").setDesc("Refresh the server with the new settings").addButton((button) => button.setButtonText("Refresh").onClick(() => {
      refreshServer(this.plugin.settings.libraryPath, this.plugin.settings.port);
    }));
    new import_obsidian4.Setting(containerEl).setName("Debug Mode").setDesc("Enable or disable debug mode").addToggle((toggle) => toggle.setValue(this.plugin.settings.debug).onChange(async (value) => {
      this.plugin.settings.debug = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/Leftclickimage.ts
async function handleImageClick(evt, adaptiveRatio) {
  const target = evt.target;
  if (target.tagName !== "IMG") {
    removeZoomedImage();
    return;
  }
  const rect = target.getBoundingClientRect();
  const imageCenter = rect.left + rect.width / 2;
  if (evt.clientX <= imageCenter || document.getElementById("af-zoomed-image"))
    return;
  evt.preventDefault();
  const mask = createZoomMask();
  const { zoomedImage, originalWidth, originalHeight } = await createZoomedImage(target.src, adaptiveRatio);
  const scaleDiv = createZoomScaleDiv(zoomedImage, originalWidth, originalHeight);
  zoomedImage.addEventListener("wheel", (e) => handleZoomMouseWheel(e, zoomedImage, originalWidth, originalHeight, scaleDiv));
  zoomedImage.addEventListener("contextmenu", (e) => handleZoomContextMenu(e, zoomedImage, originalWidth, originalHeight, scaleDiv));
  zoomedImage.addEventListener("mousedown", (e) => handleZoomDragStart(e, zoomedImage));
  zoomedImage.addEventListener("dblclick", (e) => {
    adaptivelyDisplayImage(zoomedImage, originalWidth, originalHeight, adaptiveRatio);
    updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
  });
}
function removeZoomedImage() {
  const zoomedImage = document.getElementById("af-zoomed-image");
  if (zoomedImage)
    document.body.removeChild(zoomedImage);
  const scaleDiv = document.getElementById("af-scale-div");
  if (scaleDiv)
    document.body.removeChild(scaleDiv);
  const mask = document.getElementById("af-mask");
  if (mask)
    document.body.removeChild(mask);
}
function createZoomMask() {
  const mask = document.createElement("div");
  mask.id = "af-mask";
  mask.style.position = "fixed";
  mask.style.top = "0";
  mask.style.left = "0";
  mask.style.width = "100%";
  mask.style.height = "100%";
  mask.style.background = "rgba(0, 0, 0, 0.5)";
  mask.style.zIndex = "9998";
  document.body.appendChild(mask);
  return mask;
}
async function createZoomedImage(src, adaptive_ratio) {
  const zoomedImage = document.createElement("img");
  zoomedImage.id = "af-zoomed-image";
  zoomedImage.src = src;
  zoomedImage.style.position = "fixed";
  zoomedImage.style.zIndex = "9999";
  zoomedImage.style.top = "50%";
  zoomedImage.style.left = "50%";
  zoomedImage.style.transform = "translate(-50%, -50%)";
  document.body.appendChild(zoomedImage);
  let originalWidth = zoomedImage.naturalWidth;
  let originalHeight = zoomedImage.naturalHeight;
  adaptivelyDisplayImage(zoomedImage, originalWidth, originalHeight, adaptive_ratio);
  return {
    zoomedImage,
    originalWidth,
    originalHeight
  };
}
function adaptivelyDisplayImage(zoomedImage, originalWidth, originalHeight, adaptive_ratio) {
  zoomedImage.style.left = `50%`;
  zoomedImage.style.top = `50%`;
  let screenRatio = adaptive_ratio;
  let screenWidth = window.innerWidth;
  let screenHeight = window.innerHeight;
  if (originalWidth > screenWidth || originalHeight > screenHeight) {
    if (originalWidth / screenWidth > originalHeight / screenHeight) {
      zoomedImage.style.width = `${screenWidth * screenRatio}px`;
      zoomedImage.style.height = "auto";
    } else {
      zoomedImage.style.height = `${screenHeight * screenRatio}px`;
      zoomedImage.style.width = "auto";
    }
  } else {
    zoomedImage.style.width = `${originalWidth}px`;
    zoomedImage.style.height = `${originalHeight}px`;
  }
}
function createZoomScaleDiv(zoomedImage, originalWidth, originalHeight) {
  const scaleDiv = document.createElement("div");
  scaleDiv.id = "af-scale-div";
  scaleDiv.classList.add("af-scale-div");
  scaleDiv.style.zIndex = "10000";
  updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
  document.body.appendChild(scaleDiv);
  return scaleDiv;
}
function updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight) {
  const width = zoomedImage.offsetWidth;
  const height = zoomedImage.offsetHeight;
  let scalePercent = width / originalWidth * 100;
  scaleDiv.innerText = `${width}\xD7${height} (${scalePercent.toFixed(1)}%)`;
}
function handleZoomMouseWheel(e, zoomedImage, originalWidth, originalHeight, scaleDiv) {
  e.preventDefault();
  const mouseX = e.clientX;
  const mouseY = e.clientY;
  const scale = e.deltaY > 0 ? 0.95 : 1.05;
  const newWidth = scale * zoomedImage.offsetWidth;
  const newHeight = scale * zoomedImage.offsetHeight;
  const newLeft = mouseX - (mouseX - zoomedImage.offsetLeft) * scale;
  const newTop = mouseY - (mouseY - zoomedImage.offsetTop) * scale;
  zoomedImage.style.width = `${newWidth}px`;
  zoomedImage.style.height = `${newHeight}px`;
  zoomedImage.style.left = `${newLeft}px`;
  zoomedImage.style.top = `${newTop}px`;
  updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
}
function handleZoomContextMenu(e, zoomedImage, originalWidth, originalHeight, scaleDiv) {
  e.preventDefault();
  zoomedImage.style.width = `${originalWidth}px`;
  zoomedImage.style.height = `${originalHeight}px`;
  zoomedImage.style.left = `50%`;
  zoomedImage.style.top = `50%`;
  updateZoomScaleDiv(scaleDiv, zoomedImage, originalWidth, originalHeight);
}
function handleZoomDragStart(e, zoomedImage) {
  e.preventDefault();
  let clickX = e.clientX;
  let clickY = e.clientY;
  const updatePosition = (moveEvt) => {
    let moveX = moveEvt.clientX - clickX;
    let moveY = moveEvt.clientY - clickY;
    zoomedImage.style.left = `${zoomedImage.offsetLeft + moveX}px`;
    zoomedImage.style.top = `${zoomedImage.offsetTop + moveY}px`;
    clickX = moveEvt.clientX;
    clickY = moveEvt.clientY;
  };
  document.addEventListener("mousemove", updatePosition);
  document.addEventListener("mouseup", function listener() {
    document.removeEventListener("mousemove", updatePosition);
    document.removeEventListener("mouseup", listener);
  }, { once: true });
}

// src/menucall.ts
var import_obsidian5 = require("obsidian");
var path3 = __toESM(require("path"));
var import_child_process = require("child_process");
var import_fs3 = require("fs");
function handleLinkClick(plugin, event, url) {
  var _a;
  const menu = new import_obsidian5.Menu();
  const inPreview = ((_a = plugin.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView)) == null ? void 0 : _a.getMode()) == "preview";
  if (inPreview) {
    addEagleImageMenuPreviewMode(plugin, menu, url, event);
  } else {
    addEagleImageMenuSourceMode(plugin, menu, url, event);
  }
  registerEscapeButton(plugin, menu);
  let offset = 0;
  menu.showAtPosition({ x: event.pageX, y: event.pageY + offset });
}
function eagleImageContextMenuCall(event) {
  var _a, _b, _c;
  const img = event.target;
  const inTable = img.closest("table") != null;
  const inCallout = img.closest(".callout") != null;
  if (img.id == "af-zoomed-image")
    return;
  if (!img.src.startsWith("http"))
    return;
  event.preventDefault();
  event.stopPropagation();
  (_b = (_a = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView)) == null ? void 0 : _a.editor) == null ? void 0 : _b.blur();
  img.classList.remove("image-ready-click-view", "image-ready-resize");
  const url = img.src;
  const menu = new import_obsidian5.Menu();
  const inPreview = ((_c = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView)) == null ? void 0 : _c.getMode()) == "preview";
  if (inPreview) {
    addEagleImageMenuPreviewMode(this, menu, url, event);
  } else {
    addEagleImageMenuSourceMode(this, menu, url, event);
  }
  registerEscapeButton(this, menu);
  let offset = 0;
  if (!inPreview && (inTable || inCallout))
    offset = -138;
  menu.showAtPosition({ x: event.pageX, y: event.pageY + offset });
}
function registerEscapeButton(plugin, menu, document2 = activeDocument) {
  menu.register(
    onElement(
      document2,
      "keydown",
      "*",
      (e) => {
        if (e.key === "Escape") {
          e.preventDefault();
          e.stopPropagation();
          menu.hide();
        }
      }
    )
  );
}
async function addEagleImageMenuPreviewMode(plugin, menu, oburl, event) {
  const imageInfo = await fetchImageInfo(oburl);
  if (imageInfo) {
    const { id, name, ext, annotation, tags, url } = imageInfo;
    menu.addItem(
      (item) => item.setIcon("file-symlink").setTitle("Open in obsidian").onClick(async (event2) => {
        const openMethod = plugin.settings.openInObsidian || "newPage";
        if (openMethod === "newPage") {
          window.open(oburl, "_blank");
        } else if (openMethod === "popup") {
          const leaf = plugin.app.workspace.getLeaf("window");
          await leaf.setViewState({
            type: "webviewer",
            state: {
              url: oburl,
              navigate: true
            },
            active: true
          });
        } else if (openMethod === "rightPane") {
          const leaf = plugin.app.workspace.getLeaf("split", "vertical");
          await leaf.setViewState({
            type: "webviewer",
            state: {
              url: oburl,
              navigate: true
            },
            active: true
          });
        }
      })
    );
    menu.addItem(
      (item) => item.setIcon("file-symlink").setTitle("Open in eagle").onClick(() => {
        const eagleLink = `eagle://item/${id}`;
        navigator.clipboard.writeText(eagleLink);
        window.open(eagleLink, "_self");
      })
    );
    menu.addItem(
      (item) => item.setIcon("square-arrow-out-up-right").setTitle("Open in the default app").onClick(() => {
        const libraryPath = plugin.settings.libraryPath;
        const localFilePath = path3.join(
          libraryPath,
          "images",
          `${id}.info`,
          `${name}.${ext}`
        );
        new import_obsidian5.Notice(`File real path: ${localFilePath}`);
        const child = (0, import_child_process.spawn)("explorer.exe", [localFilePath], { shell: true });
        child.on("error", (error) => {
          print("Error opening file:", error);
          new import_obsidian5.Notice("Cannot open the file, please check if the path is correct");
        });
        child.on("exit", (code) => {
          if (code === 0) {
            print("The file has been opened successfully");
          } else {
            print(`The file cannot be opened normally, exit code: ${code}`);
          }
        });
      })
    );
    menu.addItem(
      (item) => item.setIcon("external-link").setTitle("Open in other apps").onClick(() => {
        const libraryPath = plugin.settings.libraryPath;
        const localFilePath = path3.join(
          libraryPath,
          "images",
          `${id}.info`,
          `${name}.${ext}`
        );
        new import_obsidian5.Notice(`File real path: ${localFilePath}`);
        const child = (0, import_child_process.spawn)("rundll32", ["shell32.dll,OpenAs_RunDLL", localFilePath], { shell: true });
        child.on("error", (error) => {
          print("Error opening file:", error);
          new import_obsidian5.Notice("Cannot open the file, please check if the path is correct");
        });
        child.on("exit", (code) => {
          if (code === 0) {
            print("The file has been opened successfully");
          } else {
            print(`The file cannot be opened normally, exit code: ${code}`);
          }
        });
      })
    );
    menu.addItem(
      (item) => item.setIcon("copy").setTitle("Copy source file").onClick(() => {
        const libraryPath = plugin.settings.libraryPath;
        const localFilePath = path3.join(
          libraryPath,
          "images",
          `${id}.info`,
          `${name}.${ext}`
        );
        try {
          copyFileToClipboardCMD(localFilePath);
          new import_obsidian5.Notice("Copied to clipboard!", 3e3);
        } catch (error) {
          console.error(error);
          new import_obsidian5.Notice("Failed to copy the file!", 3e3);
        }
      })
    );
    menu.addItem(
      (item) => item.setIcon("case-sensitive").setTitle(`Eagle Name: ${name}`).onClick(() => {
        navigator.clipboard.writeText(name);
        new import_obsidian5.Notice(`Copied: ${name}`);
      })
    );
    menu.addItem(
      (item) => item.setIcon("letter-text").setTitle(`Eagle Annotation: ${annotation}`).onClick(() => {
        navigator.clipboard.writeText(annotation);
        new import_obsidian5.Notice(`Copied: ${annotation}`);
      })
    );
    menu.addItem(
      (item) => item.setIcon("link-2").setTitle(`Eagle url: ${url}`).onClick(() => {
        window.open(url, "_self");
        new import_obsidian5.Notice(`Copied: ${url}`);
      })
    );
    const tagsArray = Array.isArray(tags) ? tags : tags.split(",").map((tag) => tag.trim());
    menu.addItem(
      (item) => item.setIcon("tags").setTitle(`Eagle tag: ${tagsArray.join(", ")}`).onClick(() => {
        const tagsString = tagsArray.join(", ");
        navigator.clipboard.writeText(tagsString).then(() => new import_obsidian5.Notice(`Copied: ${tagsString}`)).catch((err) => new import_obsidian5.Notice("Failed to copy tags"));
      })
    );
    menu.addItem(
      (item) => item.setIcon("wrench").setTitle("Modify properties").onClick(() => {
        new ModifyPropertiesModal(this.app, id, name, annotation, url, tagsArray, (newId, newName, newAnnotation, newUrl, newTags) => {
        }).open();
      })
    );
  }
  menu.showAtPosition({ x: event.pageX, y: event.pageY });
}
async function addEagleImageMenuSourceMode(plugin, menu, url, event) {
  await addEagleImageMenuPreviewMode(plugin, menu, url, event);
  menu.addItem(
    (item) => item.setIcon("copy").setTitle("Copy markdown link").onClick(async () => {
      var _a;
      const editor = (_a = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView)) == null ? void 0 : _a.editor;
      if (!editor) {
        new import_obsidian5.Notice("Cannot find the active editor");
        return;
      }
      const doc = editor.getDoc();
      const lineCount = doc.lineCount();
      let linkFound = false;
      for (let line = 0; line < lineCount; line++) {
        const lineText = doc.getLine(line);
        const regex = new RegExp(`(!?\\[.*?\\]\\(${url}\\))`, "g");
        const match = regex.exec(lineText);
        if (match) {
          const linkText = match[1];
          navigator.clipboard.writeText(linkText);
          new import_obsidian5.Notice("Link copied");
          linkFound = true;
          break;
        }
      }
      if (!linkFound) {
        new import_obsidian5.Notice("Cannot find the link");
      }
    })
  );
  menu.addItem(
    (item) => item.setIcon("trash-2").setTitle("Clear markdown link").onClick(() => {
      var _a;
      try {
        const target = getMouseEventTarget(event);
        const editor = (_a = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView)) == null ? void 0 : _a.editor;
        const editorView = editor.cm;
        const target_pos = editorView.posAtDOM(target);
        deleteCurTargetLink(url, plugin, target_pos);
      } catch (e) {
        new import_obsidian5.Notice("Error, could not clear the file!");
      }
    })
  );
  menu.showAtPosition({ x: event.pageX, y: event.pageY });
}
var ModifyPropertiesModal = class extends import_obsidian5.Modal {
  constructor(app, id, name, annotation, url, tags, onSubmit) {
    super(app);
    this.id = id;
    this.name = name;
    this.annotation = annotation;
    this.url = url;
    this.tags = tags;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Modify Properties" });
    new import_obsidian5.Setting(contentEl).setName("Annotation").addText(
      (text) => text.setValue(this.annotation).onChange((value) => {
        this.annotation = value;
      }).inputEl.style.width = "400px"
    );
    new import_obsidian5.Setting(contentEl).setName("URL").addText(
      (text) => text.setValue(this.url).onChange((value) => {
        this.url = value;
      }).inputEl.style.width = "400px"
    );
    new import_obsidian5.Setting(contentEl).setName("Tags").setDesc("Separate tags use ,").addText(
      (text) => text.setValue(this.tags.join(", ")).onChange((value) => {
        this.tags = value.split(",").map((tag) => tag.trim());
      }).inputEl.style.width = "400px"
    );
    new import_obsidian5.Setting(contentEl).addButton((btn) => btn.setButtonText("Save").setCta().onClick(() => {
      const data = {
        id: this.id,
        // name: this.name,
        tags: this.tags,
        annotation: this.annotation,
        url: this.url
      };
      const requestOptions = {
        method: "POST",
        body: JSON.stringify(data),
        redirect: "follow"
      };
      fetch("http://localhost:41595/api/item/update", requestOptions).then((response) => response.json()).then((result) => {
        print(result);
        new import_obsidian5.Notice("Data uploaded successfully");
      }).catch((error) => {
        print("error", error);
        new import_obsidian5.Notice("Failed to upload data");
      });
      this.onSubmit(this.id, this.name, this.annotation, this.url, this.tags);
      this.close();
    }));
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
function copyFileToClipboardCMD(filePath) {
  if (!(0, import_fs3.existsSync)(filePath)) {
    console.error(`File ${filePath} does not exist`);
    return;
  }
  const callback = (error, stdout, stderr) => {
    if (error) {
      new import_obsidian5.Notice(`Error executing command: ${error.message}`, 3e3);
      console.error(`Error executing command: ${error.message}`);
      return;
    }
  };
  if (process.platform === "darwin") {
    (0, import_child_process.execSync)(`open -R "${filePath}"`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "c" using command down'`);
    (0, import_child_process.execSync)(`osascript -e 'tell application "System Events" to keystroke "w" using command down'`);
    (0, import_child_process.execSync)(`open -a "Obsidian.app"`);
  } else if (process.platform === "linux") {
  } else if (process.platform === "win32") {
    let safeFilePath = filePath.replace(/'/g, "''");
    (0, import_child_process.exec)(`powershell -command "Set-Clipboard -Path '${safeFilePath}'"`, callback);
  }
}
async function fetchImageInfo(url) {
  const match = url.match(/\/images\/(.*)\.info/);
  if (match && match[1]) {
    const requestOptions = {
      method: "GET",
      redirect: "follow"
    };
    try {
      const response = await fetch(`http://localhost:41595/api/item/info?id=${match[1]}`, requestOptions);
      const result = await response.json();
      if (result.status === "success" && result.data) {
        return result.data;
      } else {
        print("Failed to fetch item info");
      }
    } catch (error) {
      print("Error fetching item info", error);
    }
  } else {
    print("Invalid image source format");
  }
  return null;
}
var getMouseEventTarget = (event) => {
  event.preventDefault();
  const target = event.target;
  return target;
};
function deleteCurTargetLink(url, plugin, target_pos) {
  const activeView = plugin.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
  if (!activeView) {
    new import_obsidian5.Notice("\u65E0\u6CD5\u83B7\u53D6\u6D3B\u52A8\u89C6\u56FE\uFF01", 3e3);
    return;
  }
  const editor = activeView.editor;
  const editorView = editor.cm;
  const target_line = editorView.state.doc.lineAt(target_pos);
  const line_text = target_line.text;
  const target = editorView.domAtPos(target_pos).node;
  const inTable = !!target.closest("table");
  const inCallout = !!target.closest(".callout");
  if (!inTable && !inCallout) {
    const finds = findLinkInLine(url, line_text);
    if (finds.length === 0) {
      new import_obsidian5.Notice("\u65E0\u6CD5\u627E\u5230\u94FE\u63A5\u6587\u672C\uFF0C\u8BF7\u624B\u52A8\u5220\u9664\uFF01", 3e3);
      return;
    } else if (finds.length !== 1) {
      new import_obsidian5.Notice("\u5F53\u524D\u884C\u4E2D\u53D1\u73B0\u591A\u4E2A\u76F8\u540C\u7684\u94FE\u63A5\uFF0C\u8BF7\u624B\u52A8\u5220\u9664\uFF01", 3e3);
      return;
    } else {
      editor.replaceRange(
        "",
        { line: target_line.number - 1, ch: finds[0][0] },
        { line: target_line.number - 1, ch: finds[0][1] }
      );
      return;
    }
  }
  const startReg = {
    "table": /^\s*\|/,
    "callout": /^>/
  };
  const mode = inTable ? "table" : "callout";
  let finds_lines = [];
  let finds_all = [];
  for (let i = target_line.number; i <= editor.lineCount(); i++) {
    const line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    const finds = findLinkInLine(url, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  for (let i = target_line.number - 1; i >= 1; i--) {
    const line_text2 = editor.getLine(i - 1);
    if (!startReg[mode].test(line_text2))
      break;
    const finds = findLinkInLine(url, line_text2);
    if (finds.length > 0) {
      finds_lines.push(...new Array(finds.length).fill(i));
      finds_all.push(...finds);
    }
  }
  if (finds_all.length === 0) {
    new import_obsidian5.Notice(`\u65E0\u6CD5\u5728${mode}\u4E2D\u627E\u5230\u94FE\u63A5\u6587\u672C\uFF0C\u8BF7\u624B\u52A8\u5220\u9664\uFF01`, 3e3);
    return;
  } else if (finds_all.length !== 1) {
    new import_obsidian5.Notice(`\u5728${mode}\u4E2D\u627E\u5230\u591A\u4E2A\u76F8\u540C\u7684\u94FE\u63A5\uFF0C\u8BF7\u624B\u52A8\u5220\u9664\uFF01`, 3e3);
    return;
  } else {
    editor.replaceRange(
      "",
      { line: finds_lines[0] - 1, ch: finds_all[0][0] },
      { line: finds_lines[0] - 1, ch: finds_all[0][1] }
    );
  }
  editor.focus();
}
function findLinkInLine(url, line) {
  const results = [];
  const regex = new RegExp(`(!?\\[[^\\]]*\\]\\(${escapeRegExp(url)}[^)]*\\))`, "g");
  let match;
  while ((match = regex.exec(line)) !== null) {
    results.push([match.index, match.index + match[0].length]);
  }
  return results;
}
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
}

// src/embed.ts
function isURL(str) {
  let url;
  try {
    url = new URL(str);
  } catch (e) {
    return false;
  }
  return url.protocol === "http:" || url.protocol === "https:";
}
function isLocalHostLink(str) {
  try {
    const url = new URL(str);
    return url.hostname === "localhost" || url.hostname === "127.0.0.1";
  } catch (e) {
    return false;
  }
}
function isAltTextImage(alt) {
  const mainPart = alt.split("|")[0].trim();
  return /\.(jpg|jpeg|png|gif|webp|svg|avif|bmp|ico)$/i.test(mainPart);
}
var LocalHostEmbedder = class {
  // 
  create(src) {
    const container = document.createElement("div");
    container.className = "eagle-embed-container";
    const iframe = document.createElement("iframe");
    iframe.src = src;
    iframe.width = "100%";
    iframe.height = "500px";
    iframe.style.border = "none";
    iframe.setAttribute("allowfullscreen", "true");
    iframe.setAttribute("loading", "lazy");
    container.appendChild(iframe);
    return {
      containerEl: container,
      iframeEl: iframe
    };
  }
  // 
  shouldEmbed(src, alt) {
    if (alt && isAltTextImage(alt)) {
      console.log(`[Eagle-Embed] \u8DF3\u8FC7\u56FE\u7247\u5D4C\u5165: ${alt}, URL: ${src}`);
      return false;
    }
    return isLocalHostLink(src);
  }
};
var embedManager = new LocalHostEmbedder();

// src/embed-state-field.ts
var import_language = require("@codemirror/language");
var import_state = require("@codemirror/state");
var import_view2 = require("@codemirror/view");
var import_obsidian6 = require("obsidian");

// src/embed-widget.ts
var import_view = require("@codemirror/view");
var EmbedWidget = class extends import_view.WidgetType {
  constructor(url, alt = "") {
    super();
    this.container = null;
    this.url = url;
    this.alt = alt;
  }
  eq(other) {
    return other.url === this.url && other.alt === this.alt;
  }
  toDOM() {
    if (this.container) {
      return this.container;
    }
    this.container = document.createElement("div");
    this.container.className = "eagle-embed-container cm-embed-block";
    try {
      if (embedManager.shouldEmbed(this.url)) {
        const result = embedManager.create(this.url);
        this.container = result.containerEl;
        this.container.classList.add("cm-embed-block");
        this.container.classList.add("cm-embed-block");
        setTimeout(() => {
          if (this.container && this.container.parentElement) {
            const prevSibling = this.container.previousSibling;
            if (prevSibling && prevSibling.nodeName === "IMG") {
              const imgElement = prevSibling;
              imgElement.classList.add("auto-embed-hide-display");
            }
          }
        }, 0);
        if (result.iframeEl) {
          const iframe = result.iframeEl;
          iframe.onerror = () => {
            this.showError(`\u52A0\u8F7D\u5931\u8D25: ${this.url}`);
          };
          iframe.onload = () => {
          };
        }
      } else {
        this.container.classList.add("eagle-embed-placeholder");
        this.container.textContent = `\u4E0D\u652F\u6301\u7684\u5D4C\u5165\u5185\u5BB9: ${this.url.substring(0, 50)}...`;
      }
    } catch (error) {
      this.showError(`\u5904\u7406\u5D4C\u5165\u65F6\u51FA\u9519: ${error}`);
    }
    return this.container;
  }
  // 
  showError(message) {
    if (!this.container)
      return;
    this.container.innerHTML = "";
    this.container.classList.add("eagle-embed-error");
    this.container.textContent = message;
  }
  ignoreEvent() {
    return false;
  }
};

// src/embed-state-field.ts
var formattingImageMarkerRegex = /formatting_formatting-image_image_image-marker(?:_list-\d*)?$/;
var stringUrlRegex = /^(?:list-\d*_)?string_url$/;
function debugLog(message, ...args) {
}
var embedField = import_state.StateField.define({
  create() {
    return import_view2.Decoration.none;
  },
  update(oldState, transaction) {
    const builder = new import_state.RangeSetBuilder();
    if (!transaction.state.field(import_obsidian6.editorLivePreviewField, false)) {
      return builder.finish();
    }
    let altTextStartPos = null;
    (0, import_language.syntaxTree)(transaction.state).iterate({
      enter(node) {
        debugLog(`\u8282\u70B9\u7C7B\u578B: ${node.type.name}`);
        if (formattingImageMarkerRegex.test(node.type.name)) {
          altTextStartPos = node.to + 1;
        } else if (stringUrlRegex.test(node.type.name)) {
          if (altTextStartPos === null) {
            return;
          }
          const url = transaction.state.sliceDoc(node.from, node.to);
          const alt = transaction.state.sliceDoc(altTextStartPos, node.from - 2);
          altTextStartPos = null;
          if (!isURL(url)) {
            return;
          }
          if (isAltTextImage(alt)) {
            return;
          }
          if (!isLocalHostLink(url) || isAltTextImage(url)) {
            return;
          }
          if (!embedManager.shouldEmbed(url)) {
            return;
          }
          const replaceFrom = node.to + 1;
          builder.add(
            replaceFrom,
            replaceFrom,
            import_view2.Decoration.replace({
              widget: new EmbedWidget(url, alt),
              block: true
            })
          );
        }
      }
    });
    return builder.finish();
  },
  provide(field) {
    return import_view2.EditorView.decorations.from(field);
  }
});

// src/main.ts
var DEBUG = false;
var print = (message, ...optionalParams) => {
  if (DEBUG) {
    console.log(message, ...optionalParams);
  }
};
function setDebug6(value) {
  DEBUG = value;
}
var MyPlugin = class extends import_obsidian7.Plugin {
  async onload() {
    console.log("\u52A0\u8F7D Eagle-Embed \u63D2\u4EF6");
    await this.loadSettings();
    this.registerEditorExtension([embedField]);
    this.registerMarkdownPostProcessor((el, ctx) => {
      const images = el.querySelectorAll("img");
      images.forEach((image) => {
        if (embedManager.shouldEmbed(image.src)) {
          print(`MarkdownPostProcessor \u627E\u5230\u53EF\u5D4C\u5165\u56FE\u50CF: ${image.src}`);
          this.handleImage(image);
        }
      });
    });
    this.registerDocument(document);
    this.app.workspace.on("window-open", (workspaceWindow, window2) => {
      this.registerDocument(window2.document);
    });
    startServer(this.settings.libraryPath, this.settings.port);
    this.addSettingTab(new SampleSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("editor-paste", (clipboard2, editor) => {
        handlePasteEvent(clipboard2, editor, this.settings.port, this);
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-drop", (event, editor) => {
        handleDropEvent(event, editor, this.settings.port, this);
      })
    );
    setDebug6(this.settings.debug);
    this.registerDomEvent(document, "click", async (event) => {
      const target = event.target;
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian7.MarkdownView);
      if (!activeView) {
        print("Cannot find the active view");
        return;
      }
      const inPreview = activeView.getMode() === "preview";
      let url = null;
      if (inPreview) {
        if (!target.matches("a.external-link")) {
          return;
        }
        const linkElement = target;
        if (linkElement && linkElement.href) {
          url = linkElement.href;
          print(`Preview mode link: ${url}`);
        }
      } else {
        if (!target.matches("span.external-link, .cm-link, a.cm-underline")) {
          return;
        }
        const editor = activeView.editor;
        const cursor = editor.getCursor();
        const lineText = editor.getLine(cursor.line);
        const urlMatches = Array.from(lineText.matchAll(/\bhttps?:\/\/[^\s)]+/g));
        print(urlMatches);
        let closestUrl = null;
        let minDistance = Infinity;
        const cursorPos = cursor.ch;
        print(cursorPos);
        for (let i = 0; i < urlMatches.length; i++) {
          const match = urlMatches[i];
          const end = (match.index || 0) + match[0].length + 1;
          if (cursorPos <= end) {
            closestUrl = match[0];
            print(`Cursor is in the link interval: ${i + 1}`);
            break;
          }
        }
        if (closestUrl) {
          url = closestUrl;
          print(`Edit mode link: ${url}`);
        }
      }
      if (url && url.match(/^http:\/\/localhost:\d+\/images\/[^.]+\.info$/)) {
        event.preventDefault();
        event.stopPropagation();
        print(`Prevented link: ${url}`);
        handleLinkClick(this, event, url);
      } else {
        return;
      }
    }, { capture: true });
    this.registerDomEvent(document, "click", async (evt) => {
      if (!this.settings.clickView)
        return;
      handleImageClick(evt, this.settings.adaptiveRatio);
    });
    this.registerDomEvent(document, "keydown", (evt) => {
      if (evt.key === "Escape") {
        removeZoomedImage();
      }
    });
    addCommandSynchronizedPageTabs(this);
    addCommandEagleJump(this);
    const style = document.createElement("style");
    style.textContent = `
			.menu-item {
				max-width: 800px; /* \u8BBE\u7F6E\u6700\u5927\u5BBD\u5EA6 */
				white-space: normal; /* \u5141\u8BB8\u6362\u884C */
				word-wrap: break-word; /* \u81EA\u52A8\u6362\u884C */
			}
			
			.eagle-embed-hide {
				display: none !important;
			}
			
			.eagle-embed-container {
				margin: 10px 0;
				border-radius: 5px;
				overflow: hidden;
				background: var(--background-primary);
				border: 1px solid var(--background-modifier-border);
				width: 100%;
			}
			
			.eagle-embed-container iframe {
				display: block;
				width: 100%;
				height: 500px;
				border: none;
			}
			
			/* \u7F16\u8F91\u6A21\u5F0F\u6837\u5F0F */
			.cm-embed-block {
				margin: 0.5em 0;
				width: 100%;
			}
			
			/* \u5360\u4F4D\u7B26\u6837\u5F0F */
			.eagle-embed-placeholder {
				background: var(--background-secondary);
				border-radius: 5px;
				padding: 1em;
				text-align: center;
				margin: 0.5em 0;
			}
			
			/* \u9519\u8BEF\u6837\u5F0F */
			.eagle-embed-error {
				background: rgba(255, 0, 0, 0.1);
				border: 1px solid rgba(255, 0, 0, 0.3);
				color: #ff0000;
				padding: 1em;
				text-align: center;
				margin: 0.5em 0;
				border-radius: 5px;
			}
		`;
    document.head.appendChild(style);
  }
  onunload() {
    stopServer();
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.updateLibraryPath();
  }
  async updateLibraryPath() {
    for (const path4 of this.settings.libraryPaths) {
      if ((0, import_fs4.existsSync)(path4)) {
        this.settings.libraryPath = path4;
        break;
      }
    }
    await this.saveSettings();
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // 
  registerDocument(document2) {
    this.register(
      onElement(
        document2,
        "contextmenu",
        "img",
        eagleImageContextMenuCall.bind(this),
        { capture: true }
      )
    );
  }
  handleImage(img) {
    try {
      const alt = img.alt || "";
      const src = img.src;
      if (/noembed/i.test(alt)) {
        img.alt = alt.replace(/noembed/i, "").trim();
        return null;
      }
      if (isAltTextImage(alt)) {
        return null;
      }
      if (!isURL(src) || !embedManager.shouldEmbed(src, alt)) {
        return null;
      }
      const embedResult = embedManager.create(src);
      const container = embedResult.containerEl;
      if (!img.parentElement) {
        return null;
      }
      img.parentElement.replaceChild(container, img);
      return container;
    } catch (error) {
      console.error("\u5904\u7406\u56FE\u50CF\u65F6\u51FA\u9519:", error);
      return null;
    }
  }
};
/*! Bundled license information:

chokidar/esm/index.js:
  (*! chokidar - MIT License (c) 2012 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NlcnZlci50cyIsICJub2RlX21vZHVsZXMvY2hva2lkYXIvZXNtL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9yZWFkZGlycC9lc20vaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2Nob2tpZGFyL2VzbS9oYW5kbGVyLmpzIiwgInNyYy91cmxIYW5kbGVyLnRzIiwgInNyYy9vbkVsZW1lbnQudHMiLCAic3JjL3N5bmNocm9uaXplZHBhZ2V0YWJzLnRzIiwgInNyYy9lYWdsZWp1bXBvYnNpZGlhbi50cyIsICJzcmMvYWRkQ29tbWFuZC1jb25maWcudHMiLCAic3JjL3NldHRpbmcudHMiLCAic3JjL0xlZnRjbGlja2ltYWdlLnRzIiwgInNyYy9tZW51Y2FsbC50cyIsICJzcmMvZW1iZWQudHMiLCAic3JjL2VtYmVkLXN0YXRlLWZpZWxkLnRzIiwgInNyYy9lbWJlZC13aWRnZXQudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1lbnUsTWVudUl0ZW0sQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBTZXR0aW5nLFRGaWxlLCBQbGF0Zm9ybSwgRmlsZVN0YXRzIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBzdGFydFNlcnZlciwgcmVmcmVzaFNlcnZlciwgc3RvcFNlcnZlciB9IGZyb20gJy4vc2VydmVyJztcclxuaW1wb3J0IHsgaGFuZGxlUGFzdGVFdmVudCwgaGFuZGxlRHJvcEV2ZW50IH0gZnJvbSAnLi91cmxIYW5kbGVyJztcclxuaW1wb3J0IHsgb25FbGVtZW50IH0gZnJvbSAnLi9vbkVsZW1lbnQnO1xyXG5pbXBvcnQgeyBleGVjLCBzcGF3biwgZXhlY1N5bmMgfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgYWRkQ29tbWFuZFN5bmNocm9uaXplZFBhZ2VUYWJzLGFkZENvbW1hbmRFYWdsZUp1bXAgfSBmcm9tIFwiLi9hZGRDb21tYW5kLWNvbmZpZ1wiO1xyXG5pbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnZnMnO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTLCBTYW1wbGVTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5nJztcclxuaW1wb3J0IHsgaGFuZGxlSW1hZ2VDbGljaywgcmVtb3ZlWm9vbWVkSW1hZ2UgfSBmcm9tICcuL0xlZnRjbGlja2ltYWdlJztcclxuaW1wb3J0IHsgaGFuZGxlTGlua0NsaWNrLCBlYWdsZUltYWdlQ29udGV4dE1lbnVDYWxsLCByZWdpc3RlckVzY2FwZUJ1dHRvbiwgYWRkRWFnbGVJbWFnZU1lbnVTb3VyY2VNb2RlLCBhZGRFYWdsZUltYWdlTWVudVByZXZpZXdNb2RlLCBmZXRjaEltYWdlSW5mbyB9IGZyb20gJy4vbWVudWNhbGwnO1xyXG5pbXBvcnQgeyBpc0FsdFRleHRJbWFnZSwgaXNVUkwsIGlzTG9jYWxIb3N0TGlua30gZnJvbSAnLi9lbWJlZCc7XHJcbmltcG9ydCB7IGVtYmVkTWFuYWdlciB9IGZyb20gJy4vZW1iZWQnO1xyXG5pbXBvcnQgeyBlbWJlZEZpZWxkIH0gZnJvbSAnLi9lbWJlZC1zdGF0ZS1maWVsZCc7XHJcbmltcG9ydCB7IEV4dGVuc2lvbiB9IGZyb20gXCJAY29kZW1pcnJvci9zdGF0ZVwiO1xyXG5cclxuXHJcbmxldCBERUJVRyA9IGZhbHNlO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByaW50ID0gKG1lc3NhZ2U/OiBhbnksIC4uLm9wdGlvbmFsUGFyYW1zOiBhbnlbXSkgPT4ge1xyXG5cdC8vIGNvbnNvbGUubG9nKCdERUJVRyBzdGF0dXM6JywgREVCVUcpOyAvLyBcdThDMDNcdThCRDVcdThGOTNcdTUxRkFcclxuXHRpZiAoREVCVUcpIHtcclxuXHRcdGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXREZWJ1Zyh2YWx1ZTogYm9vbGVhbikge1xyXG5cdERFQlVHID0gdmFsdWU7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ1x1NTJBMFx1OEY3RCBFYWdsZS1FbWJlZCBcdTYzRDJcdTRFRjYnKTtcclxuXHRcdFxyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdFxyXG5cdFx0Ly8gXHU2Q0U4XHU1MThDXHU3RjE2XHU4RjkxXHU1NjY4XHU2MjY5XHU1QzU1XHVGRjBDXHU1MkExXHU1RkM1XHU2QjYzXHU3ODZFXHU1QkZDXHU1MTY1XHU1NDhDXHU2Q0U4XHU1MThDXHJcblx0XHR0aGlzLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKFtlbWJlZEZpZWxkXSk7XHJcblx0XHRcclxuXHRcdC8vIFx1NTkwNFx1NzQwNlx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlxyXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duUG9zdFByb2Nlc3NvcigoZWwsIGN0eCkgPT4ge1xyXG5cdFx0XHRjb25zdCBpbWFnZXMgPSBlbC5xdWVyeVNlbGVjdG9yQWxsKCdpbWcnKTtcclxuXHRcdFx0aW1hZ2VzLmZvckVhY2goKGltYWdlKSA9PiB7XHJcblx0XHRcdFx0aWYgKGVtYmVkTWFuYWdlci5zaG91bGRFbWJlZChpbWFnZS5zcmMpKSB7XHJcblx0XHRcdFx0XHRwcmludChgTWFya2Rvd25Qb3N0UHJvY2Vzc29yIFx1NjI3RVx1NTIzMFx1NTNFRlx1NUQ0Q1x1NTE2NVx1NTZGRVx1NTBDRjogJHtpbWFnZS5zcmN9YCk7XHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZUltYWdlKGltYWdlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIFx1NkNFOFx1NTE4Q1x1NTkxNlx1OTBFOFx1NjU4N1x1NEVGNlx1NjUyRlx1NjMwMVxyXG5cdFx0Ly8gXHU2Q0U4XHU1MThDXHU1NkZFXHU3MjQ3XHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XHU0RThCXHU0RUY2XHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9jdW1lbnQoZG9jdW1lbnQpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKFwid2luZG93LW9wZW5cIiwgKHdvcmtzcGFjZVdpbmRvdywgd2luZG93KSA9PiB7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJEb2N1bWVudCh3aW5kb3cuZG9jdW1lbnQpO1xyXG5cdFx0fSk7XHJcblx0XHQvLyBcdTU3MjhcdTYzRDJcdTRFRjZcdTUyQTBcdThGN0RcdTY1RjZcdTU0MkZcdTUyQThcdTY3MERcdTUyQTFcdTU2NjhcclxuXHRcdHN0YXJ0U2VydmVyKHRoaXMuc2V0dGluZ3MubGlicmFyeVBhdGgsIHRoaXMuc2V0dGluZ3MucG9ydCk7XHJcblx0XHQvLyBcdTZERkJcdTUyQTBcdThCQkVcdTdGNkVcdTk3NjJcdTY3N0ZcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2FtcGxlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0Ly8gYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdC8vIFx1NkNFOFx1NTE4Q1x1N0M5OFx1OEQzNFx1NEU4Qlx1NEVGNlxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1wYXN0ZScsIChjbGlwYm9hcmQ6IENsaXBib2FyZEV2ZW50LCBlZGl0b3I6IEVkaXRvcikgPT4ge1xyXG5cdFx0XHRcdGhhbmRsZVBhc3RlRXZlbnQoY2xpcGJvYXJkLCBlZGl0b3IsIHRoaXMuc2V0dGluZ3MucG9ydCwgdGhpcyk7XHJcblx0XHRcdH0pXHJcblx0XHQpO1xyXG5cdFx0Ly8gXHU2Q0U4XHU1MThDXHU2MkQ2XHU2MkZEXHU0RThCXHU0RUY2XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLWRyb3AnLCAoZXZlbnQ6IERyYWdFdmVudCwgZWRpdG9yOiBFZGl0b3IpID0+IHtcclxuXHRcdFx0XHRoYW5kbGVEcm9wRXZlbnQoZXZlbnQsIGVkaXRvciwgdGhpcy5zZXR0aW5ncy5wb3J0LCB0aGlzKTtcclxuXHRcdFx0fSlcclxuXHRcdCk7XHJcblx0XHQvLyBcdTU3MjhcdTYzRDJcdTRFRjZcdTUyQTBcdThGN0RcdTY1RjZcdThCQkVcdTdGNkUgREVCVUcgXHU3MkI2XHU2MDAxXHJcblx0XHQvLyBjb25zb2xlLmxvZygnRGVidWcgc2V0dGluZzonLCB0aGlzLnNldHRpbmdzLmRlYnVnKTtcclxuXHRcdHNldERlYnVnKHRoaXMuc2V0dGluZ3MuZGVidWcpO1xyXG5cclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJjbGlja1wiLCBhc3luYyAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdFx0aWYgKCFhY3RpdmVWaWV3KSB7XHJcblx0XHRcdFx0cHJpbnQoJ0Nhbm5vdCBmaW5kIHRoZSBhY3RpdmUgdmlldycpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgaW5QcmV2aWV3ID0gYWN0aXZlVmlldy5nZXRNb2RlKCkgPT09IFwicHJldmlld1wiO1xyXG5cdFx0XHRsZXQgdXJsOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcblx0XHRcdGlmIChpblByZXZpZXcpIHtcclxuXHRcdFx0XHRpZiAoIXRhcmdldC5tYXRjaGVzKFwiYS5leHRlcm5hbC1saW5rXCIpKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRjb25zdCBsaW5rRWxlbWVudCA9IHRhcmdldCBhcyBIVE1MQW5jaG9yRWxlbWVudDtcclxuXHRcdFx0XHRpZiAobGlua0VsZW1lbnQgJiYgbGlua0VsZW1lbnQuaHJlZikge1xyXG5cdFx0XHRcdFx0dXJsID0gbGlua0VsZW1lbnQuaHJlZjtcclxuXHRcdFx0XHRcdHByaW50KGBQcmV2aWV3IG1vZGUgbGluazogJHt1cmx9YCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICghdGFyZ2V0Lm1hdGNoZXMoXCJzcGFuLmV4dGVybmFsLWxpbmssIC5jbS1saW5rLCBhLmNtLXVuZGVybGluZVwiKSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XHJcblx0XHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVUZXh0ID0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpO1xyXG5cdFx0XHRcdGNvbnN0IHVybE1hdGNoZXMgPSBBcnJheS5mcm9tKGxpbmVUZXh0Lm1hdGNoQWxsKC9cXGJodHRwcz86XFwvXFwvW15cXHMpXSsvZykpO1xyXG5cdFx0XHRcdHByaW50KHVybE1hdGNoZXMpO1xyXG5cdFx0XHRcdGxldCBjbG9zZXN0VXJsID0gbnVsbDtcclxuXHRcdFx0XHRsZXQgbWluRGlzdGFuY2UgPSBJbmZpbml0eTtcclxuXHRcdFx0XHRjb25zdCBjdXJzb3JQb3MgPSBjdXJzb3IuY2g7XHJcblx0XHRcdFx0cHJpbnQoY3Vyc29yUG9zKTtcclxuXHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB1cmxNYXRjaGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0XHRjb25zdCBtYXRjaCA9IHVybE1hdGNoZXNbaV07XHJcblx0XHRcdFx0XHRjb25zdCBlbmQgPSAobWF0Y2guaW5kZXggfHwgMCkgKyBtYXRjaFswXS5sZW5ndGggKyAxO1xyXG5cdFx0XHRcdFx0aWYgKGN1cnNvclBvcyA8PSBlbmQpIHtcclxuXHRcdFx0XHRcdFx0Y2xvc2VzdFVybCA9IG1hdGNoWzBdO1xyXG5cdFx0XHRcdFx0XHRwcmludChgQ3Vyc29yIGlzIGluIHRoZSBsaW5rIGludGVydmFsOiAke2kgKyAxfWApO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChjbG9zZXN0VXJsKSB7XHJcblx0XHRcdFx0XHR1cmwgPSBjbG9zZXN0VXJsO1xyXG5cdFx0XHRcdFx0cHJpbnQoYEVkaXQgbW9kZSBsaW5rOiAke3VybH1gKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh1cmwgJiYgdXJsLm1hdGNoKC9eaHR0cDpcXC9cXC9sb2NhbGhvc3Q6XFxkK1xcL2ltYWdlc1xcL1teLl0rXFwuaW5mbyQvKSkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cHJpbnQoYFByZXZlbnRlZCBsaW5rOiAke3VybH1gKTtcclxuXHRcdFx0XHRoYW5kbGVMaW5rQ2xpY2sodGhpcywgZXZlbnQsIHVybCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB7IGNhcHR1cmU6IHRydWUgfSk7XHJcblx0XHQvLyBcdTZDRThcdTUxOENcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjYoXHU1M0MyXHU4MDAzQXR0YWNoRmxvdylcclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xyXG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuY2xpY2tWaWV3KSByZXR1cm47XHJcblx0XHRcdGhhbmRsZUltYWdlQ2xpY2soZXZ0LCB0aGlzLnNldHRpbmdzLmFkYXB0aXZlUmF0aW8pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIChldnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuXHRcdFx0aWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcblx0XHRcdFx0cmVtb3ZlWm9vbWVkSW1hZ2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHQvLyByZWdpc3RlciBhbGwgY29tbWFuZHMgaW4gYWRkQ29tbWFuZCBmdW5jdGlvblxyXG5cdFx0YWRkQ29tbWFuZFN5bmNocm9uaXplZFBhZ2VUYWJzKHRoaXMpO1xyXG5cdFx0YWRkQ29tbWFuZEVhZ2xlSnVtcCh0aGlzKTtcclxuXHRcdC8vIFx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NjgzN1x1NUYwRlx1RkYwQ1x1Nzg2RVx1NEZERFx1NjgzN1x1NUYwRlx1NTMwNVx1NTQyQlx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NzI3OVx1NUI5QVx1NjgzN1x1NUYwRlxyXG5cdFx0Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG5cdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXHJcblx0XHRcdC5tZW51LWl0ZW0ge1xyXG5cdFx0XHRcdG1heC13aWR0aDogODAwcHg7IC8qIFx1OEJCRVx1N0Y2RVx1NjcwMFx1NTkyN1x1NUJCRFx1NUVBNiAqL1xyXG5cdFx0XHRcdHdoaXRlLXNwYWNlOiBub3JtYWw7IC8qIFx1NTE0MVx1OEJCOFx1NjM2Mlx1ODg0QyAqL1xyXG5cdFx0XHRcdHdvcmQtd3JhcDogYnJlYWstd29yZDsgLyogXHU4MUVBXHU1MkE4XHU2MzYyXHU4ODRDICovXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC5lYWdsZS1lbWJlZC1oaWRlIHtcclxuXHRcdFx0XHRkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC5lYWdsZS1lbWJlZC1jb250YWluZXIge1xyXG5cdFx0XHRcdG1hcmdpbjogMTBweCAwO1xyXG5cdFx0XHRcdGJvcmRlci1yYWRpdXM6IDVweDtcclxuXHRcdFx0XHRvdmVyZmxvdzogaGlkZGVuO1xyXG5cdFx0XHRcdGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XHJcblx0XHRcdFx0Ym9yZGVyOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xyXG5cdFx0XHRcdHdpZHRoOiAxMDAlO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQuZWFnbGUtZW1iZWQtY29udGFpbmVyIGlmcmFtZSB7XHJcblx0XHRcdFx0ZGlzcGxheTogYmxvY2s7XHJcblx0XHRcdFx0d2lkdGg6IDEwMCU7XHJcblx0XHRcdFx0aGVpZ2h0OiA1MDBweDtcclxuXHRcdFx0XHRib3JkZXI6IG5vbmU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8qIFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NjgzN1x1NUYwRiAqL1xyXG5cdFx0XHQuY20tZW1iZWQtYmxvY2sge1xyXG5cdFx0XHRcdG1hcmdpbjogMC41ZW0gMDtcclxuXHRcdFx0XHR3aWR0aDogMTAwJTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0LyogXHU1MzYwXHU0RjREXHU3QjI2XHU2ODM3XHU1RjBGICovXHJcblx0XHRcdC5lYWdsZS1lbWJlZC1wbGFjZWhvbGRlciB7XHJcblx0XHRcdFx0YmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xyXG5cdFx0XHRcdGJvcmRlci1yYWRpdXM6IDVweDtcclxuXHRcdFx0XHRwYWRkaW5nOiAxZW07XHJcblx0XHRcdFx0dGV4dC1hbGlnbjogY2VudGVyO1xyXG5cdFx0XHRcdG1hcmdpbjogMC41ZW0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0LyogXHU5NTE5XHU4QkVGXHU2ODM3XHU1RjBGICovXHJcblx0XHRcdC5lYWdsZS1lbWJlZC1lcnJvciB7XHJcblx0XHRcdFx0YmFja2dyb3VuZDogcmdiYSgyNTUsIDAsIDAsIDAuMSk7XHJcblx0XHRcdFx0Ym9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDAsIDAsIDAuMyk7XHJcblx0XHRcdFx0Y29sb3I6ICNmZjAwMDA7XHJcblx0XHRcdFx0cGFkZGluZzogMWVtO1xyXG5cdFx0XHRcdHRleHQtYWxpZ246IGNlbnRlcjtcclxuXHRcdFx0XHRtYXJnaW46IDAuNWVtIDA7XHJcblx0XHRcdFx0Ym9yZGVyLXJhZGl1czogNXB4O1xyXG5cdFx0XHR9XHJcblx0XHRgO1xyXG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XHJcblxyXG5cdH1cclxuXHRcclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBcdTU3MjhcdTYzRDJcdTRFRjZcdTUzNzhcdThGN0RcdTY1RjZcdTUwNUNcdTZCNjJcdTY3MERcdTUyQTFcdTU2NjhcclxuXHRcdHN0b3BTZXJ2ZXIoKTtcclxuXHRcdC8vIHRoaXMuYXBwLnZhdWx0LmdldFJlc291cmNlUGF0aCA9IHRoaXMub3JpZ2luYWxHZXRSZXNvdXJjZVBhdGg7XHJcblx0XHQvLyB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0ID0gdGhpcy5vcmlnaW5hbEdldEZpcnN0TGlua3BhdGhEZXN0O1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHR0aGlzLnVwZGF0ZUxpYnJhcnlQYXRoKCk7IC8vIFx1NjZGNFx1NjVCMExpYnJhcnkgUGF0aFxyXG5cdH1cclxuXHJcblx0YXN5bmMgdXBkYXRlTGlicmFyeVBhdGgoKSB7XHJcblx0XHRmb3IgKGNvbnN0IHBhdGggb2YgdGhpcy5zZXR0aW5ncy5saWJyYXJ5UGF0aHMpIHtcclxuXHRcdFx0aWYgKGV4aXN0c1N5bmMocGF0aCkpIHsgLy8gXHU2OEMwXHU2N0U1XHU4REVGXHU1Rjg0XHU2NjJGXHU1NDI2XHU1QjU4XHU1NzI4XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5saWJyYXJ5UGF0aCA9IHBhdGg7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxuXHQvLyBcdTZDRThcdTUxOENcdTU2RkVcdTcyNDdcdTUzRjNcdTk1MkVcdTgzRENcdTUzNTVcdTRFOEJcdTRFRjZcclxuXHRyZWdpc3RlckRvY3VtZW50KGRvY3VtZW50OiBEb2N1bWVudCkge1xyXG5cdFx0dGhpcy5yZWdpc3RlcihcclxuXHRcdFx0b25FbGVtZW50KFxyXG5cdFx0XHRcdGRvY3VtZW50LFxyXG5cdFx0XHRcdFwiY29udGV4dG1lbnVcIixcclxuXHRcdFx0XHRcImltZ1wiLFxyXG5cdFx0XHRcdGVhZ2xlSW1hZ2VDb250ZXh0TWVudUNhbGwuYmluZCh0aGlzKSxcclxuXHRcdFx0XHR7IGNhcHR1cmU6IHRydWUgfVxyXG5cdFx0XHQpXHJcblx0XHQpO1xyXG5cdH1cclxuXHRoYW5kbGVJbWFnZShpbWc6IEhUTUxJbWFnZUVsZW1lbnQpOiBIVE1MRWxlbWVudCB8IG51bGwge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgYWx0ID0gaW1nLmFsdCB8fCBcIlwiO1xyXG5cdFx0XHRjb25zdCBzcmMgPSBpbWcuc3JjO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gcHJpbnQoYFx1NTkwNFx1NzQwNlx1NTZGRVx1NTBDRjogJHtzcmN9IFx1NjZGRlx1NEVFM1x1NjU4N1x1NjcyQzogJHthbHR9YCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDkgbm9lbWJlZCBcdTY4MDdcdThCQjBcclxuXHRcdFx0aWYgKC9ub2VtYmVkL2kudGVzdChhbHQpKSB7XHJcblx0XHRcdFx0aW1nLmFsdCA9IGFsdC5yZXBsYWNlKC9ub2VtYmVkL2ksIFwiXCIpLnRyaW0oKTtcclxuXHRcdFx0XHQvLyBwcmludChcIlx1OERGM1x1OEZDN1x1NUQ0Q1x1NTE2NTogXHU1NkZFXHU1MENGXHU2ODA3XHU4QkIwXHU0RTNBbm9lbWJlZFwiKTtcclxuXHRcdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gXHU2OEMwXHU2N0U1YWx0XHU2NTg3XHU2NzJDXHU2NjJGXHU1NDI2XHU4ODY4XHU3OTNBXHU1NkZFXHU3MjQ3XHU3QzdCXHU1NzhCXHJcblx0XHRcdGlmIChpc0FsdFRleHRJbWFnZShhbHQpKSB7XHJcblx0XHRcdFx0Ly8gcHJpbnQoYFx1NjgzOVx1NjM2RWFsdFx1NjU4N1x1NjcyQ1x1OEJDNlx1NTIyQlx1NEUzQVx1NTZGRVx1NzI0N1x1RkYwQ1x1OERGM1x1OEZDNzogJHthbHR9YCk7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUU5NFx1OEJFNVx1NUQ0Q1x1NTE2NVxyXG5cdFx0XHRpZiAoIWlzVVJMKHNyYykgfHwgIWVtYmVkTWFuYWdlci5zaG91bGRFbWJlZChzcmMsIGFsdCkpIHtcclxuXHRcdFx0XHQvLyBwcmludChcIlx1OERGM1x1OEZDN1x1NUQ0Q1x1NTE2NTogXHU0RTBEXHU2NjJGXHU2NzA5XHU2NTQ4VVJMXHU2MjE2XHU0RTBEXHU1RTk0XHU1RDRDXHU1MTY1XCIpO1xyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBwcmludChgXHU1MjFCXHU1RUZBXHU1RDRDXHU1MTY1XHU1MTg1XHU1QkI5OiAke3NyY31gKTtcclxuXHRcdFx0Y29uc3QgZW1iZWRSZXN1bHQgPSBlbWJlZE1hbmFnZXIuY3JlYXRlKHNyYyk7XHJcblx0XHRcdGNvbnN0IGNvbnRhaW5lciA9IGVtYmVkUmVzdWx0LmNvbnRhaW5lckVsO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFpbWcucGFyZW50RWxlbWVudCkge1xyXG5cdFx0XHRcdC8vIHByaW50KFwiXHU5NTE5XHU4QkVGOiBcdTU2RkVcdTUwQ0ZcdTZDQTFcdTY3MDlcdTcyMzZcdTUxNDNcdTdEMjBcIik7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFx1NEY3Rlx1NzUyOFx1NjZGRlx1NjM2Mlx1NjVCOVx1NkNENVxyXG5cdFx0XHRpbWcucGFyZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQoY29udGFpbmVyLCBpbWcpO1xyXG5cdFx0XHRcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBjb250YWluZXI7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiXHU1OTA0XHU3NDA2XHU1NkZFXHU1MENGXHU2NUY2XHU1MUZBXHU5NTE5OlwiLCBlcnJvcik7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuIiwgImltcG9ydCAqIGFzIGh0dHAgZnJvbSAnaHR0cCc7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IGNob2tpZGFyIGZyb20gJ2Nob2tpZGFyJztcclxuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcclxuaW1wb3J0IHsgcHJpbnQsIHNldERlYnVnIH0gZnJvbSAnLi9tYWluJztcclxuXHJcbmxldCBzZXJ2ZXI6IGh0dHAuU2VydmVyO1xyXG5sZXQgaXNTZXJ2ZXJSdW5uaW5nID0gZmFsc2U7XHJcbmxldCBsYXRlc3REaXJVcmw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5cclxuY29uc3QgdXJsRW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuXHJcbi8vIGxldCBleHBvcnRlZERhdGE6IHsgaW1hZ2VOYW1lPzogc3RyaW5nOyBhbm5vdGF0aW9uPzogc3RyaW5nIH0gPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGdldENvbnRlbnRUeXBlKGV4dDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICBzd2l0Y2ggKGV4dCkge1xyXG4gICAgICAgIGNhc2UgJy5qcGcnOlxyXG4gICAgICAgIGNhc2UgJy5qcGVnJzpcclxuICAgICAgICAgICAgcmV0dXJuICdpbWFnZS9qcGVnJztcclxuICAgICAgICBjYXNlICcucG5nJzpcclxuICAgICAgICAgICAgcmV0dXJuICdpbWFnZS9wbmcnO1xyXG4gICAgICAgIGNhc2UgJy5naWYnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2ltYWdlL2dpZic7XHJcbiAgICAgICAgY2FzZSAnLndlYnAnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2ltYWdlL3dlYnAnO1xyXG4gICAgICAgIGNhc2UgJy5zdmcnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2ltYWdlL3N2Zyt4bWwnO1xyXG4gICAgICAgIGNhc2UgJy5wZGYnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL3BkZic7XHJcbiAgICAgICAgY2FzZSAnLm1wNCc6XHJcbiAgICAgICAgICAgIHJldHVybiAndmlkZW8vbXA0JztcclxuICAgICAgICBjYXNlICcubXAzJzpcclxuICAgICAgICAgICAgcmV0dXJuICdhdWRpby9tcGVnJztcclxuICAgICAgICBjYXNlICcub2dnJzpcclxuICAgICAgICAgICAgcmV0dXJuICdhdWRpby9vZ2cnO1xyXG4gICAgICAgIGNhc2UgJy53YXYnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2F1ZGlvL3dhdic7XHJcbiAgICAgICAgY2FzZSAnLmpzb24nOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgICAgIGNhc2UgJy54bWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL3htbCc7XHJcbiAgICAgICAgY2FzZSAnLmljbyc6XHJcbiAgICAgICAgICAgIHJldHVybiAnaW1hZ2UveC1pY29uJztcclxuICAgICAgICBjYXNlICcudHh0JzpcclxuICAgICAgICAgICAgcmV0dXJuICd0ZXh0L3BsYWluJztcclxuICAgICAgICBjYXNlICcuY3N2JzpcclxuICAgICAgICAgICAgcmV0dXJuICd0ZXh0L2Nzdic7XHJcbiAgICAgICAgY2FzZSAnLmh0bWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3RleHQvaHRtbCc7XHJcbiAgICAgICAgY2FzZSAnLmNzcyc6XHJcbiAgICAgICAgICAgIHJldHVybiAndGV4dC9jc3MnO1xyXG4gICAgICAgIGNhc2UgJy5qcyc6XHJcbiAgICAgICAgICAgIHJldHVybiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCc7XHJcbiAgICAgICAgLy8gY2FzZSAnLnBwdHgnOlxyXG4gICAgICAgIC8vICAgICByZXR1cm4gJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24nO1xyXG4gICAgICAgIC8vIGNhc2UgJy51cmwnOlxyXG4gICAgICAgICAgICAvLyByZXR1cm4gJ3RleHQvcGxhaW4nO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRTZXJ2ZXIobGlicmFyeVBhdGg6IHN0cmluZywgcG9ydDogbnVtYmVyKSB7XHJcbiAgICBpZiAoaXNTZXJ2ZXJSdW5uaW5nKSByZXR1cm47XHJcbiAgICBcclxuICAgIGNvbnN0IGltYWdlc1BhdGggPSBwYXRoLmpvaW4obGlicmFyeVBhdGgsICdpbWFnZXMnKTtcclxuXHJcbiAgICAvLyBcdTRGN0ZcdTc1MjggY2hva2lkYXIgXHU3NkQxXHU2M0E3IGltYWdlcyBcdTc2RUVcdTVGNTVcdTRFMkRcdTY1QjBcdTVFRkFcdTc2ODRcdTY1ODdcdTRFRjZcdTU5MzlcclxuICAgIGNvbnN0IHdhdGNoZXIgPSBjaG9raWRhci53YXRjaChpbWFnZXNQYXRoLCB7XHJcbiAgICAgICAgaWdub3JlZDogLyhefFtcXC9cXFxcXSlcXC4uLywgLy8gXHU1RkZEXHU3NTY1XHU5NjkwXHU4NUNGXHU2NTg3XHU0RUY2XHJcbiAgICAgICAgcGVyc2lzdGVudDogdHJ1ZSxcclxuICAgICAgICBkZXB0aDogMSwgLy8gXHU1M0VBXHU3NkQxXHU2M0E3XHU0RTAwXHU3RUE3XHU3NkVFXHU1RjU1XHJcbiAgICAgICAgaWdub3JlSW5pdGlhbDogdHJ1ZSAvLyBcdTVGRkRcdTc1NjVcdTUyMURcdTU5Q0JcdTZERkJcdTUyQTBcdTc2ODRcdTY1ODdcdTRFRjZcdTU0OENcdTY1ODdcdTRFRjZcdTU5MzlcclxuICAgIH0pO1xyXG5cclxuICAgIHdhdGNoZXIub24oJ2FkZERpcicsIChkaXJQYXRoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmVsYXRpdmVQYXRoID0gcGF0aC5yZWxhdGl2ZShsaWJyYXJ5UGF0aCwgZGlyUGF0aCkucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xyXG4gICAgICAgIGxhdGVzdERpclVybCA9IGBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vJHtyZWxhdGl2ZVBhdGh9YDtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhgXHU2NUIwXHU1RUZBXHU2NTg3XHU0RUY2XHU1OTM5XHU4REVGXHU1Rjg0OiAke2xhdGVzdERpclVybH1gKTtcclxuICAgICAgICB1cmxFbWl0dGVyLmVtaXQoJ3VybFVwZGF0ZWQnLCBsYXRlc3REaXJVcmwpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VydmVyID0gaHR0cC5jcmVhdGVTZXJ2ZXIoKHJlcSwgcmVzKSA9PiB7XHJcbiAgICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcclxuICAgICAgICByZXMuc2V0SGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgT1BUSU9OUywgUFVULCBQQVRDSCwgREVMRVRFJyk7XHJcbiAgICAgICAgcmVzLnNldEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdYLVJlcXVlc3RlZC1XaXRoLGNvbnRlbnQtdHlwZScpO1xyXG4gICAgICAgIHJlcy5zZXRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgJ3RydWUnKTtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4obGlicmFyeVBhdGgsIHJlcS51cmwgfHwgJycpO1xyXG5cclxuICAgICAgICAvLyBcdTg5RTNcdTY3OTAgVVJMIFx1NjdFNVx1OEJFMlx1NTNDMlx1NjU3MFxyXG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxLnVybCB8fCAnLycsIGBodHRwOi8vJHtyZXEuaGVhZGVycy5ob3N0fWApO1xyXG4gICAgICAgIGNvbnN0IG5vQXV0b3BsYXkgPSB1cmwuc2VhcmNoUGFyYW1zLmhhcygnbm9hdXRvcGxheScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFx1NUMwNlx1NTNDMlx1NjU3MFx1NUI1OFx1NTBBOFx1NTcyOFx1OEJGN1x1NkM0Mlx1NUJGOVx1OEM2MVx1NEUyRFx1RkYwQ1x1NEVFNVx1NEZCRlx1NTQwRVx1N0VFRFx1NTkwNFx1NzQwNlx1NjVGNlx1NEY3Rlx1NzUyOFxyXG4gICAgICAgIChyZXEgYXMgYW55KS5ub0F1dG9wbGF5ID0gbm9BdXRvcGxheTtcclxuXHJcbiAgICAgICAgLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU2M0QwXHU1MjREXHU5QThDXHU4QkMxXHU4QkY3XHU2QzQyXHU4REVGXHU1Rjg0XHU2NjJGXHU1NDI2XHU1NzI4IGltYWdlcyBcdTc2RUVcdTVGNTVcdTRFMEJcclxuICAgICAgICBpZiAoIWZpbGVQYXRoLnN0YXJ0c1dpdGgocGF0aC5qb2luKGxpYnJhcnlQYXRoLCAnaW1hZ2VzJykgKyBwYXRoLnNlcCkpIHtcclxuICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg0MDQpO1xyXG4gICAgICAgICAgICByZXMuZW5kKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZzLnN0YXQoZmlsZVBhdGgsIChlcnIsIHN0YXRzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1RkYxQVx1OTc1OVx1OUVEOFx1NTkwNFx1NzQwNiBFTk9FTlQgXHU5NTE5XHU4QkVGXHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyLmNvZGUgPT09ICdFTk9FTlQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg0MDQpLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDUwMCkuZW5kKCdJbnRlcm5hbCBFcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QganNvbkZpbGVQYXRoID0gcGF0aC5qb2luKGZpbGVQYXRoLCAnbWV0YWRhdGEuanNvbicpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTY4QzBcdTY3RTUgbWV0YWRhdGEuanNvbiBcdTY2MkZcdTU0MjZcdTVCNThcdTU3MjhcclxuICAgICAgICAgICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhqc29uRmlsZVBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg0MDQpLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmcy5yZWFkRmlsZShqc29uRmlsZVBhdGgsICd1dGY4JywgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBKU09OIGZpbGU6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCg1MDAsIHsnQ29udGVudC1UeXBlJzogJ3RleHQvcGxhaW4nfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ0ludGVybmFsIFNlcnZlciBFcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmZvID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlTmFtZSA9IGluZm8ubmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4cG9ydGVkRGF0YS5pbWFnZU5hbWUgPSBpbWFnZU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBhbm5vdGF0aW9uID0gaW5mby5hbm5vdGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwb3J0ZWREYXRhLmFubm90YXRpb24gPSBhbm5vdGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VFeHQgPSBpbmZvLmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlRmlsZSA9IGAke2ltYWdlTmFtZX0uJHtpbWFnZUV4dH1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VQYXRoID0gcGF0aC5qb2luKGZpbGVQYXRoLCBpbWFnZUZpbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZzLnJlYWRGaWxlKGltYWdlUGF0aCwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVhZGluZyBmaWxlOicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoNDA0LCB7J0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdGaWxlIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZUV4dCA9PT0gJ3VybCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmxNYXRjaCA9IGNvbnRlbnQubWF0Y2goL1VSTD0oLispL2kpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybE1hdGNoICYmIHVybE1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCgzMDIsIHsgJ0xvY2F0aW9uJzogdXJsTWF0Y2hbMV0gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IGdldENvbnRlbnRUeXBlKGAuJHtpbWFnZUV4dH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnRUeXBlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDIwNCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCgyMDAsIHsnQ29udGVudC1UeXBlJzogY29udGVudFR5cGV9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAocGFyc2VFcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgSlNPTjonLCBwYXJzZUVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDUwMCwgeydDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbid9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ0Vycm9yIHBhcnNpbmcgSlNPTicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTdGMTNcdTVCNThcdTlBOENcdThCQzFcdTU5MzRcclxuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHVibGljLCBtYXgtYWdlPTYwNDgwMCcpOyAvLyAxIHdlZWtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZnMucmVhZEZpbGUoZmlsZVBhdGgsIChlcnIsIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgZmlsZTonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDUwMCwgeydDb250ZW50LVR5cGUnOiAndGV4dC9wbGFpbid9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnSW50ZXJuYWwgU2VydmVyIEVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXh0ID0gcGF0aC5leHRuYW1lKGZpbGVQYXRoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50VHlwZSA9IGdldENvbnRlbnRUeXBlKGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50VHlwZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLndyaXRlSGVhZCgyMDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHQgPT09ICcudXJsJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEudG9TdHJpbmcoJ3V0ZjgnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybE1hdGNoID0gY29udGVudC5tYXRjaCgvVVJMPSguKykvaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsTWF0Y2ggJiYgdXJsTWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMud3JpdGVIZWFkKDMwMiwgeyAnTG9jYXRpb24nOiB1cmxNYXRjaFsxXSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6IGNvbnRlbnRUeXBlfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBzZXJ2ZXIubGlzdGVuKHBvcnQsICgpID0+IHtcclxuICAgICAgICBpc1NlcnZlclJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHByaW50KGBTZXJ2ZXIgaXMgcnVubmluZyBhdCBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vYCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlZnJlc2hTZXJ2ZXIobGlicmFyeVBhdGg6IHN0cmluZywgcG9ydDogbnVtYmVyKSB7XHJcbiAgICBpZiAoIWlzU2VydmVyUnVubmluZykgcmV0dXJuO1xyXG4gICAgc2VydmVyLmNsb3NlKCgpID0+IHtcclxuICAgICAgICBpc1NlcnZlclJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICBwcmludCgnU2VydmVyIHN0b3BwZWQgZm9yIHJlZnJlc2guJyk7XHJcbiAgICAgICAgc3RhcnRTZXJ2ZXIobGlicmFyeVBhdGgsIHBvcnQpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzdG9wU2VydmVyKCkge1xyXG4gICAgaWYgKGlzU2VydmVyUnVubmluZykge1xyXG4gICAgICAgIHNlcnZlci5jbG9zZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlzU2VydmVyUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwcmludCgnU2VydmVyIHN0b3BwZWQuJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXRlc3REaXJVcmwoKTogc3RyaW5nIHwgbnVsbCB7XHJcbiAgICByZXR1cm4gbGF0ZXN0RGlyVXJsO1xyXG59XHJcblxyXG5leHBvcnQgeyB1cmxFbWl0dGVyIH07XHJcblxyXG4vLyBleHBvcnQgeyBleHBvcnRlZERhdGEgfTtcclxuIiwgIi8qISBjaG9raWRhciAtIE1JVCBMaWNlbnNlIChjKSAyMDEyIFBhdWwgTWlsbGVyIChwYXVsbWlsbHIuY29tKSAqL1xuaW1wb3J0IHsgc3RhdCBhcyBzdGF0Y2IgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBzdGF0LCByZWFkZGlyIH0gZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcbmltcG9ydCAqIGFzIHN5c1BhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyByZWFkZGlycCB9IGZyb20gJ3JlYWRkaXJwJztcbmltcG9ydCB7IE5vZGVGc0hhbmRsZXIsIEVWRU5UUyBhcyBFViwgaXNXaW5kb3dzLCBpc0lCTWksIEVNUFRZX0ZOLCBTVFJfQ0xPU0UsIFNUUl9FTkQsIH0gZnJvbSAnLi9oYW5kbGVyLmpzJztcbmNvbnN0IFNMQVNIID0gJy8nO1xuY29uc3QgU0xBU0hfU0xBU0ggPSAnLy8nO1xuY29uc3QgT05FX0RPVCA9ICcuJztcbmNvbnN0IFRXT19ET1RTID0gJy4uJztcbmNvbnN0IFNUUklOR19UWVBFID0gJ3N0cmluZyc7XG5jb25zdCBCQUNLX1NMQVNIX1JFID0gL1xcXFwvZztcbmNvbnN0IERPVUJMRV9TTEFTSF9SRSA9IC9cXC9cXC8vO1xuY29uc3QgRE9UX1JFID0gL1xcLi4qXFwuKHN3W3B4XSkkfH4kfFxcLnN1YmwuKlxcLnRtcC87XG5jb25zdCBSRVBMQUNFUl9SRSA9IC9eXFwuWy9cXFxcXS87XG5mdW5jdGlvbiBhcnJpZnkoaXRlbSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGl0ZW0pID8gaXRlbSA6IFtpdGVtXTtcbn1cbmNvbnN0IGlzTWF0Y2hlck9iamVjdCA9IChtYXRjaGVyKSA9PiB0eXBlb2YgbWF0Y2hlciA9PT0gJ29iamVjdCcgJiYgbWF0Y2hlciAhPT0gbnVsbCAmJiAhKG1hdGNoZXIgaW5zdGFuY2VvZiBSZWdFeHApO1xuZnVuY3Rpb24gY3JlYXRlUGF0dGVybihtYXRjaGVyKSB7XG4gICAgaWYgKHR5cGVvZiBtYXRjaGVyID09PSAnZnVuY3Rpb24nKVxuICAgICAgICByZXR1cm4gbWF0Y2hlcjtcbiAgICBpZiAodHlwZW9mIG1hdGNoZXIgPT09ICdzdHJpbmcnKVxuICAgICAgICByZXR1cm4gKHN0cmluZykgPT4gbWF0Y2hlciA9PT0gc3RyaW5nO1xuICAgIGlmIChtYXRjaGVyIGluc3RhbmNlb2YgUmVnRXhwKVxuICAgICAgICByZXR1cm4gKHN0cmluZykgPT4gbWF0Y2hlci50ZXN0KHN0cmluZyk7XG4gICAgaWYgKHR5cGVvZiBtYXRjaGVyID09PSAnb2JqZWN0JyAmJiBtYXRjaGVyICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAoc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAobWF0Y2hlci5wYXRoID09PSBzdHJpbmcpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBpZiAobWF0Y2hlci5yZWN1cnNpdmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWxhdGl2ZSA9IHN5c1BhdGgucmVsYXRpdmUobWF0Y2hlci5wYXRoLCBzdHJpbmcpO1xuICAgICAgICAgICAgICAgIGlmICghcmVsYXRpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIXJlbGF0aXZlLnN0YXJ0c1dpdGgoJy4uJykgJiYgIXN5c1BhdGguaXNBYnNvbHV0ZShyZWxhdGl2ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiBmYWxzZTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZVBhdGgocGF0aCkge1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc3RyaW5nIGV4cGVjdGVkJyk7XG4gICAgcGF0aCA9IHN5c1BhdGgubm9ybWFsaXplKHBhdGgpO1xuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbiAgICBsZXQgcHJlcGVuZCA9IGZhbHNlO1xuICAgIGlmIChwYXRoLnN0YXJ0c1dpdGgoJy8vJykpXG4gICAgICAgIHByZXBlbmQgPSB0cnVlO1xuICAgIGNvbnN0IERPVUJMRV9TTEFTSF9SRSA9IC9cXC9cXC8vO1xuICAgIHdoaWxlIChwYXRoLm1hdGNoKERPVUJMRV9TTEFTSF9SRSkpXG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoRE9VQkxFX1NMQVNIX1JFLCAnLycpO1xuICAgIGlmIChwcmVwZW5kKVxuICAgICAgICBwYXRoID0gJy8nICsgcGF0aDtcbiAgICByZXR1cm4gcGF0aDtcbn1cbmZ1bmN0aW9uIG1hdGNoUGF0dGVybnMocGF0dGVybnMsIHRlc3RTdHJpbmcsIHN0YXRzKSB7XG4gICAgY29uc3QgcGF0aCA9IG5vcm1hbGl6ZVBhdGgodGVzdFN0cmluZyk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHBhdHRlcm5zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gcGF0dGVybnNbaW5kZXhdO1xuICAgICAgICBpZiAocGF0dGVybihwYXRoLCBzdGF0cykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbmZ1bmN0aW9uIGFueW1hdGNoKG1hdGNoZXJzLCB0ZXN0U3RyaW5nKSB7XG4gICAgaWYgKG1hdGNoZXJzID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYW55bWF0Y2g6IHNwZWNpZnkgZmlyc3QgYXJndW1lbnQnKTtcbiAgICB9XG4gICAgLy8gRWFybHkgY2FjaGUgZm9yIG1hdGNoZXJzLlxuICAgIGNvbnN0IG1hdGNoZXJzQXJyYXkgPSBhcnJpZnkobWF0Y2hlcnMpO1xuICAgIGNvbnN0IHBhdHRlcm5zID0gbWF0Y2hlcnNBcnJheS5tYXAoKG1hdGNoZXIpID0+IGNyZWF0ZVBhdHRlcm4obWF0Y2hlcikpO1xuICAgIGlmICh0ZXN0U3RyaW5nID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICh0ZXN0U3RyaW5nLCBzdGF0cykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoUGF0dGVybnMocGF0dGVybnMsIHRlc3RTdHJpbmcsIHN0YXRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoUGF0dGVybnMocGF0dGVybnMsIHRlc3RTdHJpbmcpO1xufVxuY29uc3QgdW5pZnlQYXRocyA9IChwYXRoc18pID0+IHtcbiAgICBjb25zdCBwYXRocyA9IGFycmlmeShwYXRoc18pLmZsYXQoKTtcbiAgICBpZiAoIXBhdGhzLmV2ZXJ5KChwKSA9PiB0eXBlb2YgcCA9PT0gU1RSSU5HX1RZUEUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vbi1zdHJpbmcgcHJvdmlkZWQgYXMgd2F0Y2ggcGF0aDogJHtwYXRoc31gKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhzLm1hcChub3JtYWxpemVQYXRoVG9Vbml4KTtcbn07XG4vLyBJZiBTTEFTSF9TTEFTSCBvY2N1cnMgYXQgdGhlIGJlZ2lubmluZyBvZiBwYXRoLCBpdCBpcyBub3QgcmVwbGFjZWRcbi8vICAgICBiZWNhdXNlIFwiLy9TdG9yYWdlUEMvRHJpdmVQb29sL01vdmllc1wiIGlzIGEgdmFsaWQgbmV0d29yayBwYXRoXG5jb25zdCB0b1VuaXggPSAoc3RyaW5nKSA9PiB7XG4gICAgbGV0IHN0ciA9IHN0cmluZy5yZXBsYWNlKEJBQ0tfU0xBU0hfUkUsIFNMQVNIKTtcbiAgICBsZXQgcHJlcGVuZCA9IGZhbHNlO1xuICAgIGlmIChzdHIuc3RhcnRzV2l0aChTTEFTSF9TTEFTSCkpIHtcbiAgICAgICAgcHJlcGVuZCA9IHRydWU7XG4gICAgfVxuICAgIHdoaWxlIChzdHIubWF0Y2goRE9VQkxFX1NMQVNIX1JFKSkge1xuICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShET1VCTEVfU0xBU0hfUkUsIFNMQVNIKTtcbiAgICB9XG4gICAgaWYgKHByZXBlbmQpIHtcbiAgICAgICAgc3RyID0gU0xBU0ggKyBzdHI7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG59O1xuLy8gT3VyIHZlcnNpb24gb2YgdXBhdGgubm9ybWFsaXplXG4vLyBUT0RPOiB0aGlzIGlzIG5vdCBlcXVhbCB0byBwYXRoLW5vcm1hbGl6ZSBtb2R1bGUgLSBpbnZlc3RpZ2F0ZSB3aHlcbmNvbnN0IG5vcm1hbGl6ZVBhdGhUb1VuaXggPSAocGF0aCkgPT4gdG9Vbml4KHN5c1BhdGgubm9ybWFsaXplKHRvVW5peChwYXRoKSkpO1xuLy8gVE9ETzogcmVmYWN0b3JcbmNvbnN0IG5vcm1hbGl6ZUlnbm9yZWQgPSAoY3dkID0gJycpID0+IChwYXRoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbm9ybWFsaXplUGF0aFRvVW5peChzeXNQYXRoLmlzQWJzb2x1dGUocGF0aCkgPyBwYXRoIDogc3lzUGF0aC5qb2luKGN3ZCwgcGF0aCkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfVxufTtcbmNvbnN0IGdldEFic29sdXRlUGF0aCA9IChwYXRoLCBjd2QpID0+IHtcbiAgICBpZiAoc3lzUGF0aC5pc0Fic29sdXRlKHBhdGgpKSB7XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH1cbiAgICByZXR1cm4gc3lzUGF0aC5qb2luKGN3ZCwgcGF0aCk7XG59O1xuY29uc3QgRU1QVFlfU0VUID0gT2JqZWN0LmZyZWV6ZShuZXcgU2V0KCkpO1xuLyoqXG4gKiBEaXJlY3RvcnkgZW50cnkuXG4gKi9cbmNsYXNzIERpckVudHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihkaXIsIHJlbW92ZVdhdGNoZXIpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gZGlyO1xuICAgICAgICB0aGlzLl9yZW1vdmVXYXRjaGVyID0gcmVtb3ZlV2F0Y2hlcjtcbiAgICAgICAgdGhpcy5pdGVtcyA9IG5ldyBTZXQoKTtcbiAgICB9XG4gICAgYWRkKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgeyBpdGVtcyB9ID0gdGhpcztcbiAgICAgICAgaWYgKCFpdGVtcylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKGl0ZW0gIT09IE9ORV9ET1QgJiYgaXRlbSAhPT0gVFdPX0RPVFMpXG4gICAgICAgICAgICBpdGVtcy5hZGQoaXRlbSk7XG4gICAgfVxuICAgIGFzeW5jIHJlbW92ZShpdGVtKSB7XG4gICAgICAgIGNvbnN0IHsgaXRlbXMgfSA9IHRoaXM7XG4gICAgICAgIGlmICghaXRlbXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGl0ZW1zLmRlbGV0ZShpdGVtKTtcbiAgICAgICAgaWYgKGl0ZW1zLnNpemUgPiAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBkaXIgPSB0aGlzLnBhdGg7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCByZWFkZGlyKGRpcik7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3JlbW92ZVdhdGNoZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVXYXRjaGVyKHN5c1BhdGguZGlybmFtZShkaXIpLCBzeXNQYXRoLmJhc2VuYW1lKGRpcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhcyhpdGVtKSB7XG4gICAgICAgIGNvbnN0IHsgaXRlbXMgfSA9IHRoaXM7XG4gICAgICAgIGlmICghaXRlbXMpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHJldHVybiBpdGVtcy5oYXMoaXRlbSk7XG4gICAgfVxuICAgIGdldENoaWxkcmVuKCkge1xuICAgICAgICBjb25zdCB7IGl0ZW1zIH0gPSB0aGlzO1xuICAgICAgICBpZiAoIWl0ZW1zKVxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICByZXR1cm4gWy4uLml0ZW1zLnZhbHVlcygpXTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5pdGVtcy5jbGVhcigpO1xuICAgICAgICB0aGlzLnBhdGggPSAnJztcbiAgICAgICAgdGhpcy5fcmVtb3ZlV2F0Y2hlciA9IEVNUFRZX0ZOO1xuICAgICAgICB0aGlzLml0ZW1zID0gRU1QVFlfU0VUO1xuICAgICAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICAgIH1cbn1cbmNvbnN0IFNUQVRfTUVUSE9EX0YgPSAnc3RhdCc7XG5jb25zdCBTVEFUX01FVEhPRF9MID0gJ2xzdGF0JztcbmV4cG9ydCBjbGFzcyBXYXRjaEhlbHBlciB7XG4gICAgY29uc3RydWN0b3IocGF0aCwgZm9sbG93LCBmc3cpIHtcbiAgICAgICAgdGhpcy5mc3cgPSBmc3c7XG4gICAgICAgIGNvbnN0IHdhdGNoUGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMucGF0aCA9IHBhdGggPSBwYXRoLnJlcGxhY2UoUkVQTEFDRVJfUkUsICcnKTtcbiAgICAgICAgdGhpcy53YXRjaFBhdGggPSB3YXRjaFBhdGg7XG4gICAgICAgIHRoaXMuZnVsbFdhdGNoUGF0aCA9IHN5c1BhdGgucmVzb2x2ZSh3YXRjaFBhdGgpO1xuICAgICAgICB0aGlzLmRpclBhcnRzID0gW107XG4gICAgICAgIHRoaXMuZGlyUGFydHMuZm9yRWFjaCgocGFydHMpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKVxuICAgICAgICAgICAgICAgIHBhcnRzLnBvcCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mb2xsb3dTeW1saW5rcyA9IGZvbGxvdztcbiAgICAgICAgdGhpcy5zdGF0TWV0aG9kID0gZm9sbG93ID8gU1RBVF9NRVRIT0RfRiA6IFNUQVRfTUVUSE9EX0w7XG4gICAgfVxuICAgIGVudHJ5UGF0aChlbnRyeSkge1xuICAgICAgICByZXR1cm4gc3lzUGF0aC5qb2luKHRoaXMud2F0Y2hQYXRoLCBzeXNQYXRoLnJlbGF0aXZlKHRoaXMud2F0Y2hQYXRoLCBlbnRyeS5mdWxsUGF0aCkpO1xuICAgIH1cbiAgICBmaWx0ZXJQYXRoKGVudHJ5KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHMgfSA9IGVudHJ5O1xuICAgICAgICBpZiAoc3RhdHMgJiYgc3RhdHMuaXNTeW1ib2xpY0xpbmsoKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlckRpcihlbnRyeSk7XG4gICAgICAgIGNvbnN0IHJlc29sdmVkUGF0aCA9IHRoaXMuZW50cnlQYXRoKGVudHJ5KTtcbiAgICAgICAgLy8gVE9ETzogd2hhdCBpZiBzdGF0cyBpcyB1bmRlZmluZWQ/IHJlbW92ZSAhXG4gICAgICAgIHJldHVybiB0aGlzLmZzdy5faXNudElnbm9yZWQocmVzb2x2ZWRQYXRoLCBzdGF0cykgJiYgdGhpcy5mc3cuX2hhc1JlYWRQZXJtaXNzaW9ucyhzdGF0cyk7XG4gICAgfVxuICAgIGZpbHRlckRpcihlbnRyeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5mc3cuX2lzbnRJZ25vcmVkKHRoaXMuZW50cnlQYXRoKGVudHJ5KSwgZW50cnkuc3RhdHMpO1xuICAgIH1cbn1cbi8qKlxuICogV2F0Y2hlcyBmaWxlcyAmIGRpcmVjdG9yaWVzIGZvciBjaGFuZ2VzLiBFbWl0dGVkIGV2ZW50czpcbiAqIGBhZGRgLCBgYWRkRGlyYCwgYGNoYW5nZWAsIGB1bmxpbmtgLCBgdW5saW5rRGlyYCwgYGFsbGAsIGBlcnJvcmBcbiAqXG4gKiAgICAgbmV3IEZTV2F0Y2hlcigpXG4gKiAgICAgICAuYWRkKGRpcmVjdG9yaWVzKVxuICogICAgICAgLm9uKCdhZGQnLCBwYXRoID0+IGxvZygnRmlsZScsIHBhdGgsICd3YXMgYWRkZWQnKSlcbiAqL1xuZXhwb3J0IGNsYXNzIEZTV2F0Y2hlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gICAgLy8gTm90IGluZGVudGluZyBtZXRob2RzIGZvciBoaXN0b3J5IHNha2U7IGZvciBub3cuXG4gICAgY29uc3RydWN0b3IoX29wdHMgPSB7fSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9jbG9zZXJzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9pZ25vcmVkUGF0aHMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHRoaXMuX3Rocm90dGxlZCA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgdGhpcy5fc3ltbGlua1BhdGhzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl93YXRjaGVkID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9wZW5kaW5nV3JpdGVzID0gbmV3IE1hcCgpO1xuICAgICAgICB0aGlzLl9wZW5kaW5nVW5saW5rcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5fcmVhZHlDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuX3JlYWR5RW1pdHRlZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBhd2YgPSBfb3B0cy5hd2FpdFdyaXRlRmluaXNoO1xuICAgICAgICBjb25zdCBERUZfQVdGID0geyBzdGFiaWxpdHlUaHJlc2hvbGQ6IDIwMDAsIHBvbGxJbnRlcnZhbDogMTAwIH07XG4gICAgICAgIGNvbnN0IG9wdHMgPSB7XG4gICAgICAgICAgICAvLyBEZWZhdWx0c1xuICAgICAgICAgICAgcGVyc2lzdGVudDogdHJ1ZSxcbiAgICAgICAgICAgIGlnbm9yZUluaXRpYWw6IGZhbHNlLFxuICAgICAgICAgICAgaWdub3JlUGVybWlzc2lvbkVycm9yczogZmFsc2UsXG4gICAgICAgICAgICBpbnRlcnZhbDogMTAwLFxuICAgICAgICAgICAgYmluYXJ5SW50ZXJ2YWw6IDMwMCxcbiAgICAgICAgICAgIGZvbGxvd1N5bWxpbmtzOiB0cnVlLFxuICAgICAgICAgICAgdXNlUG9sbGluZzogZmFsc2UsXG4gICAgICAgICAgICAvLyB1c2VBc3luYzogZmFsc2UsXG4gICAgICAgICAgICBhdG9taWM6IHRydWUsIC8vIE5PVEU6IG92ZXJ3cml0dGVuIGxhdGVyIChkZXBlbmRzIG9uIHVzZVBvbGxpbmcpXG4gICAgICAgICAgICAuLi5fb3B0cyxcbiAgICAgICAgICAgIC8vIENoYW5nZSBmb3JtYXRcbiAgICAgICAgICAgIGlnbm9yZWQ6IF9vcHRzLmlnbm9yZWQgPyBhcnJpZnkoX29wdHMuaWdub3JlZCkgOiBhcnJpZnkoW10pLFxuICAgICAgICAgICAgYXdhaXRXcml0ZUZpbmlzaDogYXdmID09PSB0cnVlID8gREVGX0FXRiA6IHR5cGVvZiBhd2YgPT09ICdvYmplY3QnID8geyAuLi5ERUZfQVdGLCAuLi5hd2YgfSA6IGZhbHNlLFxuICAgICAgICB9O1xuICAgICAgICAvLyBBbHdheXMgZGVmYXVsdCB0byBwb2xsaW5nIG9uIElCTSBpIGJlY2F1c2UgZnMud2F0Y2goKSBpcyBub3QgYXZhaWxhYmxlIG9uIElCTSBpLlxuICAgICAgICBpZiAoaXNJQk1pKVxuICAgICAgICAgICAgb3B0cy51c2VQb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgLy8gRWRpdG9yIGF0b21pYyB3cml0ZSBub3JtYWxpemF0aW9uIGVuYWJsZWQgYnkgZGVmYXVsdCB3aXRoIGZzLndhdGNoXG4gICAgICAgIGlmIChvcHRzLmF0b21pYyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgb3B0cy5hdG9taWMgPSAhb3B0cy51c2VQb2xsaW5nO1xuICAgICAgICAvLyBvcHRzLmF0b21pYyA9IHR5cGVvZiBfb3B0cy5hdG9taWMgPT09ICdudW1iZXInID8gX29wdHMuYXRvbWljIDogMTAwO1xuICAgICAgICAvLyBHbG9iYWwgb3ZlcnJpZGUuIFVzZWZ1bCBmb3IgZGV2ZWxvcGVycywgd2hvIG5lZWQgdG8gZm9yY2UgcG9sbGluZyBmb3IgYWxsXG4gICAgICAgIC8vIGluc3RhbmNlcyBvZiBjaG9raWRhciwgcmVnYXJkbGVzcyBvZiB1c2FnZSAvIGRlcGVuZGVuY3kgZGVwdGhcbiAgICAgICAgY29uc3QgZW52UG9sbCA9IHByb2Nlc3MuZW52LkNIT0tJREFSX1VTRVBPTExJTkc7XG4gICAgICAgIGlmIChlbnZQb2xsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVudkxvd2VyID0gZW52UG9sbC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgaWYgKGVudkxvd2VyID09PSAnZmFsc2UnIHx8IGVudkxvd2VyID09PSAnMCcpXG4gICAgICAgICAgICAgICAgb3B0cy51c2VQb2xsaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBlbHNlIGlmIChlbnZMb3dlciA9PT0gJ3RydWUnIHx8IGVudkxvd2VyID09PSAnMScpXG4gICAgICAgICAgICAgICAgb3B0cy51c2VQb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBvcHRzLnVzZVBvbGxpbmcgPSAhIWVudkxvd2VyO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVudkludGVydmFsID0gcHJvY2Vzcy5lbnYuQ0hPS0lEQVJfSU5URVJWQUw7XG4gICAgICAgIGlmIChlbnZJbnRlcnZhbClcbiAgICAgICAgICAgIG9wdHMuaW50ZXJ2YWwgPSBOdW1iZXIucGFyc2VJbnQoZW52SW50ZXJ2YWwsIDEwKTtcbiAgICAgICAgLy8gVGhpcyBpcyBkb25lIHRvIGVtaXQgcmVhZHkgb25seSBvbmNlLCBidXQgZWFjaCAnYWRkJyB3aWxsIGluY3JlYXNlIHRoYXQ/XG4gICAgICAgIGxldCByZWFkeUNhbGxzID0gMDtcbiAgICAgICAgdGhpcy5fZW1pdFJlYWR5ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVhZHlDYWxscysrO1xuICAgICAgICAgICAgaWYgKHJlYWR5Q2FsbHMgPj0gdGhpcy5fcmVhZHlDb3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXRSZWFkeSA9IEVNUFRZX0ZOO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlYWR5RW1pdHRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gdXNlIHByb2Nlc3MubmV4dFRpY2sgdG8gYWxsb3cgdGltZSBmb3IgbGlzdGVuZXIgdG8gYmUgYm91bmRcbiAgICAgICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKCgpID0+IHRoaXMuZW1pdChFVi5SRUFEWSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9lbWl0UmF3ID0gKC4uLmFyZ3MpID0+IHRoaXMuZW1pdChFVi5SQVcsIC4uLmFyZ3MpO1xuICAgICAgICB0aGlzLl9ib3VuZFJlbW92ZSA9IHRoaXMuX3JlbW92ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRzO1xuICAgICAgICB0aGlzLl9ub2RlRnNIYW5kbGVyID0gbmV3IE5vZGVGc0hhbmRsZXIodGhpcyk7XG4gICAgICAgIC8vIFlvdVx1MjAxOXJlIGZyb3plbiB3aGVuIHlvdXIgaGVhcnRcdTIwMTlzIG5vdCBvcGVuLlxuICAgICAgICBPYmplY3QuZnJlZXplKG9wdHMpO1xuICAgIH1cbiAgICBfYWRkSWdub3JlZFBhdGgobWF0Y2hlcikge1xuICAgICAgICBpZiAoaXNNYXRjaGVyT2JqZWN0KG1hdGNoZXIpKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZWFybHkgaWYgd2UgYWxyZWFkeSBoYXZlIGEgZGVlcGx5IGVxdWFsIG1hdGNoZXIgb2JqZWN0XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlnbm9yZWQgb2YgdGhpcy5faWdub3JlZFBhdGhzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzTWF0Y2hlck9iamVjdChpZ25vcmVkKSAmJlxuICAgICAgICAgICAgICAgICAgICBpZ25vcmVkLnBhdGggPT09IG1hdGNoZXIucGF0aCAmJlxuICAgICAgICAgICAgICAgICAgICBpZ25vcmVkLnJlY3Vyc2l2ZSA9PT0gbWF0Y2hlci5yZWN1cnNpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9pZ25vcmVkUGF0aHMuYWRkKG1hdGNoZXIpO1xuICAgIH1cbiAgICBfcmVtb3ZlSWdub3JlZFBhdGgobWF0Y2hlcikge1xuICAgICAgICB0aGlzLl9pZ25vcmVkUGF0aHMuZGVsZXRlKG1hdGNoZXIpO1xuICAgICAgICAvLyBub3cgZmluZCBhbnkgbWF0Y2hlciBvYmplY3RzIHdpdGggdGhlIG1hdGNoZXIgYXMgcGF0aFxuICAgICAgICBpZiAodHlwZW9mIG1hdGNoZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlnbm9yZWQgb2YgdGhpcy5faWdub3JlZFBhdGhzKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyAoNDMwODFqKTogbWFrZSB0aGlzIG1vcmUgZWZmaWNpZW50LlxuICAgICAgICAgICAgICAgIC8vIHByb2JhYmx5IGp1c3QgbWFrZSBhIGB0aGlzLl9pZ25vcmVkRGlyZWN0b3JpZXNgIG9yIHNvbWVcbiAgICAgICAgICAgICAgICAvLyBzdWNoIHRoaW5nLlxuICAgICAgICAgICAgICAgIGlmIChpc01hdGNoZXJPYmplY3QoaWdub3JlZCkgJiYgaWdub3JlZC5wYXRoID09PSBtYXRjaGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lnbm9yZWRQYXRocy5kZWxldGUoaWdub3JlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFB1YmxpYyBtZXRob2RzXG4gICAgLyoqXG4gICAgICogQWRkcyBwYXRocyB0byBiZSB3YXRjaGVkIG9uIGFuIGV4aXN0aW5nIEZTV2F0Y2hlciBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gcGF0aHNfIGZpbGUgb3IgZmlsZSBsaXN0LiBPdGhlciBhcmd1bWVudHMgYXJlIHVudXNlZFxuICAgICAqL1xuICAgIGFkZChwYXRoc18sIF9vcmlnQWRkLCBfaW50ZXJuYWwpIHtcbiAgICAgICAgY29uc3QgeyBjd2QgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY2xvc2VQcm9taXNlID0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgcGF0aHMgPSB1bmlmeVBhdGhzKHBhdGhzXyk7XG4gICAgICAgIGlmIChjd2QpIHtcbiAgICAgICAgICAgIHBhdGhzID0gcGF0aHMubWFwKChwYXRoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWJzUGF0aCA9IGdldEFic29sdXRlUGF0aChwYXRoLCBjd2QpO1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGBwYXRoYCBpbnN0ZWFkIG9mIGBhYnNQYXRoYCBiZWNhdXNlIHRoZSBjd2QgcG9ydGlvbiBjYW4ndCBiZSBhIGdsb2JcbiAgICAgICAgICAgICAgICByZXR1cm4gYWJzUGF0aDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHBhdGhzLmZvckVhY2goKHBhdGgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbW92ZUlnbm9yZWRQYXRoKHBhdGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fdXNlcklnbm9yZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICghdGhpcy5fcmVhZHlDb3VudClcbiAgICAgICAgICAgIHRoaXMuX3JlYWR5Q291bnQgPSAwO1xuICAgICAgICB0aGlzLl9yZWFkeUNvdW50ICs9IHBhdGhzLmxlbmd0aDtcbiAgICAgICAgUHJvbWlzZS5hbGwocGF0aHMubWFwKGFzeW5jIChwYXRoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLl9ub2RlRnNIYW5kbGVyLl9hZGRUb05vZGVGcyhwYXRoLCAhX2ludGVybmFsLCB1bmRlZmluZWQsIDAsIF9vcmlnQWRkKTtcbiAgICAgICAgICAgIGlmIChyZXMpXG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdFJlYWR5KCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9KSkudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2xvc2VkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHJlc3VsdHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZChzeXNQYXRoLmRpcm5hbWUoaXRlbSksIHN5c1BhdGguYmFzZW5hbWUoX29yaWdBZGQgfHwgaXRlbSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2Ugd2F0Y2hlcnMgb3Igc3RhcnQgaWdub3JpbmcgZXZlbnRzIGZyb20gc3BlY2lmaWVkIHBhdGhzLlxuICAgICAqL1xuICAgIHVud2F0Y2gocGF0aHNfKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICBjb25zdCBwYXRocyA9IHVuaWZ5UGF0aHMocGF0aHNfKTtcbiAgICAgICAgY29uc3QgeyBjd2QgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgcGF0aHMuZm9yRWFjaCgocGF0aCkgPT4ge1xuICAgICAgICAgICAgLy8gY29udmVydCB0byBhYnNvbHV0ZSBwYXRoIHVubGVzcyByZWxhdGl2ZSBwYXRoIGFscmVhZHkgbWF0Y2hlc1xuICAgICAgICAgICAgaWYgKCFzeXNQYXRoLmlzQWJzb2x1dGUocGF0aCkgJiYgIXRoaXMuX2Nsb3NlcnMuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN3ZClcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHN5c1BhdGguam9pbihjd2QsIHBhdGgpO1xuICAgICAgICAgICAgICAgIHBhdGggPSBzeXNQYXRoLnJlc29sdmUocGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jbG9zZVBhdGgocGF0aCk7XG4gICAgICAgICAgICB0aGlzLl9hZGRJZ25vcmVkUGF0aChwYXRoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl93YXRjaGVkLmhhcyhwYXRoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2FkZElnbm9yZWRQYXRoKHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGNhY2hlZCB1c2VySWdub3JlZCBhbnltYXRjaCBmblxuICAgICAgICAgICAgLy8gdG8gbWFrZSBpZ25vcmVkUGF0aHMgY2hhbmdlcyBlZmZlY3RpdmVcbiAgICAgICAgICAgIHRoaXMuX3VzZXJJZ25vcmVkID0gdW5kZWZpbmVkO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlIHdhdGNoZXJzIGFuZCByZW1vdmUgYWxsIGxpc3RlbmVycyBmcm9tIHdhdGNoZWQgcGF0aHMuXG4gICAgICovXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jbG9zZVByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jbG9zZVByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICAvLyBNZW1vcnkgbWFuYWdlbWVudC5cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICAgICAgY29uc3QgY2xvc2VycyA9IFtdO1xuICAgICAgICB0aGlzLl9jbG9zZXJzLmZvckVhY2goKGNsb3Nlckxpc3QpID0+IGNsb3Nlckxpc3QuZm9yRWFjaCgoY2xvc2VyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gY2xvc2VyKCk7XG4gICAgICAgICAgICBpZiAocHJvbWlzZSBpbnN0YW5jZW9mIFByb21pc2UpXG4gICAgICAgICAgICAgICAgY2xvc2Vycy5wdXNoKHByb21pc2UpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuX3N0cmVhbXMuZm9yRWFjaCgoc3RyZWFtKSA9PiBzdHJlYW0uZGVzdHJveSgpKTtcbiAgICAgICAgdGhpcy5fdXNlcklnbm9yZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3JlYWR5Q291bnQgPSAwO1xuICAgICAgICB0aGlzLl9yZWFkeUVtaXR0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fd2F0Y2hlZC5mb3JFYWNoKChkaXJlbnQpID0+IGRpcmVudC5kaXNwb3NlKCkpO1xuICAgICAgICB0aGlzLl9jbG9zZXJzLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX3dhdGNoZWQuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtcy5jbGVhcigpO1xuICAgICAgICB0aGlzLl9zeW1saW5rUGF0aHMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5fdGhyb3R0bGVkLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuX2Nsb3NlUHJvbWlzZSA9IGNsb3NlcnMubGVuZ3RoXG4gICAgICAgICAgICA/IFByb21pc2UuYWxsKGNsb3NlcnMpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKVxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Nsb3NlUHJvbWlzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwb3NlIGxpc3Qgb2Ygd2F0Y2hlZCBwYXRoc1xuICAgICAqIEByZXR1cm5zIGZvciBjaGFpbmluZ1xuICAgICAqL1xuICAgIGdldFdhdGNoZWQoKSB7XG4gICAgICAgIGNvbnN0IHdhdGNoTGlzdCA9IHt9O1xuICAgICAgICB0aGlzLl93YXRjaGVkLmZvckVhY2goKGVudHJ5LCBkaXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMub3B0aW9ucy5jd2QgPyBzeXNQYXRoLnJlbGF0aXZlKHRoaXMub3B0aW9ucy5jd2QsIGRpcikgOiBkaXI7XG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGtleSB8fCBPTkVfRE9UO1xuICAgICAgICAgICAgd2F0Y2hMaXN0W2luZGV4XSA9IGVudHJ5LmdldENoaWxkcmVuKCkuc29ydCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHdhdGNoTGlzdDtcbiAgICB9XG4gICAgZW1pdFdpdGhBbGwoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgdGhpcy5lbWl0KGV2ZW50LCAuLi5hcmdzKTtcbiAgICAgICAgaWYgKGV2ZW50ICE9PSBFVi5FUlJPUilcbiAgICAgICAgICAgIHRoaXMuZW1pdChFVi5BTEwsIGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9XG4gICAgLy8gQ29tbW9uIGhlbHBlcnNcbiAgICAvLyAtLS0tLS0tLS0tLS0tLVxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZSBhbmQgZW1pdCBldmVudHMuXG4gICAgICogQ2FsbGluZyBfZW1pdCBET0VTIE5PVCBNRUFOIGVtaXQoKSB3b3VsZCBiZSBjYWxsZWQhXG4gICAgICogQHBhcmFtIGV2ZW50IFR5cGUgb2YgZXZlbnRcbiAgICAgKiBAcGFyYW0gcGF0aCBGaWxlIG9yIGRpcmVjdG9yeSBwYXRoXG4gICAgICogQHBhcmFtIHN0YXRzIGFyZ3VtZW50cyB0byBiZSBwYXNzZWQgd2l0aCBldmVudFxuICAgICAqIEByZXR1cm5zIHRoZSBlcnJvciBpZiBkZWZpbmVkLCBvdGhlcndpc2UgdGhlIHZhbHVlIG9mIHRoZSBGU1dhdGNoZXIgaW5zdGFuY2UncyBgY2xvc2VkYCBmbGFnXG4gICAgICovXG4gICAgYXN5bmMgX2VtaXQoZXZlbnQsIHBhdGgsIHN0YXRzKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgaWYgKGlzV2luZG93cylcbiAgICAgICAgICAgIHBhdGggPSBzeXNQYXRoLm5vcm1hbGl6ZShwYXRoKTtcbiAgICAgICAgaWYgKG9wdHMuY3dkKVxuICAgICAgICAgICAgcGF0aCA9IHN5c1BhdGgucmVsYXRpdmUob3B0cy5jd2QsIHBhdGgpO1xuICAgICAgICBjb25zdCBhcmdzID0gW3BhdGhdO1xuICAgICAgICBpZiAoc3RhdHMgIT0gbnVsbClcbiAgICAgICAgICAgIGFyZ3MucHVzaChzdGF0cyk7XG4gICAgICAgIGNvbnN0IGF3ZiA9IG9wdHMuYXdhaXRXcml0ZUZpbmlzaDtcbiAgICAgICAgbGV0IHB3O1xuICAgICAgICBpZiAoYXdmICYmIChwdyA9IHRoaXMuX3BlbmRpbmdXcml0ZXMuZ2V0KHBhdGgpKSkge1xuICAgICAgICAgICAgcHcubGFzdENoYW5nZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5hdG9taWMpIHtcbiAgICAgICAgICAgIGlmIChldmVudCA9PT0gRVYuVU5MSU5LKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGVuZGluZ1VubGlua3Muc2V0KHBhdGgsIFtldmVudCwgLi4uYXJnc10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wZW5kaW5nVW5saW5rcy5mb3JFYWNoKChlbnRyeSwgcGF0aCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KC4uLmVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChFVi5BTEwsIC4uLmVudHJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdVbmxpbmtzLmRlbGV0ZShwYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgdHlwZW9mIG9wdHMuYXRvbWljID09PSAnbnVtYmVyJyA/IG9wdHMuYXRvbWljIDogMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChldmVudCA9PT0gRVYuQUREICYmIHRoaXMuX3BlbmRpbmdVbmxpbmtzLmhhcyhwYXRoKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gRVYuQ0hBTkdFO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdVbmxpbmtzLmRlbGV0ZShwYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXdmICYmIChldmVudCA9PT0gRVYuQUREIHx8IGV2ZW50ID09PSBFVi5DSEFOR0UpICYmIHRoaXMuX3JlYWR5RW1pdHRlZCkge1xuICAgICAgICAgICAgY29uc3QgYXdmRW1pdCA9IChlcnIsIHN0YXRzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICBldmVudCA9IEVWLkVSUk9SO1xuICAgICAgICAgICAgICAgICAgICBhcmdzWzBdID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXRXaXRoQWxsKGV2ZW50LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoc3RhdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc3RhdHMgZG9lc24ndCBleGlzdCB0aGUgZmlsZSBtdXN0IGhhdmUgYmVlbiBkZWxldGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3NbMV0gPSBzdGF0cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHVzaChzdGF0cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0V2l0aEFsbChldmVudCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuX2F3YWl0V3JpdGVGaW5pc2gocGF0aCwgYXdmLnN0YWJpbGl0eVRocmVzaG9sZCwgZXZlbnQsIGF3ZkVtaXQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50ID09PSBFVi5DSEFOR0UpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzVGhyb3R0bGVkID0gIXRoaXMuX3Rocm90dGxlKEVWLkNIQU5HRSwgcGF0aCwgNTApO1xuICAgICAgICAgICAgaWYgKGlzVGhyb3R0bGVkKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmFsd2F5c1N0YXQgJiZcbiAgICAgICAgICAgIHN0YXRzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIChldmVudCA9PT0gRVYuQUREIHx8IGV2ZW50ID09PSBFVi5BRERfRElSIHx8IGV2ZW50ID09PSBFVi5DSEFOR0UpKSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsUGF0aCA9IG9wdHMuY3dkID8gc3lzUGF0aC5qb2luKG9wdHMuY3dkLCBwYXRoKSA6IHBhdGg7XG4gICAgICAgICAgICBsZXQgc3RhdHM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0YXRzID0gYXdhaXQgc3RhdChmdWxsUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU3VwcHJlc3MgZXZlbnQgd2hlbiBmc19zdGF0IGZhaWxzLCB0byBhdm9pZCBzZW5kaW5nIHVuZGVmaW5lZCAnc3RhdCdcbiAgICAgICAgICAgIGlmICghc3RhdHMgfHwgdGhpcy5jbG9zZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgYXJncy5wdXNoKHN0YXRzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXRXaXRoQWxsKGV2ZW50LCBhcmdzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbW1vbiBoYW5kbGVyIGZvciBlcnJvcnNcbiAgICAgKiBAcmV0dXJucyBUaGUgZXJyb3IgaWYgZGVmaW5lZCwgb3RoZXJ3aXNlIHRoZSB2YWx1ZSBvZiB0aGUgRlNXYXRjaGVyIGluc3RhbmNlJ3MgYGNsb3NlZGAgZmxhZ1xuICAgICAqL1xuICAgIF9oYW5kbGVFcnJvcihlcnJvcikge1xuICAgICAgICBjb25zdCBjb2RlID0gZXJyb3IgJiYgZXJyb3IuY29kZTtcbiAgICAgICAgaWYgKGVycm9yICYmXG4gICAgICAgICAgICBjb2RlICE9PSAnRU5PRU5UJyAmJlxuICAgICAgICAgICAgY29kZSAhPT0gJ0VOT1RESVInICYmXG4gICAgICAgICAgICAoIXRoaXMub3B0aW9ucy5pZ25vcmVQZXJtaXNzaW9uRXJyb3JzIHx8IChjb2RlICE9PSAnRVBFUk0nICYmIGNvZGUgIT09ICdFQUNDRVMnKSkpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdChFVi5FUlJPUiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcnJvciB8fCB0aGlzLmNsb3NlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHV0aWxpdHkgZm9yIHRocm90dGxpbmdcbiAgICAgKiBAcGFyYW0gYWN0aW9uVHlwZSB0eXBlIGJlaW5nIHRocm90dGxlZFxuICAgICAqIEBwYXJhbSBwYXRoIGJlaW5nIGFjdGVkIHVwb25cbiAgICAgKiBAcGFyYW0gdGltZW91dCBkdXJhdGlvbiBvZiB0aW1lIHRvIHN1cHByZXNzIGR1cGxpY2F0ZSBhY3Rpb25zXG4gICAgICogQHJldHVybnMgdHJhY2tpbmcgb2JqZWN0IG9yIGZhbHNlIGlmIGFjdGlvbiBzaG91bGQgYmUgc3VwcHJlc3NlZFxuICAgICAqL1xuICAgIF90aHJvdHRsZShhY3Rpb25UeXBlLCBwYXRoLCB0aW1lb3V0KSB7XG4gICAgICAgIGlmICghdGhpcy5fdGhyb3R0bGVkLmhhcyhhY3Rpb25UeXBlKSkge1xuICAgICAgICAgICAgdGhpcy5fdGhyb3R0bGVkLnNldChhY3Rpb25UeXBlLCBuZXcgTWFwKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IHRoaXMuX3Rocm90dGxlZC5nZXQoYWN0aW9uVHlwZSk7XG4gICAgICAgIGlmICghYWN0aW9uKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHRocm90dGxlJyk7XG4gICAgICAgIGNvbnN0IGFjdGlvblBhdGggPSBhY3Rpb24uZ2V0KHBhdGgpO1xuICAgICAgICBpZiAoYWN0aW9uUGF0aCkge1xuICAgICAgICAgICAgYWN0aW9uUGF0aC5jb3VudCsrO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3RcbiAgICAgICAgbGV0IHRpbWVvdXRPYmplY3Q7XG4gICAgICAgIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGFjdGlvbi5nZXQocGF0aCk7XG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IGl0ZW0gPyBpdGVtLmNvdW50IDogMDtcbiAgICAgICAgICAgIGFjdGlvbi5kZWxldGUocGF0aCk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dE9iamVjdCk7XG4gICAgICAgICAgICBpZiAoaXRlbSlcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaXRlbS50aW1lb3V0T2JqZWN0KTtcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfTtcbiAgICAgICAgdGltZW91dE9iamVjdCA9IHNldFRpbWVvdXQoY2xlYXIsIHRpbWVvdXQpO1xuICAgICAgICBjb25zdCB0aHIgPSB7IHRpbWVvdXRPYmplY3QsIGNsZWFyLCBjb3VudDogMCB9O1xuICAgICAgICBhY3Rpb24uc2V0KHBhdGgsIHRocik7XG4gICAgICAgIHJldHVybiB0aHI7XG4gICAgfVxuICAgIF9pbmNyUmVhZHlDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlYWR5Q291bnQrKztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXdhaXRzIHdyaXRlIG9wZXJhdGlvbiB0byBmaW5pc2guXG4gICAgICogUG9sbHMgYSBuZXdseSBjcmVhdGVkIGZpbGUgZm9yIHNpemUgdmFyaWF0aW9ucy4gV2hlbiBmaWxlcyBzaXplIGRvZXMgbm90IGNoYW5nZSBmb3IgJ3RocmVzaG9sZCcgbWlsbGlzZWNvbmRzIGNhbGxzIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSBwYXRoIGJlaW5nIGFjdGVkIHVwb25cbiAgICAgKiBAcGFyYW0gdGhyZXNob2xkIFRpbWUgaW4gbWlsbGlzZWNvbmRzIGEgZmlsZSBzaXplIG11c3QgYmUgZml4ZWQgYmVmb3JlIGFja25vd2xlZGdpbmcgd3JpdGUgT1AgaXMgZmluaXNoZWRcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKiBAcGFyYW0gYXdmRW1pdCBDYWxsYmFjayB0byBiZSBjYWxsZWQgd2hlbiByZWFkeSBmb3IgZXZlbnQgdG8gYmUgZW1pdHRlZC5cbiAgICAgKi9cbiAgICBfYXdhaXRXcml0ZUZpbmlzaChwYXRoLCB0aHJlc2hvbGQsIGV2ZW50LCBhd2ZFbWl0KSB7XG4gICAgICAgIGNvbnN0IGF3ZiA9IHRoaXMub3B0aW9ucy5hd2FpdFdyaXRlRmluaXNoO1xuICAgICAgICBpZiAodHlwZW9mIGF3ZiAhPT0gJ29iamVjdCcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHBvbGxJbnRlcnZhbCA9IGF3Zi5wb2xsSW50ZXJ2YWw7XG4gICAgICAgIGxldCB0aW1lb3V0SGFuZGxlcjtcbiAgICAgICAgbGV0IGZ1bGxQYXRoID0gcGF0aDtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jd2QgJiYgIXN5c1BhdGguaXNBYnNvbHV0ZShwYXRoKSkge1xuICAgICAgICAgICAgZnVsbFBhdGggPSBzeXNQYXRoLmpvaW4odGhpcy5vcHRpb25zLmN3ZCwgcGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3Qgd3JpdGVzID0gdGhpcy5fcGVuZGluZ1dyaXRlcztcbiAgICAgICAgZnVuY3Rpb24gYXdhaXRXcml0ZUZpbmlzaEZuKHByZXZTdGF0KSB7XG4gICAgICAgICAgICBzdGF0Y2IoZnVsbFBhdGgsIChlcnIsIGN1clN0YXQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyIHx8ICF3cml0ZXMuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIgJiYgZXJyLmNvZGUgIT09ICdFTk9FTlQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXdmRW1pdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IE51bWJlcihuZXcgRGF0ZSgpKTtcbiAgICAgICAgICAgICAgICBpZiAocHJldlN0YXQgJiYgY3VyU3RhdC5zaXplICE9PSBwcmV2U3RhdC5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcy5nZXQocGF0aCkubGFzdENoYW5nZSA9IG5vdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcHcgPSB3cml0ZXMuZ2V0KHBhdGgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRmID0gbm93IC0gcHcubGFzdENoYW5nZTtcbiAgICAgICAgICAgICAgICBpZiAoZGYgPj0gdGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcy5kZWxldGUocGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIGF3ZkVtaXQodW5kZWZpbmVkLCBjdXJTdGF0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXRIYW5kbGVyID0gc2V0VGltZW91dChhd2FpdFdyaXRlRmluaXNoRm4sIHBvbGxJbnRlcnZhbCwgY3VyU3RhdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3cml0ZXMuaGFzKHBhdGgpKSB7XG4gICAgICAgICAgICB3cml0ZXMuc2V0KHBhdGgsIHtcbiAgICAgICAgICAgICAgICBsYXN0Q2hhbmdlOiBub3csXG4gICAgICAgICAgICAgICAgY2FuY2VsV2FpdDogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB3cml0ZXMuZGVsZXRlKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGltZW91dEhhbmRsZXIgPSBzZXRUaW1lb3V0KGF3YWl0V3JpdGVGaW5pc2hGbiwgcG9sbEludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdXNlciBoYXMgYXNrZWQgdG8gaWdub3JlIHRoaXMgcGF0aC5cbiAgICAgKi9cbiAgICBfaXNJZ25vcmVkKHBhdGgsIHN0YXRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXRvbWljICYmIERPVF9SRS50ZXN0KHBhdGgpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICghdGhpcy5fdXNlcklnbm9yZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgY3dkIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBpZ24gPSB0aGlzLm9wdGlvbnMuaWdub3JlZDtcbiAgICAgICAgICAgIGNvbnN0IGlnbm9yZWQgPSAoaWduIHx8IFtdKS5tYXAobm9ybWFsaXplSWdub3JlZChjd2QpKTtcbiAgICAgICAgICAgIGNvbnN0IGlnbm9yZWRQYXRocyA9IFsuLi50aGlzLl9pZ25vcmVkUGF0aHNdO1xuICAgICAgICAgICAgY29uc3QgbGlzdCA9IFsuLi5pZ25vcmVkUGF0aHMubWFwKG5vcm1hbGl6ZUlnbm9yZWQoY3dkKSksIC4uLmlnbm9yZWRdO1xuICAgICAgICAgICAgdGhpcy5fdXNlcklnbm9yZWQgPSBhbnltYXRjaChsaXN0LCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySWdub3JlZChwYXRoLCBzdGF0cyk7XG4gICAgfVxuICAgIF9pc250SWdub3JlZChwYXRoLCBzdGF0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5faXNJZ25vcmVkKHBhdGgsIHN0YXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhIHNldCBvZiBjb21tb24gaGVscGVycyBhbmQgcHJvcGVydGllcyByZWxhdGluZyB0byBzeW1saW5rIGhhbmRsaW5nLlxuICAgICAqIEBwYXJhbSBwYXRoIGZpbGUgb3IgZGlyZWN0b3J5IHBhdHRlcm4gYmVpbmcgd2F0Y2hlZFxuICAgICAqL1xuICAgIF9nZXRXYXRjaEhlbHBlcnMocGF0aCkge1xuICAgICAgICByZXR1cm4gbmV3IFdhdGNoSGVscGVyKHBhdGgsIHRoaXMub3B0aW9ucy5mb2xsb3dTeW1saW5rcywgdGhpcyk7XG4gICAgfVxuICAgIC8vIERpcmVjdG9yeSBoZWxwZXJzXG4gICAgLy8gLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBkaXJlY3RvcnkgdHJhY2tpbmcgb2JqZWN0c1xuICAgICAqIEBwYXJhbSBkaXJlY3RvcnkgcGF0aCBvZiB0aGUgZGlyZWN0b3J5XG4gICAgICovXG4gICAgX2dldFdhdGNoZWREaXIoZGlyZWN0b3J5KSB7XG4gICAgICAgIGNvbnN0IGRpciA9IHN5c1BhdGgucmVzb2x2ZShkaXJlY3RvcnkpO1xuICAgICAgICBpZiAoIXRoaXMuX3dhdGNoZWQuaGFzKGRpcikpXG4gICAgICAgICAgICB0aGlzLl93YXRjaGVkLnNldChkaXIsIG5ldyBEaXJFbnRyeShkaXIsIHRoaXMuX2JvdW5kUmVtb3ZlKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl93YXRjaGVkLmdldChkaXIpO1xuICAgIH1cbiAgICAvLyBGaWxlIGhlbHBlcnNcbiAgICAvLyAtLS0tLS0tLS0tLS1cbiAgICAvKipcbiAgICAgKiBDaGVjayBmb3IgcmVhZCBwZXJtaXNzaW9uczogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzExNzgxNDA0LzEzNTg0MDVcbiAgICAgKi9cbiAgICBfaGFzUmVhZFBlcm1pc3Npb25zKHN0YXRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaWdub3JlUGVybWlzc2lvbkVycm9ycylcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gQm9vbGVhbihOdW1iZXIoc3RhdHMubW9kZSkgJiAwbzQwMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZW1pdHRpbmcgdW5saW5rIGV2ZW50cyBmb3JcbiAgICAgKiBmaWxlcyBhbmQgZGlyZWN0b3JpZXMsIGFuZCB2aWEgcmVjdXJzaW9uLCBmb3JcbiAgICAgKiBmaWxlcyBhbmQgZGlyZWN0b3JpZXMgd2l0aGluIGRpcmVjdG9yaWVzIHRoYXQgYXJlIHVubGlua2VkXG4gICAgICogQHBhcmFtIGRpcmVjdG9yeSB3aXRoaW4gd2hpY2ggdGhlIGZvbGxvd2luZyBpdGVtIGlzIGxvY2F0ZWRcbiAgICAgKiBAcGFyYW0gaXRlbSAgICAgIGJhc2UgcGF0aCBvZiBpdGVtL2RpcmVjdG9yeVxuICAgICAqL1xuICAgIF9yZW1vdmUoZGlyZWN0b3J5LCBpdGVtLCBpc0RpcmVjdG9yeSkge1xuICAgICAgICAvLyBpZiB3aGF0IGlzIGJlaW5nIGRlbGV0ZWQgaXMgYSBkaXJlY3RvcnksIGdldCB0aGF0IGRpcmVjdG9yeSdzIHBhdGhzXG4gICAgICAgIC8vIGZvciByZWN1cnNpdmUgZGVsZXRpbmcgYW5kIGNsZWFuaW5nIG9mIHdhdGNoZWQgb2JqZWN0XG4gICAgICAgIC8vIGlmIGl0IGlzIG5vdCBhIGRpcmVjdG9yeSwgbmVzdGVkRGlyZWN0b3J5Q2hpbGRyZW4gd2lsbCBiZSBlbXB0eSBhcnJheVxuICAgICAgICBjb25zdCBwYXRoID0gc3lzUGF0aC5qb2luKGRpcmVjdG9yeSwgaXRlbSk7XG4gICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gc3lzUGF0aC5yZXNvbHZlKHBhdGgpO1xuICAgICAgICBpc0RpcmVjdG9yeSA9XG4gICAgICAgICAgICBpc0RpcmVjdG9yeSAhPSBudWxsID8gaXNEaXJlY3RvcnkgOiB0aGlzLl93YXRjaGVkLmhhcyhwYXRoKSB8fCB0aGlzLl93YXRjaGVkLmhhcyhmdWxsUGF0aCk7XG4gICAgICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIGhhbmRsaW5nIGluIGNhc2Ugb2YgYXJyaXZpbmcgaGVyZSBuZWFybHkgc2ltdWx0YW5lb3VzbHlcbiAgICAgICAgLy8gdmlhIG11bHRpcGxlIHBhdGhzIChzdWNoIGFzIF9oYW5kbGVGaWxlIGFuZCBfaGFuZGxlRGlyKVxuICAgICAgICBpZiAoIXRoaXMuX3Rocm90dGxlKCdyZW1vdmUnLCBwYXRoLCAxMDApKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAvLyBpZiB0aGUgb25seSB3YXRjaGVkIGZpbGUgaXMgcmVtb3ZlZCwgd2F0Y2ggZm9yIGl0cyByZXR1cm5cbiAgICAgICAgaWYgKCFpc0RpcmVjdG9yeSAmJiB0aGlzLl93YXRjaGVkLnNpemUgPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkKGRpcmVjdG9yeSwgaXRlbSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhpcyB3aWxsIGNyZWF0ZSBhIG5ldyBlbnRyeSBpbiB0aGUgd2F0Y2hlZCBvYmplY3QgaW4gZWl0aGVyIGNhc2VcbiAgICAgICAgLy8gc28gd2UgZ290IHRvIGRvIHRoZSBkaXJlY3RvcnkgY2hlY2sgYmVmb3JlaGFuZFxuICAgICAgICBjb25zdCB3cCA9IHRoaXMuX2dldFdhdGNoZWREaXIocGF0aCk7XG4gICAgICAgIGNvbnN0IG5lc3RlZERpcmVjdG9yeUNoaWxkcmVuID0gd3AuZ2V0Q2hpbGRyZW4oKTtcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgcmVtb3ZlIGNoaWxkcmVuIGRpcmVjdG9yaWVzIC8gZmlsZXMuXG4gICAgICAgIG5lc3RlZERpcmVjdG9yeUNoaWxkcmVuLmZvckVhY2goKG5lc3RlZCkgPT4gdGhpcy5fcmVtb3ZlKHBhdGgsIG5lc3RlZCkpO1xuICAgICAgICAvLyBDaGVjayBpZiBpdGVtIHdhcyBvbiB0aGUgd2F0Y2hlZCBsaXN0IGFuZCByZW1vdmUgaXRcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5fZ2V0V2F0Y2hlZERpcihkaXJlY3RvcnkpO1xuICAgICAgICBjb25zdCB3YXNUcmFja2VkID0gcGFyZW50LmhhcyhpdGVtKTtcbiAgICAgICAgcGFyZW50LnJlbW92ZShpdGVtKTtcbiAgICAgICAgLy8gRml4ZXMgaXNzdWUgIzEwNDIgLT4gUmVsYXRpdmUgcGF0aHMgd2VyZSBkZXRlY3RlZCBhbmQgYWRkZWQgYXMgc3ltbGlua3NcbiAgICAgICAgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9wYXVsbWlsbHIvY2hva2lkYXIvYmxvYi9lMTc1M2RkYmM5NTcxYmRjMzNiNGE0YWYxNzJkNTJjYjZlNjExYzEwL2xpYi9ub2RlZnMtaGFuZGxlci5qcyNMNjEyKSxcbiAgICAgICAgLy8gYnV0IG5ldmVyIHJlbW92ZWQgZnJvbSB0aGUgbWFwIGluIGNhc2UgdGhlIHBhdGggd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgbGVhZHMgdG8gYW4gaW5jb3JyZWN0IHN0YXRlIGlmIHRoZSBwYXRoIHdhcyByZWNyZWF0ZWQ6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXVsbWlsbHIvY2hva2lkYXIvYmxvYi9lMTc1M2RkYmM5NTcxYmRjMzNiNGE0YWYxNzJkNTJjYjZlNjExYzEwL2xpYi9ub2RlZnMtaGFuZGxlci5qcyNMNTUzXG4gICAgICAgIGlmICh0aGlzLl9zeW1saW5rUGF0aHMuaGFzKGZ1bGxQYXRoKSkge1xuICAgICAgICAgICAgdGhpcy5fc3ltbGlua1BhdGhzLmRlbGV0ZShmdWxsUGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgd2Ugd2FpdCBmb3IgdGhpcyBmaWxlIHRvIGJlIGZ1bGx5IHdyaXR0ZW4sIGNhbmNlbCB0aGUgd2FpdC5cbiAgICAgICAgbGV0IHJlbFBhdGggPSBwYXRoO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmN3ZClcbiAgICAgICAgICAgIHJlbFBhdGggPSBzeXNQYXRoLnJlbGF0aXZlKHRoaXMub3B0aW9ucy5jd2QsIHBhdGgpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmF3YWl0V3JpdGVGaW5pc2ggJiYgdGhpcy5fcGVuZGluZ1dyaXRlcy5oYXMocmVsUGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5fcGVuZGluZ1dyaXRlcy5nZXQocmVsUGF0aCkuY2FuY2VsV2FpdCgpO1xuICAgICAgICAgICAgaWYgKGV2ZW50ID09PSBFVi5BREQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBFbnRyeSB3aWxsIGVpdGhlciBiZSBhIGRpcmVjdG9yeSB0aGF0IGp1c3QgZ290IHJlbW92ZWRcbiAgICAgICAgLy8gb3IgYSBib2d1cyBlbnRyeSB0byBhIGZpbGUsIGluIGVpdGhlciBjYXNlIHdlIGhhdmUgdG8gcmVtb3ZlIGl0XG4gICAgICAgIHRoaXMuX3dhdGNoZWQuZGVsZXRlKHBhdGgpO1xuICAgICAgICB0aGlzLl93YXRjaGVkLmRlbGV0ZShmdWxsUGF0aCk7XG4gICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9IGlzRGlyZWN0b3J5ID8gRVYuVU5MSU5LX0RJUiA6IEVWLlVOTElOSztcbiAgICAgICAgaWYgKHdhc1RyYWNrZWQgJiYgIXRoaXMuX2lzSWdub3JlZChwYXRoKSlcbiAgICAgICAgICAgIHRoaXMuX2VtaXQoZXZlbnROYW1lLCBwYXRoKTtcbiAgICAgICAgLy8gQXZvaWQgY29uZmxpY3RzIGlmIHdlIGxhdGVyIGNyZWF0ZSBhbm90aGVyIGZpbGUgd2l0aCB0aGUgc2FtZSBuYW1lXG4gICAgICAgIHRoaXMuX2Nsb3NlUGF0aChwYXRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIGFsbCB3YXRjaGVycyBmb3IgYSBwYXRoXG4gICAgICovXG4gICAgX2Nsb3NlUGF0aChwYXRoKSB7XG4gICAgICAgIHRoaXMuX2Nsb3NlRmlsZShwYXRoKTtcbiAgICAgICAgY29uc3QgZGlyID0gc3lzUGF0aC5kaXJuYW1lKHBhdGgpO1xuICAgICAgICB0aGlzLl9nZXRXYXRjaGVkRGlyKGRpcikucmVtb3ZlKHN5c1BhdGguYmFzZW5hbWUocGF0aCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbG9zZXMgb25seSBmaWxlLXNwZWNpZmljIHdhdGNoZXJzXG4gICAgICovXG4gICAgX2Nsb3NlRmlsZShwYXRoKSB7XG4gICAgICAgIGNvbnN0IGNsb3NlcnMgPSB0aGlzLl9jbG9zZXJzLmdldChwYXRoKTtcbiAgICAgICAgaWYgKCFjbG9zZXJzKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjbG9zZXJzLmZvckVhY2goKGNsb3NlcikgPT4gY2xvc2VyKCkpO1xuICAgICAgICB0aGlzLl9jbG9zZXJzLmRlbGV0ZShwYXRoKTtcbiAgICB9XG4gICAgX2FkZFBhdGhDbG9zZXIocGF0aCwgY2xvc2VyKSB7XG4gICAgICAgIGlmICghY2xvc2VyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBsZXQgbGlzdCA9IHRoaXMuX2Nsb3NlcnMuZ2V0KHBhdGgpO1xuICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICAgIGxpc3QgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX2Nsb3NlcnMuc2V0KHBhdGgsIGxpc3QpO1xuICAgICAgICB9XG4gICAgICAgIGxpc3QucHVzaChjbG9zZXIpO1xuICAgIH1cbiAgICBfcmVhZGRpcnAocm9vdCwgb3B0cykge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IHR5cGU6IEVWLkFMTCwgYWx3YXlzU3RhdDogdHJ1ZSwgbHN0YXQ6IHRydWUsIC4uLm9wdHMsIGRlcHRoOiAwIH07XG4gICAgICAgIGxldCBzdHJlYW0gPSByZWFkZGlycChyb290LCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5fc3RyZWFtcy5hZGQoc3RyZWFtKTtcbiAgICAgICAgc3RyZWFtLm9uY2UoU1RSX0NMT1NFLCAoKSA9PiB7XG4gICAgICAgICAgICBzdHJlYW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuICAgICAgICBzdHJlYW0ub25jZShTVFJfRU5ELCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3RyZWFtcy5kZWxldGUoc3RyZWFtKTtcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc3RyZWFtO1xuICAgIH1cbn1cbi8qKlxuICogSW5zdGFudGlhdGVzIHdhdGNoZXIgd2l0aCBwYXRocyB0byBiZSB0cmFja2VkLlxuICogQHBhcmFtIHBhdGhzIGZpbGUgLyBkaXJlY3RvcnkgcGF0aHNcbiAqIEBwYXJhbSBvcHRpb25zIG9wdHMsIHN1Y2ggYXMgYGF0b21pY2AsIGBhd2FpdFdyaXRlRmluaXNoYCwgYGlnbm9yZWRgLCBhbmQgb3RoZXJzXG4gKiBAcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBGU1dhdGNoZXIgZm9yIGNoYWluaW5nLlxuICogQGV4YW1wbGVcbiAqIGNvbnN0IHdhdGNoZXIgPSB3YXRjaCgnLicpLm9uKCdhbGwnLCAoZXZlbnQsIHBhdGgpID0+IHsgY29uc29sZS5sb2coZXZlbnQsIHBhdGgpOyB9KTtcbiAqIHdhdGNoKCcuJywgeyBhdG9taWM6IHRydWUsIGF3YWl0V3JpdGVGaW5pc2g6IHRydWUsIGlnbm9yZWQ6IChmLCBzdGF0cykgPT4gc3RhdHM/LmlzRmlsZSgpICYmICFmLmVuZHNXaXRoKCcuanMnKSB9KVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2F0Y2gocGF0aHMsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHdhdGNoZXIgPSBuZXcgRlNXYXRjaGVyKG9wdGlvbnMpO1xuICAgIHdhdGNoZXIuYWRkKHBhdGhzKTtcbiAgICByZXR1cm4gd2F0Y2hlcjtcbn1cbmV4cG9ydCBkZWZhdWx0IHsgd2F0Y2gsIEZTV2F0Y2hlciB9O1xuIiwgImltcG9ydCB7IHN0YXQsIGxzdGF0LCByZWFkZGlyLCByZWFscGF0aCB9IGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCB7IFJlYWRhYmxlIH0gZnJvbSAnc3RyZWFtJztcbmltcG9ydCB7IHJlc29sdmUgYXMgcGF0aFJlc29sdmUsIHJlbGF0aXZlIGFzIHBhdGhSZWxhdGl2ZSwgam9pbiBhcyBwYXRoSm9pbiwgc2VwIGFzIHBhdGhTZXAsIH0gZnJvbSAncGF0aCc7XG5mdW5jdGlvbiBkZWZhdWx0T3B0aW9ucygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByb290OiAnLicsXG4gICAgICAgIGZpbGVGaWx0ZXI6IChfcGF0aCkgPT4gdHJ1ZSxcbiAgICAgICAgZGlyZWN0b3J5RmlsdGVyOiAoX3BhdGgpID0+IHRydWUsXG4gICAgICAgIHR5cGU6IEZJTEVfVFlQRSxcbiAgICAgICAgbHN0YXQ6IGZhbHNlLFxuICAgICAgICBkZXB0aDogMjE0NzQ4MzY0OCxcbiAgICAgICAgYWx3YXlzU3RhdDogZmFsc2UsXG4gICAgICAgIGhpZ2hXYXRlck1hcms6IDQwOTYsXG4gICAgfTtcbn1cbmNvbnN0IFJFQ1VSU0lWRV9FUlJPUl9DT0RFID0gJ1JFQURESVJQX1JFQ1VSU0lWRV9FUlJPUic7XG5jb25zdCBOT1JNQUxfRkxPV19FUlJPUlMgPSBuZXcgU2V0KFsnRU5PRU5UJywgJ0VQRVJNJywgJ0VBQ0NFUycsICdFTE9PUCcsIFJFQ1VSU0lWRV9FUlJPUl9DT0RFXSk7XG5jb25zdCBGSUxFX1RZUEUgPSAnZmlsZXMnO1xuY29uc3QgRElSX1RZUEUgPSAnZGlyZWN0b3JpZXMnO1xuY29uc3QgRklMRV9ESVJfVFlQRSA9ICdmaWxlc19kaXJlY3Rvcmllcyc7XG5jb25zdCBFVkVSWVRISU5HX1RZUEUgPSAnYWxsJztcbmNvbnN0IEFMTF9UWVBFUyA9IFtGSUxFX1RZUEUsIERJUl9UWVBFLCBGSUxFX0RJUl9UWVBFLCBFVkVSWVRISU5HX1RZUEVdO1xuY29uc3QgRElSX1RZUEVTID0gbmV3IFNldChbRElSX1RZUEUsIEZJTEVfRElSX1RZUEUsIEVWRVJZVEhJTkdfVFlQRV0pO1xuY29uc3QgRklMRV9UWVBFUyA9IG5ldyBTZXQoW0ZJTEVfVFlQRSwgRklMRV9ESVJfVFlQRSwgRVZFUllUSElOR19UWVBFXSk7XG5jb25zdCBpc05vcm1hbEZsb3dFcnJvciA9IChlcnJvcikgPT4gTk9STUFMX0ZMT1dfRVJST1JTLmhhcyhlcnJvci5jb2RlKTtcbmNvbnN0IHdhbnRCaWdpbnRGc1N0YXRzID0gcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJztcbmNvbnN0IGVtcHR5Rm4gPSAoX3BhdGgpID0+IHRydWU7XG5jb25zdCBub3JtYWxpemVGaWx0ZXIgPSAoZmlsdGVyKSA9PiB7XG4gICAgaWYgKGZpbHRlciA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gZW1wdHlGbjtcbiAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc3QgZmwgPSBmaWx0ZXIudHJpbSgpO1xuICAgICAgICByZXR1cm4gKGVudHJ5KSA9PiBlbnRyeS5iYXNlbmFtZSA9PT0gZmw7XG4gICAgfVxuICAgIGlmIChBcnJheS5pc0FycmF5KGZpbHRlcikpIHtcbiAgICAgICAgY29uc3QgdHJJdGVtcyA9IGZpbHRlci5tYXAoKGl0ZW0pID0+IGl0ZW0udHJpbSgpKTtcbiAgICAgICAgcmV0dXJuIChlbnRyeSkgPT4gdHJJdGVtcy5zb21lKChmKSA9PiBlbnRyeS5iYXNlbmFtZSA9PT0gZik7XG4gICAgfVxuICAgIHJldHVybiBlbXB0eUZuO1xufTtcbmV4cG9ydCBjbGFzcyBSZWFkZGlycFN0cmVhbSBleHRlbmRzIFJlYWRhYmxlIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgb2JqZWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgIGF1dG9EZXN0cm95OiB0cnVlLFxuICAgICAgICAgICAgaGlnaFdhdGVyTWFyazogb3B0aW9ucy5oaWdoV2F0ZXJNYXJrLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHsgLi4uZGVmYXVsdE9wdGlvbnMoKSwgLi4ub3B0aW9ucyB9O1xuICAgICAgICBjb25zdCB7IHJvb3QsIHR5cGUgfSA9IG9wdHM7XG4gICAgICAgIHRoaXMuX2ZpbGVGaWx0ZXIgPSBub3JtYWxpemVGaWx0ZXIob3B0cy5maWxlRmlsdGVyKTtcbiAgICAgICAgdGhpcy5fZGlyZWN0b3J5RmlsdGVyID0gbm9ybWFsaXplRmlsdGVyKG9wdHMuZGlyZWN0b3J5RmlsdGVyKTtcbiAgICAgICAgY29uc3Qgc3RhdE1ldGhvZCA9IG9wdHMubHN0YXQgPyBsc3RhdCA6IHN0YXQ7XG4gICAgICAgIC8vIFVzZSBiaWdpbnQgc3RhdHMgaWYgaXQncyB3aW5kb3dzIGFuZCBzdGF0KCkgc3VwcG9ydHMgb3B0aW9ucyAobm9kZSAxMCspLlxuICAgICAgICBpZiAod2FudEJpZ2ludEZzU3RhdHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXQgPSAocGF0aCkgPT4gc3RhdE1ldGhvZChwYXRoLCB7IGJpZ2ludDogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXQgPSBzdGF0TWV0aG9kO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21heERlcHRoID0gb3B0cy5kZXB0aDtcbiAgICAgICAgdGhpcy5fd2FudHNEaXIgPSBESVJfVFlQRVMuaGFzKHR5cGUpO1xuICAgICAgICB0aGlzLl93YW50c0ZpbGUgPSBGSUxFX1RZUEVTLmhhcyh0eXBlKTtcbiAgICAgICAgdGhpcy5fd2FudHNFdmVyeXRoaW5nID0gdHlwZSA9PT0gRVZFUllUSElOR19UWVBFO1xuICAgICAgICB0aGlzLl9yb290ID0gcGF0aFJlc29sdmUocm9vdCk7XG4gICAgICAgIHRoaXMuX2lzRGlyZW50ID0gIW9wdHMuYWx3YXlzU3RhdDtcbiAgICAgICAgdGhpcy5fc3RhdHNQcm9wID0gdGhpcy5faXNEaXJlbnQgPyAnZGlyZW50JyA6ICdzdGF0cyc7XG4gICAgICAgIHRoaXMuX3JkT3B0aW9ucyA9IHsgZW5jb2Rpbmc6ICd1dGY4Jywgd2l0aEZpbGVUeXBlczogdGhpcy5faXNEaXJlbnQgfTtcbiAgICAgICAgLy8gTGF1bmNoIHN0cmVhbSB3aXRoIG9uZSBwYXJlbnQsIHRoZSByb290IGRpci5cbiAgICAgICAgdGhpcy5wYXJlbnRzID0gW3RoaXMuX2V4cGxvcmVEaXIocm9vdCwgMSldO1xuICAgICAgICB0aGlzLnJlYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGFzeW5jIF9yZWFkKGJhdGNoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWRpbmcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMucmVhZGluZyA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB3aGlsZSAoIXRoaXMuZGVzdHJveWVkICYmIGJhdGNoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhciA9IHRoaXMucGFyZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbCA9IHBhciAmJiBwYXIuZmlsZXM7XG4gICAgICAgICAgICAgICAgaWYgKGZpbCAmJiBmaWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGgsIGRlcHRoIH0gPSBwYXI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNsaWNlID0gZmlsLnNwbGljZSgwLCBiYXRjaCkubWFwKChkaXJlbnQpID0+IHRoaXMuX2Zvcm1hdEVudHJ5KGRpcmVudCwgcGF0aCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhd2FpdGVkID0gYXdhaXQgUHJvbWlzZS5hbGwoc2xpY2UpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGF3YWl0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbnRyeVR5cGUgPSBhd2FpdCB0aGlzLl9nZXRFbnRyeVR5cGUoZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5VHlwZSA9PT0gJ2RpcmVjdG9yeScgJiYgdGhpcy5fZGlyZWN0b3J5RmlsdGVyKGVudHJ5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXB0aCA8PSB0aGlzLl9tYXhEZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudHMucHVzaCh0aGlzLl9leHBsb3JlRGlyKGVudHJ5LmZ1bGxQYXRoLCBkZXB0aCArIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3dhbnRzRGlyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVzaChlbnRyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoKGVudHJ5VHlwZSA9PT0gJ2ZpbGUnIHx8IHRoaXMuX2luY2x1ZGVBc0ZpbGUoZW50cnkpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZpbGVGaWx0ZXIoZW50cnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3dhbnRzRmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1c2goZW50cnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXRjaC0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdXNoKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBhd2FpdCBwYXJlbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlc3Ryb3llZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5yZWFkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgX2V4cGxvcmVEaXIocGF0aCwgZGVwdGgpIHtcbiAgICAgICAgbGV0IGZpbGVzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmlsZXMgPSBhd2FpdCByZWFkZGlyKHBhdGgsIHRoaXMuX3JkT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBmaWxlcywgZGVwdGgsIHBhdGggfTtcbiAgICB9XG4gICAgYXN5bmMgX2Zvcm1hdEVudHJ5KGRpcmVudCwgcGF0aCkge1xuICAgICAgICBsZXQgZW50cnk7XG4gICAgICAgIGNvbnN0IGJhc2VuYW1lID0gdGhpcy5faXNEaXJlbnQgPyBkaXJlbnQubmFtZSA6IGRpcmVudDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxQYXRoID0gcGF0aFJlc29sdmUocGF0aEpvaW4ocGF0aCwgYmFzZW5hbWUpKTtcbiAgICAgICAgICAgIGVudHJ5ID0geyBwYXRoOiBwYXRoUmVsYXRpdmUodGhpcy5fcm9vdCwgZnVsbFBhdGgpLCBmdWxsUGF0aCwgYmFzZW5hbWUgfTtcbiAgICAgICAgICAgIGVudHJ5W3RoaXMuX3N0YXRzUHJvcF0gPSB0aGlzLl9pc0RpcmVudCA/IGRpcmVudCA6IGF3YWl0IHRoaXMuX3N0YXQoZnVsbFBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMuX29uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW50cnk7XG4gICAgfVxuICAgIF9vbkVycm9yKGVycikge1xuICAgICAgICBpZiAoaXNOb3JtYWxGbG93RXJyb3IoZXJyKSAmJiAhdGhpcy5kZXN0cm95ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnd2FybicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRlc3Ryb3koZXJyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBfZ2V0RW50cnlUeXBlKGVudHJ5KSB7XG4gICAgICAgIC8vIGVudHJ5IG1heSBiZSB1bmRlZmluZWQsIGJlY2F1c2UgYSB3YXJuaW5nIG9yIGFuIGVycm9yIHdlcmUgZW1pdHRlZFxuICAgICAgICAvLyBhbmQgdGhlIHN0YXRzUHJvcCBpcyB1bmRlZmluZWRcbiAgICAgICAgaWYgKCFlbnRyeSAmJiB0aGlzLl9zdGF0c1Byb3AgaW4gZW50cnkpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0cyA9IGVudHJ5W3RoaXMuX3N0YXRzUHJvcF07XG4gICAgICAgIGlmIChzdGF0cy5pc0ZpbGUoKSlcbiAgICAgICAgICAgIHJldHVybiAnZmlsZSc7XG4gICAgICAgIGlmIChzdGF0cy5pc0RpcmVjdG9yeSgpKVxuICAgICAgICAgICAgcmV0dXJuICdkaXJlY3RvcnknO1xuICAgICAgICBpZiAoc3RhdHMgJiYgc3RhdHMuaXNTeW1ib2xpY0xpbmsoKSkge1xuICAgICAgICAgICAgY29uc3QgZnVsbCA9IGVudHJ5LmZ1bGxQYXRoO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlbnRyeVJlYWxQYXRoID0gYXdhaXQgcmVhbHBhdGgoZnVsbCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZW50cnlSZWFsUGF0aFN0YXRzID0gYXdhaXQgbHN0YXQoZW50cnlSZWFsUGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5UmVhbFBhdGhTdGF0cy5pc0ZpbGUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2ZpbGUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW50cnlSZWFsUGF0aFN0YXRzLmlzRGlyZWN0b3J5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVuID0gZW50cnlSZWFsUGF0aC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmdWxsLnN0YXJ0c1dpdGgoZW50cnlSZWFsUGF0aCkgJiYgZnVsbC5zdWJzdHIobGVuLCAxKSA9PT0gcGF0aFNlcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVjdXJzaXZlRXJyb3IgPSBuZXcgRXJyb3IoYENpcmN1bGFyIHN5bWxpbmsgZGV0ZWN0ZWQ6IFwiJHtmdWxsfVwiIHBvaW50cyB0byBcIiR7ZW50cnlSZWFsUGF0aH1cImApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlRXJyb3IuY29kZSA9IFJFQ1VSU0lWRV9FUlJPUl9DT0RFO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29uRXJyb3IocmVjdXJzaXZlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnZGlyZWN0b3J5JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2luY2x1ZGVBc0ZpbGUoZW50cnkpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBlbnRyeSAmJiBlbnRyeVt0aGlzLl9zdGF0c1Byb3BdO1xuICAgICAgICByZXR1cm4gc3RhdHMgJiYgdGhpcy5fd2FudHNFdmVyeXRoaW5nICYmICFzdGF0cy5pc0RpcmVjdG9yeSgpO1xuICAgIH1cbn1cbi8qKlxuICogTWFpbiBmdW5jdGlvbiB3aGljaCBlbmRzIHVwIGNhbGxpbmcgcmVhZGRpclJlYyBhbmQgcmVhZHMgYWxsIGZpbGVzIGFuZCBkaXJlY3RvcmllcyBpbiBnaXZlbiByb290IHJlY3Vyc2l2ZWx5LlxuICogQHBhcmFtIHJvb3QgUm9vdCBkaXJlY3RvcnlcbiAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gc3BlY2lmeSByb290IChzdGFydCBkaXJlY3RvcnkpLCBmaWx0ZXJzIGFuZCByZWN1cnNpb24gZGVwdGhcbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWRkaXJwID0gKHJvb3QsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBsZXQgdHlwZSA9IG9wdGlvbnMuZW50cnlUeXBlIHx8IG9wdGlvbnMudHlwZTtcbiAgICBpZiAodHlwZSA9PT0gJ2JvdGgnKVxuICAgICAgICB0eXBlID0gRklMRV9ESVJfVFlQRTsgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHlcbiAgICBpZiAodHlwZSlcbiAgICAgICAgb3B0aW9ucy50eXBlID0gdHlwZTtcbiAgICBpZiAoIXJvb3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZWFkZGlycDogcm9vdCBhcmd1bWVudCBpcyByZXF1aXJlZC4gVXNhZ2U6IHJlYWRkaXJwKHJvb3QsIG9wdGlvbnMpJyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiByb290ICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdyZWFkZGlycDogcm9vdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLiBVc2FnZTogcmVhZGRpcnAocm9vdCwgb3B0aW9ucyknKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSAmJiAhQUxMX1RZUEVTLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgcmVhZGRpcnA6IEludmFsaWQgdHlwZSBwYXNzZWQuIFVzZSBvbmUgb2YgJHtBTExfVFlQRVMuam9pbignLCAnKX1gKTtcbiAgICB9XG4gICAgb3B0aW9ucy5yb290ID0gcm9vdDtcbiAgICByZXR1cm4gbmV3IFJlYWRkaXJwU3RyZWFtKG9wdGlvbnMpO1xufTtcbmV4cG9ydCBjb25zdCByZWFkZGlycFByb21pc2UgPSAocm9vdCwgb3B0aW9ucyA9IHt9KSA9PiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgZmlsZXMgPSBbXTtcbiAgICAgICAgcmVhZGRpcnAocm9vdCwgb3B0aW9ucylcbiAgICAgICAgICAgIC5vbignZGF0YScsIChlbnRyeSkgPT4gZmlsZXMucHVzaChlbnRyeSkpXG4gICAgICAgICAgICAub24oJ2VuZCcsICgpID0+IHJlc29sdmUoZmlsZXMpKVxuICAgICAgICAgICAgLm9uKCdlcnJvcicsIChlcnJvcikgPT4gcmVqZWN0KGVycm9yKSk7XG4gICAgfSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgcmVhZGRpcnA7XG4iLCAiaW1wb3J0IHsgd2F0Y2hGaWxlLCB1bndhdGNoRmlsZSwgd2F0Y2ggYXMgZnNfd2F0Y2ggfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBvcGVuLCBzdGF0LCBsc3RhdCwgcmVhbHBhdGggYXMgZnNyZWFscGF0aCB9IGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCAqIGFzIHN5c1BhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB0eXBlIGFzIG9zVHlwZSB9IGZyb20gJ29zJztcbmV4cG9ydCBjb25zdCBTVFJfREFUQSA9ICdkYXRhJztcbmV4cG9ydCBjb25zdCBTVFJfRU5EID0gJ2VuZCc7XG5leHBvcnQgY29uc3QgU1RSX0NMT1NFID0gJ2Nsb3NlJztcbmV4cG9ydCBjb25zdCBFTVBUWV9GTiA9ICgpID0+IHsgfTtcbmV4cG9ydCBjb25zdCBJREVOVElUWV9GTiA9ICh2YWwpID0+IHZhbDtcbmNvbnN0IHBsID0gcHJvY2Vzcy5wbGF0Zm9ybTtcbmV4cG9ydCBjb25zdCBpc1dpbmRvd3MgPSBwbCA9PT0gJ3dpbjMyJztcbmV4cG9ydCBjb25zdCBpc01hY29zID0gcGwgPT09ICdkYXJ3aW4nO1xuZXhwb3J0IGNvbnN0IGlzTGludXggPSBwbCA9PT0gJ2xpbnV4JztcbmV4cG9ydCBjb25zdCBpc0ZyZWVCU0QgPSBwbCA9PT0gJ2ZyZWVic2QnO1xuZXhwb3J0IGNvbnN0IGlzSUJNaSA9IG9zVHlwZSgpID09PSAnT1M0MDAnO1xuZXhwb3J0IGNvbnN0IEVWRU5UUyA9IHtcbiAgICBBTEw6ICdhbGwnLFxuICAgIFJFQURZOiAncmVhZHknLFxuICAgIEFERDogJ2FkZCcsXG4gICAgQ0hBTkdFOiAnY2hhbmdlJyxcbiAgICBBRERfRElSOiAnYWRkRGlyJyxcbiAgICBVTkxJTks6ICd1bmxpbmsnLFxuICAgIFVOTElOS19ESVI6ICd1bmxpbmtEaXInLFxuICAgIFJBVzogJ3JhdycsXG4gICAgRVJST1I6ICdlcnJvcicsXG59O1xuY29uc3QgRVYgPSBFVkVOVFM7XG5jb25zdCBUSFJPVFRMRV9NT0RFX1dBVENIID0gJ3dhdGNoJztcbmNvbnN0IHN0YXRNZXRob2RzID0geyBsc3RhdCwgc3RhdCB9O1xuY29uc3QgS0VZX0xJU1RFTkVSUyA9ICdsaXN0ZW5lcnMnO1xuY29uc3QgS0VZX0VSUiA9ICdlcnJIYW5kbGVycyc7XG5jb25zdCBLRVlfUkFXID0gJ3Jhd0VtaXR0ZXJzJztcbmNvbnN0IEhBTkRMRVJfS0VZUyA9IFtLRVlfTElTVEVORVJTLCBLRVlfRVJSLCBLRVlfUkFXXTtcbi8vIHByZXR0aWVyLWlnbm9yZVxuY29uc3QgYmluYXJ5RXh0ZW5zaW9ucyA9IG5ldyBTZXQoW1xuICAgICczZG0nLCAnM2RzJywgJzNnMicsICczZ3AnLCAnN3onLCAnYScsICdhYWMnLCAnYWRwJywgJ2FmZGVzaWduJywgJ2FmcGhvdG8nLCAnYWZwdWInLCAnYWknLFxuICAgICdhaWYnLCAnYWlmZicsICdhbHonLCAnYXBlJywgJ2FwaycsICdhcHBpbWFnZScsICdhcicsICdhcmonLCAnYXNmJywgJ2F1JywgJ2F2aScsXG4gICAgJ2JhaycsICdiYW1sJywgJ2JoJywgJ2JpbicsICdiaycsICdibXAnLCAnYnRpZicsICdiejInLCAnYnppcDInLFxuICAgICdjYWInLCAnY2FmJywgJ2NnbScsICdjbGFzcycsICdjbXgnLCAnY3BpbycsICdjcjInLCAnY3VyJywgJ2RhdCcsICdkY20nLCAnZGViJywgJ2RleCcsICdkanZ1JyxcbiAgICAnZGxsJywgJ2RtZycsICdkbmcnLCAnZG9jJywgJ2RvY20nLCAnZG9jeCcsICdkb3QnLCAnZG90bScsICdkcmEnLCAnRFNfU3RvcmUnLCAnZHNrJywgJ2R0cycsXG4gICAgJ2R0c2hkJywgJ2R2YicsICdkd2cnLCAnZHhmJyxcbiAgICAnZWNlbHA0ODAwJywgJ2VjZWxwNzQ3MCcsICdlY2VscDk2MDAnLCAnZWdnJywgJ2VvbCcsICdlb3QnLCAnZXB1YicsICdleGUnLFxuICAgICdmNHYnLCAnZmJzJywgJ2ZoJywgJ2ZsYScsICdmbGFjJywgJ2ZsYXRwYWsnLCAnZmxpJywgJ2ZsdicsICdmcHgnLCAnZnN0JywgJ2Z2dCcsXG4gICAgJ2czJywgJ2doJywgJ2dpZicsICdncmFmZmxlJywgJ2d6JywgJ2d6aXAnLFxuICAgICdoMjYxJywgJ2gyNjMnLCAnaDI2NCcsICdpY25zJywgJ2ljbycsICdpZWYnLCAnaW1nJywgJ2lwYScsICdpc28nLFxuICAgICdqYXInLCAnanBlZycsICdqcGcnLCAnanBndicsICdqcG0nLCAnanhyJywgJ2tleScsICdrdHgnLFxuICAgICdsaGEnLCAnbGliJywgJ2x2cCcsICdseicsICdsemgnLCAnbHptYScsICdsem8nLFxuICAgICdtM3UnLCAnbTRhJywgJ200dicsICdtYXInLCAnbWRpJywgJ21odCcsICdtaWQnLCAnbWlkaScsICdtajInLCAnbWthJywgJ21rdicsICdtbXInLCAnbW5nJyxcbiAgICAnbW9iaScsICdtb3YnLCAnbW92aWUnLCAnbXAzJyxcbiAgICAnbXA0JywgJ21wNGEnLCAnbXBlZycsICdtcGcnLCAnbXBnYScsICdteHUnLFxuICAgICduZWYnLCAnbnB4JywgJ251bWJlcnMnLCAnbnVwa2cnLFxuICAgICdvJywgJ29kcCcsICdvZHMnLCAnb2R0JywgJ29nYScsICdvZ2cnLCAnb2d2JywgJ290ZicsICdvdHQnLFxuICAgICdwYWdlcycsICdwYm0nLCAncGN4JywgJ3BkYicsICdwZGYnLCAncGVhJywgJ3BnbScsICdwaWMnLCAncG5nJywgJ3BubScsICdwb3QnLCAncG90bScsXG4gICAgJ3BvdHgnLCAncHBhJywgJ3BwYW0nLFxuICAgICdwcG0nLCAncHBzJywgJ3Bwc20nLCAncHBzeCcsICdwcHQnLCAncHB0bScsICdwcHR4JywgJ3BzZCcsICdweWEnLCAncHljJywgJ3B5bycsICdweXYnLFxuICAgICdxdCcsXG4gICAgJ3JhcicsICdyYXMnLCAncmF3JywgJ3Jlc291cmNlcycsICdyZ2InLCAncmlwJywgJ3JsYycsICdybWYnLCAncm12YicsICdycG0nLCAncnRmJywgJ3J6JyxcbiAgICAnczNtJywgJ3M3eicsICdzY3B0JywgJ3NnaScsICdzaGFyJywgJ3NuYXAnLCAnc2lsJywgJ3NrZXRjaCcsICdzbGsnLCAnc212JywgJ3NuaycsICdzbycsXG4gICAgJ3N0bCcsICdzdW8nLCAnc3ViJywgJ3N3ZicsXG4gICAgJ3RhcicsICd0YnonLCAndGJ6MicsICd0Z2EnLCAndGd6JywgJ3RobXgnLCAndGlmJywgJ3RpZmYnLCAndGx6JywgJ3R0YycsICd0dGYnLCAndHh6JyxcbiAgICAndWRmJywgJ3V2aCcsICd1dmknLCAndXZtJywgJ3V2cCcsICd1dnMnLCAndXZ1JyxcbiAgICAndml2JywgJ3ZvYicsXG4gICAgJ3dhcicsICd3YXYnLCAnd2F4JywgJ3dibXAnLCAnd2RwJywgJ3dlYmEnLCAnd2VibScsICd3ZWJwJywgJ3dobCcsICd3aW0nLCAnd20nLCAnd21hJyxcbiAgICAnd212JywgJ3dteCcsICd3b2ZmJywgJ3dvZmYyJywgJ3dybScsICd3dngnLFxuICAgICd4Ym0nLCAneGlmJywgJ3hsYScsICd4bGFtJywgJ3hscycsICd4bHNiJywgJ3hsc20nLCAneGxzeCcsICd4bHQnLCAneGx0bScsICd4bHR4JywgJ3htJyxcbiAgICAneG1pbmQnLCAneHBpJywgJ3hwbScsICd4d2QnLCAneHonLFxuICAgICd6JywgJ3ppcCcsICd6aXB4Jyxcbl0pO1xuY29uc3QgaXNCaW5hcnlQYXRoID0gKGZpbGVQYXRoKSA9PiBiaW5hcnlFeHRlbnNpb25zLmhhcyhzeXNQYXRoLmV4dG5hbWUoZmlsZVBhdGgpLnNsaWNlKDEpLnRvTG93ZXJDYXNlKCkpO1xuLy8gVE9ETzogZW1pdCBlcnJvcnMgcHJvcGVybHkuIEV4YW1wbGU6IEVNRklMRSBvbiBNYWNvcy5cbmNvbnN0IGZvcmVhY2ggPSAodmFsLCBmbikgPT4ge1xuICAgIGlmICh2YWwgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgICAgdmFsLmZvckVhY2goZm4pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm4odmFsKTtcbiAgICB9XG59O1xuY29uc3QgYWRkQW5kQ29udmVydCA9IChtYWluLCBwcm9wLCBpdGVtKSA9PiB7XG4gICAgbGV0IGNvbnRhaW5lciA9IG1haW5bcHJvcF07XG4gICAgaWYgKCEoY29udGFpbmVyIGluc3RhbmNlb2YgU2V0KSkge1xuICAgICAgICBtYWluW3Byb3BdID0gY29udGFpbmVyID0gbmV3IFNldChbY29udGFpbmVyXSk7XG4gICAgfVxuICAgIGNvbnRhaW5lci5hZGQoaXRlbSk7XG59O1xuY29uc3QgY2xlYXJJdGVtID0gKGNvbnQpID0+IChrZXkpID0+IHtcbiAgICBjb25zdCBzZXQgPSBjb250W2tleV07XG4gICAgaWYgKHNldCBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICBzZXQuY2xlYXIoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRlbGV0ZSBjb250W2tleV07XG4gICAgfVxufTtcbmNvbnN0IGRlbEZyb21TZXQgPSAobWFpbiwgcHJvcCwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IG1haW5bcHJvcF07XG4gICAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICBjb250YWluZXIuZGVsZXRlKGl0ZW0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb250YWluZXIgPT09IGl0ZW0pIHtcbiAgICAgICAgZGVsZXRlIG1haW5bcHJvcF07XG4gICAgfVxufTtcbmNvbnN0IGlzRW1wdHlTZXQgPSAodmFsKSA9PiAodmFsIGluc3RhbmNlb2YgU2V0ID8gdmFsLnNpemUgPT09IDAgOiAhdmFsKTtcbmNvbnN0IEZzV2F0Y2hJbnN0YW5jZXMgPSBuZXcgTWFwKCk7XG4vKipcbiAqIEluc3RhbnRpYXRlcyB0aGUgZnNfd2F0Y2ggaW50ZXJmYWNlXG4gKiBAcGFyYW0gcGF0aCB0byBiZSB3YXRjaGVkXG4gKiBAcGFyYW0gb3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gZnNfd2F0Y2hcbiAqIEBwYXJhbSBsaXN0ZW5lciBtYWluIGV2ZW50IGhhbmRsZXJcbiAqIEBwYXJhbSBlcnJIYW5kbGVyIGVtaXRzIGluZm8gYWJvdXQgZXJyb3JzXG4gKiBAcGFyYW0gZW1pdFJhdyBlbWl0cyByYXcgZXZlbnQgZGF0YVxuICogQHJldHVybnMge05hdGl2ZUZzV2F0Y2hlcn1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRnNXYXRjaEluc3RhbmNlKHBhdGgsIG9wdGlvbnMsIGxpc3RlbmVyLCBlcnJIYW5kbGVyLCBlbWl0UmF3KSB7XG4gICAgY29uc3QgaGFuZGxlRXZlbnQgPSAocmF3RXZlbnQsIGV2UGF0aCkgPT4ge1xuICAgICAgICBsaXN0ZW5lcihwYXRoKTtcbiAgICAgICAgZW1pdFJhdyhyYXdFdmVudCwgZXZQYXRoLCB7IHdhdGNoZWRQYXRoOiBwYXRoIH0pO1xuICAgICAgICAvLyBlbWl0IGJhc2VkIG9uIGV2ZW50cyBvY2N1cnJpbmcgZm9yIGZpbGVzIGZyb20gYSBkaXJlY3RvcnkncyB3YXRjaGVyIGluXG4gICAgICAgIC8vIGNhc2UgdGhlIGZpbGUncyB3YXRjaGVyIG1pc3NlcyBpdCAoYW5kIHJlbHkgb24gdGhyb3R0bGluZyB0byBkZS1kdXBlKVxuICAgICAgICBpZiAoZXZQYXRoICYmIHBhdGggIT09IGV2UGF0aCkge1xuICAgICAgICAgICAgZnNXYXRjaEJyb2FkY2FzdChzeXNQYXRoLnJlc29sdmUocGF0aCwgZXZQYXRoKSwgS0VZX0xJU1RFTkVSUywgc3lzUGF0aC5qb2luKHBhdGgsIGV2UGF0aCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZnNfd2F0Y2gocGF0aCwge1xuICAgICAgICAgICAgcGVyc2lzdGVudDogb3B0aW9ucy5wZXJzaXN0ZW50LFxuICAgICAgICB9LCBoYW5kbGVFdmVudCk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBlcnJIYW5kbGVyKGVycm9yKTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEhlbHBlciBmb3IgcGFzc2luZyBmc193YXRjaCBldmVudCBkYXRhIHRvIGEgY29sbGVjdGlvbiBvZiBsaXN0ZW5lcnNcbiAqIEBwYXJhbSBmdWxsUGF0aCBhYnNvbHV0ZSBwYXRoIGJvdW5kIHRvIGZzX3dhdGNoIGluc3RhbmNlXG4gKi9cbmNvbnN0IGZzV2F0Y2hCcm9hZGNhc3QgPSAoZnVsbFBhdGgsIGxpc3RlbmVyVHlwZSwgdmFsMSwgdmFsMiwgdmFsMykgPT4ge1xuICAgIGNvbnN0IGNvbnQgPSBGc1dhdGNoSW5zdGFuY2VzLmdldChmdWxsUGF0aCk7XG4gICAgaWYgKCFjb250KVxuICAgICAgICByZXR1cm47XG4gICAgZm9yZWFjaChjb250W2xpc3RlbmVyVHlwZV0sIChsaXN0ZW5lcikgPT4ge1xuICAgICAgICBsaXN0ZW5lcih2YWwxLCB2YWwyLCB2YWwzKTtcbiAgICB9KTtcbn07XG4vKipcbiAqIEluc3RhbnRpYXRlcyB0aGUgZnNfd2F0Y2ggaW50ZXJmYWNlIG9yIGJpbmRzIGxpc3RlbmVyc1xuICogdG8gYW4gZXhpc3Rpbmcgb25lIGNvdmVyaW5nIHRoZSBzYW1lIGZpbGUgc3lzdGVtIGVudHJ5XG4gKiBAcGFyYW0gcGF0aFxuICogQHBhcmFtIGZ1bGxQYXRoIGFic29sdXRlIHBhdGhcbiAqIEBwYXJhbSBvcHRpb25zIHRvIGJlIHBhc3NlZCB0byBmc193YXRjaFxuICogQHBhcmFtIGhhbmRsZXJzIGNvbnRhaW5lciBmb3IgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb25zXG4gKi9cbmNvbnN0IHNldEZzV2F0Y2hMaXN0ZW5lciA9IChwYXRoLCBmdWxsUGF0aCwgb3B0aW9ucywgaGFuZGxlcnMpID0+IHtcbiAgICBjb25zdCB7IGxpc3RlbmVyLCBlcnJIYW5kbGVyLCByYXdFbWl0dGVyIH0gPSBoYW5kbGVycztcbiAgICBsZXQgY29udCA9IEZzV2F0Y2hJbnN0YW5jZXMuZ2V0KGZ1bGxQYXRoKTtcbiAgICBsZXQgd2F0Y2hlcjtcbiAgICBpZiAoIW9wdGlvbnMucGVyc2lzdGVudCkge1xuICAgICAgICB3YXRjaGVyID0gY3JlYXRlRnNXYXRjaEluc3RhbmNlKHBhdGgsIG9wdGlvbnMsIGxpc3RlbmVyLCBlcnJIYW5kbGVyLCByYXdFbWl0dGVyKTtcbiAgICAgICAgaWYgKCF3YXRjaGVyKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZXR1cm4gd2F0Y2hlci5jbG9zZS5iaW5kKHdhdGNoZXIpO1xuICAgIH1cbiAgICBpZiAoY29udCkge1xuICAgICAgICBhZGRBbmRDb252ZXJ0KGNvbnQsIEtFWV9MSVNURU5FUlMsIGxpc3RlbmVyKTtcbiAgICAgICAgYWRkQW5kQ29udmVydChjb250LCBLRVlfRVJSLCBlcnJIYW5kbGVyKTtcbiAgICAgICAgYWRkQW5kQ29udmVydChjb250LCBLRVlfUkFXLCByYXdFbWl0dGVyKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdhdGNoZXIgPSBjcmVhdGVGc1dhdGNoSW5zdGFuY2UocGF0aCwgb3B0aW9ucywgZnNXYXRjaEJyb2FkY2FzdC5iaW5kKG51bGwsIGZ1bGxQYXRoLCBLRVlfTElTVEVORVJTKSwgZXJySGFuZGxlciwgLy8gbm8gbmVlZCB0byB1c2UgYnJvYWRjYXN0IGhlcmVcbiAgICAgICAgZnNXYXRjaEJyb2FkY2FzdC5iaW5kKG51bGwsIGZ1bGxQYXRoLCBLRVlfUkFXKSk7XG4gICAgICAgIGlmICghd2F0Y2hlcilcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgd2F0Y2hlci5vbihFVi5FUlJPUiwgYXN5bmMgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBicm9hZGNhc3RFcnIgPSBmc1dhdGNoQnJvYWRjYXN0LmJpbmQobnVsbCwgZnVsbFBhdGgsIEtFWV9FUlIpO1xuICAgICAgICAgICAgaWYgKGNvbnQpXG4gICAgICAgICAgICAgICAgY29udC53YXRjaGVyVW51c2FibGUgPSB0cnVlOyAvLyBkb2N1bWVudGVkIHNpbmNlIE5vZGUgMTAuNC4xXG4gICAgICAgICAgICAvLyBXb3JrYXJvdW5kIGZvciBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzQzMzdcbiAgICAgICAgICAgIGlmIChpc1dpbmRvd3MgJiYgZXJyb3IuY29kZSA9PT0gJ0VQRVJNJykge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZkID0gYXdhaXQgb3BlbihwYXRoLCAncicpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RFcnIoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicm9hZGNhc3RFcnIoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29udCA9IHtcbiAgICAgICAgICAgIGxpc3RlbmVyczogbGlzdGVuZXIsXG4gICAgICAgICAgICBlcnJIYW5kbGVyczogZXJySGFuZGxlcixcbiAgICAgICAgICAgIHJhd0VtaXR0ZXJzOiByYXdFbWl0dGVyLFxuICAgICAgICAgICAgd2F0Y2hlcixcbiAgICAgICAgfTtcbiAgICAgICAgRnNXYXRjaEluc3RhbmNlcy5zZXQoZnVsbFBhdGgsIGNvbnQpO1xuICAgIH1cbiAgICAvLyBjb25zdCBpbmRleCA9IGNvbnQubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgIC8vIHJlbW92ZXMgdGhpcyBpbnN0YW5jZSdzIGxpc3RlbmVycyBhbmQgY2xvc2VzIHRoZSB1bmRlcmx5aW5nIGZzX3dhdGNoXG4gICAgLy8gaW5zdGFuY2UgaWYgdGhlcmUgYXJlIG5vIG1vcmUgbGlzdGVuZXJzIGxlZnRcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkZWxGcm9tU2V0KGNvbnQsIEtFWV9MSVNURU5FUlMsIGxpc3RlbmVyKTtcbiAgICAgICAgZGVsRnJvbVNldChjb250LCBLRVlfRVJSLCBlcnJIYW5kbGVyKTtcbiAgICAgICAgZGVsRnJvbVNldChjb250LCBLRVlfUkFXLCByYXdFbWl0dGVyKTtcbiAgICAgICAgaWYgKGlzRW1wdHlTZXQoY29udC5saXN0ZW5lcnMpKSB7XG4gICAgICAgICAgICAvLyBDaGVjayB0byBwcm90ZWN0IGFnYWluc3QgaXNzdWUgZ2gtNzMwLlxuICAgICAgICAgICAgLy8gaWYgKGNvbnQud2F0Y2hlclVudXNhYmxlKSB7XG4gICAgICAgICAgICBjb250LndhdGNoZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIEZzV2F0Y2hJbnN0YW5jZXMuZGVsZXRlKGZ1bGxQYXRoKTtcbiAgICAgICAgICAgIEhBTkRMRVJfS0VZUy5mb3JFYWNoKGNsZWFySXRlbShjb250KSk7XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICBjb250LndhdGNoZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBPYmplY3QuZnJlZXplKGNvbnQpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG4vLyBmc193YXRjaEZpbGUgaGVscGVyc1xuLy8gb2JqZWN0IHRvIGhvbGQgcGVyLXByb2Nlc3MgZnNfd2F0Y2hGaWxlIGluc3RhbmNlc1xuLy8gKG1heSBiZSBzaGFyZWQgYWNyb3NzIGNob2tpZGFyIEZTV2F0Y2hlciBpbnN0YW5jZXMpXG5jb25zdCBGc1dhdGNoRmlsZUluc3RhbmNlcyA9IG5ldyBNYXAoKTtcbi8qKlxuICogSW5zdGFudGlhdGVzIHRoZSBmc193YXRjaEZpbGUgaW50ZXJmYWNlIG9yIGJpbmRzIGxpc3RlbmVyc1xuICogdG8gYW4gZXhpc3Rpbmcgb25lIGNvdmVyaW5nIHRoZSBzYW1lIGZpbGUgc3lzdGVtIGVudHJ5XG4gKiBAcGFyYW0gcGF0aCB0byBiZSB3YXRjaGVkXG4gKiBAcGFyYW0gZnVsbFBhdGggYWJzb2x1dGUgcGF0aFxuICogQHBhcmFtIG9wdGlvbnMgb3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gZnNfd2F0Y2hGaWxlXG4gKiBAcGFyYW0gaGFuZGxlcnMgY29udGFpbmVyIGZvciBldmVudCBsaXN0ZW5lciBmdW5jdGlvbnNcbiAqIEByZXR1cm5zIGNsb3NlclxuICovXG5jb25zdCBzZXRGc1dhdGNoRmlsZUxpc3RlbmVyID0gKHBhdGgsIGZ1bGxQYXRoLCBvcHRpb25zLCBoYW5kbGVycykgPT4ge1xuICAgIGNvbnN0IHsgbGlzdGVuZXIsIHJhd0VtaXR0ZXIgfSA9IGhhbmRsZXJzO1xuICAgIGxldCBjb250ID0gRnNXYXRjaEZpbGVJbnN0YW5jZXMuZ2V0KGZ1bGxQYXRoKTtcbiAgICAvLyBsZXQgbGlzdGVuZXJzID0gbmV3IFNldCgpO1xuICAgIC8vIGxldCByYXdFbWl0dGVycyA9IG5ldyBTZXQoKTtcbiAgICBjb25zdCBjb3B0cyA9IGNvbnQgJiYgY29udC5vcHRpb25zO1xuICAgIGlmIChjb3B0cyAmJiAoY29wdHMucGVyc2lzdGVudCA8IG9wdGlvbnMucGVyc2lzdGVudCB8fCBjb3B0cy5pbnRlcnZhbCA+IG9wdGlvbnMuaW50ZXJ2YWwpKSB7XG4gICAgICAgIC8vIFwiVXBncmFkZVwiIHRoZSB3YXRjaGVyIHRvIHBlcnNpc3RlbmNlIG9yIGEgcXVpY2tlciBpbnRlcnZhbC5cbiAgICAgICAgLy8gVGhpcyBjcmVhdGVzIHNvbWUgdW5saWtlbHkgZWRnZSBjYXNlIGlzc3VlcyBpZiB0aGUgdXNlciBtaXhlc1xuICAgICAgICAvLyBzZXR0aW5ncyBpbiBhIHZlcnkgd2VpcmQgd2F5LCBidXQgc29sdmluZyBmb3IgdGhvc2UgY2FzZXNcbiAgICAgICAgLy8gZG9lc24ndCBzZWVtIHdvcnRod2hpbGUgZm9yIHRoZSBhZGRlZCBjb21wbGV4aXR5LlxuICAgICAgICAvLyBsaXN0ZW5lcnMgPSBjb250Lmxpc3RlbmVycztcbiAgICAgICAgLy8gcmF3RW1pdHRlcnMgPSBjb250LnJhd0VtaXR0ZXJzO1xuICAgICAgICB1bndhdGNoRmlsZShmdWxsUGF0aCk7XG4gICAgICAgIGNvbnQgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmIChjb250KSB7XG4gICAgICAgIGFkZEFuZENvbnZlcnQoY29udCwgS0VZX0xJU1RFTkVSUywgbGlzdGVuZXIpO1xuICAgICAgICBhZGRBbmRDb252ZXJ0KGNvbnQsIEtFWV9SQVcsIHJhd0VtaXR0ZXIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgICAgLy8gcmF3RW1pdHRlcnMuYWRkKHJhd0VtaXR0ZXIpO1xuICAgICAgICBjb250ID0ge1xuICAgICAgICAgICAgbGlzdGVuZXJzOiBsaXN0ZW5lcixcbiAgICAgICAgICAgIHJhd0VtaXR0ZXJzOiByYXdFbWl0dGVyLFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgICAgIHdhdGNoZXI6IHdhdGNoRmlsZShmdWxsUGF0aCwgb3B0aW9ucywgKGN1cnIsIHByZXYpID0+IHtcbiAgICAgICAgICAgICAgICBmb3JlYWNoKGNvbnQucmF3RW1pdHRlcnMsIChyYXdFbWl0dGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJhd0VtaXR0ZXIoRVYuQ0hBTkdFLCBmdWxsUGF0aCwgeyBjdXJyLCBwcmV2IH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJtdGltZSA9IGN1cnIubXRpbWVNcztcbiAgICAgICAgICAgICAgICBpZiAoY3Vyci5zaXplICE9PSBwcmV2LnNpemUgfHwgY3Vycm10aW1lID4gcHJldi5tdGltZU1zIHx8IGN1cnJtdGltZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKGNvbnQubGlzdGVuZXJzLCAobGlzdGVuZXIpID0+IGxpc3RlbmVyKHBhdGgsIGN1cnIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICAgICAgRnNXYXRjaEZpbGVJbnN0YW5jZXMuc2V0KGZ1bGxQYXRoLCBjb250KTtcbiAgICB9XG4gICAgLy8gY29uc3QgaW5kZXggPSBjb250Lmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAvLyBSZW1vdmVzIHRoaXMgaW5zdGFuY2UncyBsaXN0ZW5lcnMgYW5kIGNsb3NlcyB0aGUgdW5kZXJseWluZyBmc193YXRjaEZpbGVcbiAgICAvLyBpbnN0YW5jZSBpZiB0aGVyZSBhcmUgbm8gbW9yZSBsaXN0ZW5lcnMgbGVmdC5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICBkZWxGcm9tU2V0KGNvbnQsIEtFWV9MSVNURU5FUlMsIGxpc3RlbmVyKTtcbiAgICAgICAgZGVsRnJvbVNldChjb250LCBLRVlfUkFXLCByYXdFbWl0dGVyKTtcbiAgICAgICAgaWYgKGlzRW1wdHlTZXQoY29udC5saXN0ZW5lcnMpKSB7XG4gICAgICAgICAgICBGc1dhdGNoRmlsZUluc3RhbmNlcy5kZWxldGUoZnVsbFBhdGgpO1xuICAgICAgICAgICAgdW53YXRjaEZpbGUoZnVsbFBhdGgpO1xuICAgICAgICAgICAgY29udC5vcHRpb25zID0gY29udC53YXRjaGVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgT2JqZWN0LmZyZWV6ZShjb250KTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuLyoqXG4gKiBAbWl4aW5cbiAqL1xuZXhwb3J0IGNsYXNzIE5vZGVGc0hhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKGZzVykge1xuICAgICAgICB0aGlzLmZzdyA9IGZzVztcbiAgICAgICAgdGhpcy5fYm91bmRIYW5kbGVFcnJvciA9IChlcnJvcikgPT4gZnNXLl9oYW5kbGVFcnJvcihlcnJvcik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdhdGNoIGZpbGUgZm9yIGNoYW5nZXMgd2l0aCBmc193YXRjaEZpbGUgb3IgZnNfd2F0Y2guXG4gICAgICogQHBhcmFtIHBhdGggdG8gZmlsZSBvciBkaXJcbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgb24gZnMgY2hhbmdlXG4gICAgICogQHJldHVybnMgY2xvc2VyIGZvciB0aGUgd2F0Y2hlciBpbnN0YW5jZVxuICAgICAqL1xuICAgIF93YXRjaFdpdGhOb2RlRnMocGF0aCwgbGlzdGVuZXIpIHtcbiAgICAgICAgY29uc3Qgb3B0cyA9IHRoaXMuZnN3Lm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGRpcmVjdG9yeSA9IHN5c1BhdGguZGlybmFtZShwYXRoKTtcbiAgICAgICAgY29uc3QgYmFzZW5hbWUgPSBzeXNQYXRoLmJhc2VuYW1lKHBhdGgpO1xuICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmZzdy5fZ2V0V2F0Y2hlZERpcihkaXJlY3RvcnkpO1xuICAgICAgICBwYXJlbnQuYWRkKGJhc2VuYW1lKTtcbiAgICAgICAgY29uc3QgYWJzb2x1dGVQYXRoID0gc3lzUGF0aC5yZXNvbHZlKHBhdGgpO1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgcGVyc2lzdGVudDogb3B0cy5wZXJzaXN0ZW50LFxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWxpc3RlbmVyKVxuICAgICAgICAgICAgbGlzdGVuZXIgPSBFTVBUWV9GTjtcbiAgICAgICAgbGV0IGNsb3NlcjtcbiAgICAgICAgaWYgKG9wdHMudXNlUG9sbGluZykge1xuICAgICAgICAgICAgY29uc3QgZW5hYmxlQmluID0gb3B0cy5pbnRlcnZhbCAhPT0gb3B0cy5iaW5hcnlJbnRlcnZhbDtcbiAgICAgICAgICAgIG9wdGlvbnMuaW50ZXJ2YWwgPSBlbmFibGVCaW4gJiYgaXNCaW5hcnlQYXRoKGJhc2VuYW1lKSA/IG9wdHMuYmluYXJ5SW50ZXJ2YWwgOiBvcHRzLmludGVydmFsO1xuICAgICAgICAgICAgY2xvc2VyID0gc2V0RnNXYXRjaEZpbGVMaXN0ZW5lcihwYXRoLCBhYnNvbHV0ZVBhdGgsIG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcixcbiAgICAgICAgICAgICAgICByYXdFbWl0dGVyOiB0aGlzLmZzdy5fZW1pdFJhdyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xvc2VyID0gc2V0RnNXYXRjaExpc3RlbmVyKHBhdGgsIGFic29sdXRlUGF0aCwgb3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGxpc3RlbmVyLFxuICAgICAgICAgICAgICAgIGVyckhhbmRsZXI6IHRoaXMuX2JvdW5kSGFuZGxlRXJyb3IsXG4gICAgICAgICAgICAgICAgcmF3RW1pdHRlcjogdGhpcy5mc3cuX2VtaXRSYXcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvc2VyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXYXRjaCBhIGZpbGUgYW5kIGVtaXQgYWRkIGV2ZW50IGlmIHdhcnJhbnRlZC5cbiAgICAgKiBAcmV0dXJucyBjbG9zZXIgZm9yIHRoZSB3YXRjaGVyIGluc3RhbmNlXG4gICAgICovXG4gICAgX2hhbmRsZUZpbGUoZmlsZSwgc3RhdHMsIGluaXRpYWxBZGQpIHtcbiAgICAgICAgaWYgKHRoaXMuZnN3LmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpcm5hbWUgPSBzeXNQYXRoLmRpcm5hbWUoZmlsZSk7XG4gICAgICAgIGNvbnN0IGJhc2VuYW1lID0gc3lzUGF0aC5iYXNlbmFtZShmaWxlKTtcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5mc3cuX2dldFdhdGNoZWREaXIoZGlybmFtZSk7XG4gICAgICAgIC8vIHN0YXRzIGlzIGFsd2F5cyBwcmVzZW50XG4gICAgICAgIGxldCBwcmV2U3RhdHMgPSBzdGF0cztcbiAgICAgICAgLy8gaWYgdGhlIGZpbGUgaXMgYWxyZWFkeSBiZWluZyB3YXRjaGVkLCBkbyBub3RoaW5nXG4gICAgICAgIGlmIChwYXJlbnQuaGFzKGJhc2VuYW1lKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBhc3luYyAocGF0aCwgbmV3U3RhdHMpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mc3cuX3Rocm90dGxlKFRIUk9UVExFX01PREVfV0FUQ0gsIGZpbGUsIDUpKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmICghbmV3U3RhdHMgfHwgbmV3U3RhdHMubXRpbWVNcyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRzID0gYXdhaXQgc3RhdChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZnN3LmNsb3NlZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBjaGFuZ2UgZXZlbnQgd2FzIG5vdCBmaXJlZCBiZWNhdXNlIG9mIGNoYW5nZWQgb25seSBhY2Nlc3NUaW1lLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdCA9IG5ld1N0YXRzLmF0aW1lTXM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG10ID0gbmV3U3RhdHMubXRpbWVNcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdCB8fCBhdCA8PSBtdCB8fCBtdCAhPT0gcHJldlN0YXRzLm10aW1lTXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9lbWl0KEVWLkNIQU5HRSwgZmlsZSwgbmV3U3RhdHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaXNNYWNvcyB8fCBpc0xpbnV4IHx8IGlzRnJlZUJTRCkgJiYgcHJldlN0YXRzLmlubyAhPT0gbmV3U3RhdHMuaW5vKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZzdy5fY2xvc2VGaWxlKHBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlN0YXRzID0gbmV3U3RhdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjbG9zZXIgPSB0aGlzLl93YXRjaFdpdGhOb2RlRnMoZmlsZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZzdy5fYWRkUGF0aENsb3NlcihwYXRoLCBjbG9zZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlN0YXRzID0gbmV3U3RhdHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpeCBpc3N1ZXMgd2hlcmUgbXRpbWUgaXMgbnVsbCBidXQgZmlsZSBpcyBzdGlsbCBwcmVzZW50XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9yZW1vdmUoZGlybmFtZSwgYmFzZW5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBhZGQgaXMgYWJvdXQgdG8gYmUgZW1pdHRlZCBpZiBmaWxlIG5vdCBhbHJlYWR5IHRyYWNrZWQgaW4gcGFyZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChwYXJlbnQuaGFzKGJhc2VuYW1lKSkge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRoYXQgY2hhbmdlIGV2ZW50IHdhcyBub3QgZmlyZWQgYmVjYXVzZSBvZiBjaGFuZ2VkIG9ubHkgYWNjZXNzVGltZS5cbiAgICAgICAgICAgICAgICBjb25zdCBhdCA9IG5ld1N0YXRzLmF0aW1lTXM7XG4gICAgICAgICAgICAgICAgY29uc3QgbXQgPSBuZXdTdGF0cy5tdGltZU1zO1xuICAgICAgICAgICAgICAgIGlmICghYXQgfHwgYXQgPD0gbXQgfHwgbXQgIT09IHByZXZTdGF0cy5tdGltZU1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9lbWl0KEVWLkNIQU5HRSwgZmlsZSwgbmV3U3RhdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2U3RhdHMgPSBuZXdTdGF0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8ga2ljayBvZmYgdGhlIHdhdGNoZXJcbiAgICAgICAgY29uc3QgY2xvc2VyID0gdGhpcy5fd2F0Y2hXaXRoTm9kZUZzKGZpbGUsIGxpc3RlbmVyKTtcbiAgICAgICAgLy8gZW1pdCBhbiBhZGQgZXZlbnQgaWYgd2UncmUgc3VwcG9zZWQgdG9cbiAgICAgICAgaWYgKCEoaW5pdGlhbEFkZCAmJiB0aGlzLmZzdy5vcHRpb25zLmlnbm9yZUluaXRpYWwpICYmIHRoaXMuZnN3Ll9pc250SWdub3JlZChmaWxlKSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZzdy5fdGhyb3R0bGUoRVYuQURELCBmaWxlLCAwKSlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmZzdy5fZW1pdChFVi5BREQsIGZpbGUsIHN0YXRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xvc2VyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgc3ltbGlua3MgZW5jb3VudGVyZWQgd2hpbGUgcmVhZGluZyBhIGRpci5cbiAgICAgKiBAcGFyYW0gZW50cnkgcmV0dXJuZWQgYnkgcmVhZGRpcnBcbiAgICAgKiBAcGFyYW0gZGlyZWN0b3J5IHBhdGggb2YgZGlyIGJlaW5nIHJlYWRcbiAgICAgKiBAcGFyYW0gcGF0aCBvZiB0aGlzIGl0ZW1cbiAgICAgKiBAcGFyYW0gaXRlbSBiYXNlbmFtZSBvZiB0aGlzIGl0ZW1cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIG5vIG1vcmUgcHJvY2Vzc2luZyBpcyBuZWVkZWQgZm9yIHRoaXMgZW50cnkuXG4gICAgICovXG4gICAgYXN5bmMgX2hhbmRsZVN5bWxpbmsoZW50cnksIGRpcmVjdG9yeSwgcGF0aCwgaXRlbSkge1xuICAgICAgICBpZiAodGhpcy5mc3cuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZnVsbCA9IGVudHJ5LmZ1bGxQYXRoO1xuICAgICAgICBjb25zdCBkaXIgPSB0aGlzLmZzdy5fZ2V0V2F0Y2hlZERpcihkaXJlY3RvcnkpO1xuICAgICAgICBpZiAoIXRoaXMuZnN3Lm9wdGlvbnMuZm9sbG93U3ltbGlua3MpIHtcbiAgICAgICAgICAgIC8vIHdhdGNoIHN5bWxpbmsgZGlyZWN0bHkgKGRvbid0IGZvbGxvdykgYW5kIGRldGVjdCBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzLmZzdy5faW5jclJlYWR5Q291bnQoKTtcbiAgICAgICAgICAgIGxldCBsaW5rUGF0aDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbGlua1BhdGggPSBhd2FpdCBmc3JlYWxwYXRoKHBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZzdy5fZW1pdFJlYWR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5mc3cuY2xvc2VkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGlmIChkaXIuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnN3Ll9zeW1saW5rUGF0aHMuZ2V0KGZ1bGwpICE9PSBsaW5rUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZzdy5fc3ltbGlua1BhdGhzLnNldChmdWxsLCBsaW5rUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9lbWl0KEVWLkNIQU5HRSwgcGF0aCwgZW50cnkuc3RhdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRpci5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5mc3cuX3N5bWxpbmtQYXRocy5zZXQoZnVsbCwgbGlua1BhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9lbWl0KEVWLkFERCwgcGF0aCwgZW50cnkuc3RhdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5mc3cuX2VtaXRSZWFkeSgpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZG9uJ3QgZm9sbG93IHRoZSBzYW1lIHN5bWxpbmsgbW9yZSB0aGFuIG9uY2VcbiAgICAgICAgaWYgKHRoaXMuZnN3Ll9zeW1saW5rUGF0aHMuaGFzKGZ1bGwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZzdy5fc3ltbGlua1BhdGhzLnNldChmdWxsLCB0cnVlKTtcbiAgICB9XG4gICAgX2hhbmRsZVJlYWQoZGlyZWN0b3J5LCBpbml0aWFsQWRkLCB3aCwgdGFyZ2V0LCBkaXIsIGRlcHRoLCB0aHJvdHRsZXIpIHtcbiAgICAgICAgLy8gTm9ybWFsaXplIHRoZSBkaXJlY3RvcnkgbmFtZSBvbiBXaW5kb3dzXG4gICAgICAgIGRpcmVjdG9yeSA9IHN5c1BhdGguam9pbihkaXJlY3RvcnksICcnKTtcbiAgICAgICAgdGhyb3R0bGVyID0gdGhpcy5mc3cuX3Rocm90dGxlKCdyZWFkZGlyJywgZGlyZWN0b3J5LCAxMDAwKTtcbiAgICAgICAgaWYgKCF0aHJvdHRsZXIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5mc3cuX2dldFdhdGNoZWREaXIod2gucGF0aCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBuZXcgU2V0KCk7XG4gICAgICAgIGxldCBzdHJlYW0gPSB0aGlzLmZzdy5fcmVhZGRpcnAoZGlyZWN0b3J5LCB7XG4gICAgICAgICAgICBmaWxlRmlsdGVyOiAoZW50cnkpID0+IHdoLmZpbHRlclBhdGgoZW50cnkpLFxuICAgICAgICAgICAgZGlyZWN0b3J5RmlsdGVyOiAoZW50cnkpID0+IHdoLmZpbHRlckRpcihlbnRyeSksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXN0cmVhbSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3RyZWFtXG4gICAgICAgICAgICAub24oU1RSX0RBVEEsIGFzeW5jIChlbnRyeSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuZnN3LmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHN0cmVhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZW50cnkucGF0aDtcbiAgICAgICAgICAgIGxldCBwYXRoID0gc3lzUGF0aC5qb2luKGRpcmVjdG9yeSwgaXRlbSk7XG4gICAgICAgICAgICBjdXJyZW50LmFkZChpdGVtKTtcbiAgICAgICAgICAgIGlmIChlbnRyeS5zdGF0cy5pc1N5bWJvbGljTGluaygpICYmXG4gICAgICAgICAgICAgICAgKGF3YWl0IHRoaXMuX2hhbmRsZVN5bWxpbmsoZW50cnksIGRpcmVjdG9yeSwgcGF0aCwgaXRlbSkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZnN3LmNsb3NlZCkge1xuICAgICAgICAgICAgICAgIHN0cmVhbSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaWxlcyB0aGF0IHByZXNlbnQgaW4gY3VycmVudCBkaXJlY3Rvcnkgc25hcHNob3RcbiAgICAgICAgICAgIC8vIGJ1dCBhYnNlbnQgaW4gcHJldmlvdXMgYXJlIGFkZGVkIHRvIHdhdGNoIGxpc3QgYW5kXG4gICAgICAgICAgICAvLyBlbWl0IGBhZGRgIGV2ZW50LlxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IHRhcmdldCB8fCAoIXRhcmdldCAmJiAhcHJldmlvdXMuaGFzKGl0ZW0pKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9pbmNyUmVhZHlDb3VudCgpO1xuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSByZWxhdGl2ZW5lc3Mgb2YgcGF0aCBpcyBwcmVzZXJ2ZWQgaW4gY2FzZSBvZiB3YXRjaGVyIHJldXNlXG4gICAgICAgICAgICAgICAgcGF0aCA9IHN5c1BhdGguam9pbihkaXIsIHN5c1BhdGgucmVsYXRpdmUoZGlyLCBwYXRoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkVG9Ob2RlRnMocGF0aCwgaW5pdGlhbEFkZCwgd2gsIGRlcHRoICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAub24oRVYuRVJST1IsIHRoaXMuX2JvdW5kSGFuZGxlRXJyb3IpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzdHJlYW0pXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdCgpO1xuICAgICAgICAgICAgc3RyZWFtLm9uY2UoU1RSX0VORCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZzdy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHdhc1Rocm90dGxlZCA9IHRocm90dGxlciA/IHRocm90dGxlci5jbGVhcigpIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIC8vIEZpbGVzIHRoYXQgYWJzZW50IGluIGN1cnJlbnQgZGlyZWN0b3J5IHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gYnV0IHByZXNlbnQgaW4gcHJldmlvdXMgZW1pdCBgcmVtb3ZlYCBldmVudFxuICAgICAgICAgICAgICAgIC8vIGFuZCBhcmUgcmVtb3ZlZCBmcm9tIEB3YXRjaGVkW2RpcmVjdG9yeV0uXG4gICAgICAgICAgICAgICAgcHJldmlvdXNcbiAgICAgICAgICAgICAgICAgICAgLmdldENoaWxkcmVuKClcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gZGlyZWN0b3J5ICYmICFjdXJyZW50LmhhcyhpdGVtKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZzdy5fcmVtb3ZlKGRpcmVjdG9yeSwgaXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RyZWFtID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIC8vIG9uZSBtb3JlIHRpbWUgZm9yIGFueSBtaXNzZWQgaW4gY2FzZSBjaGFuZ2VzIGNhbWUgaW4gZXh0cmVtZWx5IHF1aWNrbHlcbiAgICAgICAgICAgICAgICBpZiAod2FzVGhyb3R0bGVkKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVSZWFkKGRpcmVjdG9yeSwgZmFsc2UsIHdoLCB0YXJnZXQsIGRpciwgZGVwdGgsIHRocm90dGxlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWQgZGlyZWN0b3J5IHRvIGFkZCAvIHJlbW92ZSBmaWxlcyBmcm9tIGBAd2F0Y2hlZGAgbGlzdCBhbmQgcmUtcmVhZCBpdCBvbiBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRpciBmcyBwYXRoXG4gICAgICogQHBhcmFtIHN0YXRzXG4gICAgICogQHBhcmFtIGluaXRpYWxBZGRcbiAgICAgKiBAcGFyYW0gZGVwdGggcmVsYXRpdmUgdG8gdXNlci1zdXBwbGllZCBwYXRoXG4gICAgICogQHBhcmFtIHRhcmdldCBjaGlsZCBwYXRoIHRhcmdldGVkIGZvciB3YXRjaFxuICAgICAqIEBwYXJhbSB3aCBDb21tb24gd2F0Y2ggaGVscGVycyBmb3IgdGhpcyBwYXRoXG4gICAgICogQHBhcmFtIHJlYWxwYXRoXG4gICAgICogQHJldHVybnMgY2xvc2VyIGZvciB0aGUgd2F0Y2hlciBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBhc3luYyBfaGFuZGxlRGlyKGRpciwgc3RhdHMsIGluaXRpYWxBZGQsIGRlcHRoLCB0YXJnZXQsIHdoLCByZWFscGF0aCkge1xuICAgICAgICBjb25zdCBwYXJlbnREaXIgPSB0aGlzLmZzdy5fZ2V0V2F0Y2hlZERpcihzeXNQYXRoLmRpcm5hbWUoZGlyKSk7XG4gICAgICAgIGNvbnN0IHRyYWNrZWQgPSBwYXJlbnREaXIuaGFzKHN5c1BhdGguYmFzZW5hbWUoZGlyKSk7XG4gICAgICAgIGlmICghKGluaXRpYWxBZGQgJiYgdGhpcy5mc3cub3B0aW9ucy5pZ25vcmVJbml0aWFsKSAmJiAhdGFyZ2V0ICYmICF0cmFja2VkKSB7XG4gICAgICAgICAgICB0aGlzLmZzdy5fZW1pdChFVi5BRERfRElSLCBkaXIsIHN0YXRzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlbnN1cmUgZGlyIGlzIHRyYWNrZWQgKGhhcm1sZXNzIGlmIHJlZHVuZGFudClcbiAgICAgICAgcGFyZW50RGlyLmFkZChzeXNQYXRoLmJhc2VuYW1lKGRpcikpO1xuICAgICAgICB0aGlzLmZzdy5fZ2V0V2F0Y2hlZERpcihkaXIpO1xuICAgICAgICBsZXQgdGhyb3R0bGVyO1xuICAgICAgICBsZXQgY2xvc2VyO1xuICAgICAgICBjb25zdCBvRGVwdGggPSB0aGlzLmZzdy5vcHRpb25zLmRlcHRoO1xuICAgICAgICBpZiAoKG9EZXB0aCA9PSBudWxsIHx8IGRlcHRoIDw9IG9EZXB0aCkgJiYgIXRoaXMuZnN3Ll9zeW1saW5rUGF0aHMuaGFzKHJlYWxwYXRoKSkge1xuICAgICAgICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9oYW5kbGVSZWFkKGRpciwgaW5pdGlhbEFkZCwgd2gsIHRhcmdldCwgZGlyLCBkZXB0aCwgdGhyb3R0bGVyKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mc3cuY2xvc2VkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXIgPSB0aGlzLl93YXRjaFdpdGhOb2RlRnMoZGlyLCAoZGlyUGF0aCwgc3RhdHMpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBpZiBjdXJyZW50IGRpcmVjdG9yeSBpcyByZW1vdmVkLCBkbyBub3RoaW5nXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRzICYmIHN0YXRzLm10aW1lTXMgPT09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVSZWFkKGRpclBhdGgsIGZhbHNlLCB3aCwgdGFyZ2V0LCBkaXIsIGRlcHRoLCB0aHJvdHRsZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsb3NlcjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGFkZGVkIGZpbGUsIGRpcmVjdG9yeSwgb3IgZ2xvYiBwYXR0ZXJuLlxuICAgICAqIERlbGVnYXRlcyBjYWxsIHRvIF9oYW5kbGVGaWxlIC8gX2hhbmRsZURpciBhZnRlciBjaGVja3MuXG4gICAgICogQHBhcmFtIHBhdGggdG8gZmlsZSBvciBpclxuICAgICAqIEBwYXJhbSBpbml0aWFsQWRkIHdhcyB0aGUgZmlsZSBhZGRlZCBhdCB3YXRjaCBpbnN0YW50aWF0aW9uP1xuICAgICAqIEBwYXJhbSBwcmlvcldoIGRlcHRoIHJlbGF0aXZlIHRvIHVzZXItc3VwcGxpZWQgcGF0aFxuICAgICAqIEBwYXJhbSBkZXB0aCBDaGlsZCBwYXRoIGFjdHVhbGx5IHRhcmdldGVkIGZvciB3YXRjaFxuICAgICAqIEBwYXJhbSB0YXJnZXQgQ2hpbGQgcGF0aCBhY3R1YWxseSB0YXJnZXRlZCBmb3Igd2F0Y2hcbiAgICAgKi9cbiAgICBhc3luYyBfYWRkVG9Ob2RlRnMocGF0aCwgaW5pdGlhbEFkZCwgcHJpb3JXaCwgZGVwdGgsIHRhcmdldCkge1xuICAgICAgICBjb25zdCByZWFkeSA9IHRoaXMuZnN3Ll9lbWl0UmVhZHk7XG4gICAgICAgIGlmICh0aGlzLmZzdy5faXNJZ25vcmVkKHBhdGgpIHx8IHRoaXMuZnN3LmNsb3NlZCkge1xuICAgICAgICAgICAgcmVhZHkoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3aCA9IHRoaXMuZnN3Ll9nZXRXYXRjaEhlbHBlcnMocGF0aCk7XG4gICAgICAgIGlmIChwcmlvcldoKSB7XG4gICAgICAgICAgICB3aC5maWx0ZXJQYXRoID0gKGVudHJ5KSA9PiBwcmlvcldoLmZpbHRlclBhdGgoZW50cnkpO1xuICAgICAgICAgICAgd2guZmlsdGVyRGlyID0gKGVudHJ5KSA9PiBwcmlvcldoLmZpbHRlckRpcihlbnRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZXZhbHVhdGUgd2hhdCBpcyBhdCB0aGUgcGF0aCB3ZSdyZSBiZWluZyBhc2tlZCB0byB3YXRjaFxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBzdGF0TWV0aG9kc1t3aC5zdGF0TWV0aG9kXSh3aC53YXRjaFBhdGgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZnN3LmNsb3NlZClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5mc3cuX2lzSWdub3JlZCh3aC53YXRjaFBhdGgsIHN0YXRzKSkge1xuICAgICAgICAgICAgICAgIHJlYWR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZm9sbG93ID0gdGhpcy5mc3cub3B0aW9ucy5mb2xsb3dTeW1saW5rcztcbiAgICAgICAgICAgIGxldCBjbG9zZXI7XG4gICAgICAgICAgICBpZiAoc3RhdHMuaXNEaXJlY3RvcnkoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFic1BhdGggPSBzeXNQYXRoLnJlc29sdmUocGF0aCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IGZvbGxvdyA/IGF3YWl0IGZzcmVhbHBhdGgocGF0aCkgOiBwYXRoO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZzdy5jbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjbG9zZXIgPSBhd2FpdCB0aGlzLl9oYW5kbGVEaXIod2gud2F0Y2hQYXRoLCBzdGF0cywgaW5pdGlhbEFkZCwgZGVwdGgsIHRhcmdldCwgd2gsIHRhcmdldFBhdGgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZzdy5jbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZSB0aGlzIHN5bWxpbmsncyB0YXJnZXQgcGF0aFxuICAgICAgICAgICAgICAgIGlmIChhYnNQYXRoICE9PSB0YXJnZXRQYXRoICYmIHRhcmdldFBhdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZzdy5fc3ltbGlua1BhdGhzLnNldChhYnNQYXRoLCB0YXJnZXRQYXRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGF0cy5pc1N5bWJvbGljTGluaygpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IGZvbGxvdyA/IGF3YWl0IGZzcmVhbHBhdGgocGF0aCkgOiBwYXRoO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZzdy5jbG9zZWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBzeXNQYXRoLmRpcm5hbWUod2gud2F0Y2hQYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZzdy5fZ2V0V2F0Y2hlZERpcihwYXJlbnQpLmFkZCh3aC53YXRjaFBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZnN3Ll9lbWl0KEVWLkFERCwgd2gud2F0Y2hQYXRoLCBzdGF0cyk7XG4gICAgICAgICAgICAgICAgY2xvc2VyID0gYXdhaXQgdGhpcy5faGFuZGxlRGlyKHBhcmVudCwgc3RhdHMsIGluaXRpYWxBZGQsIGRlcHRoLCBwYXRoLCB3aCwgdGFyZ2V0UGF0aCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZnN3LmNsb3NlZClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlIHRoaXMgc3ltbGluaydzIHRhcmdldCBwYXRoXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFBhdGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmZzdy5fc3ltbGlua1BhdGhzLnNldChzeXNQYXRoLnJlc29sdmUocGF0aCksIHRhcmdldFBhdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNsb3NlciA9IHRoaXMuX2hhbmRsZUZpbGUod2gud2F0Y2hQYXRoLCBzdGF0cywgaW5pdGlhbEFkZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWFkeSgpO1xuICAgICAgICAgICAgaWYgKGNsb3NlcilcbiAgICAgICAgICAgICAgICB0aGlzLmZzdy5fYWRkUGF0aENsb3NlcihwYXRoLCBjbG9zZXIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuZnN3Ll9oYW5kbGVFcnJvcihlcnJvcikpIHtcbiAgICAgICAgICAgICAgICByZWFkeSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciAsIE5vdGljZSAsIEZpbGVTeXN0ZW1BZGFwdGVyfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0ICogYXMgb3MgZnJvbSAnb3MnO1xyXG5pbXBvcnQgeyBnZXRMYXRlc3REaXJVcmwsIHVybEVtaXR0ZXIgfSBmcm9tICcuL3NlcnZlcic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBwcmludCwgc2V0RGVidWcgfSBmcm9tICcuL21haW4nO1xyXG5jb25zdCBlbGVjdHJvbiA9IHJlcXVpcmUoJ2VsZWN0cm9uJylcclxuY29uc3QgY2xpcGJvYXJkID0gZWxlY3Ryb24uY2xpcGJvYXJkO1xyXG5cclxuLy8gaW1wb3J0IHsgY2xpcGJvYXJkIH0gZnJvbSAnZWxlY3Ryb24nO1xyXG4vLyBjb25zdCB7IHJlbW90ZSB9ID0gcmVxdWlyZSgnZWxlY3Ryb24nKTsgIFxyXG4vLyBkZWNsYXJlIGNvbnN0IGFwcDogYW55OyAvLyBcdTU4RjBcdTY2MEVcdTUxNjhcdTVDNDAgYXBwIFx1NTNEOFx1OTFDRlxyXG5cclxuLy8gXHU1OTA0XHU3NDA2XHU3Qzk4XHU4RDM0XHU0RThCXHU0RUY2XHU3Njg0XHU1MUZEXHU2NTcwXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVQYXN0ZUV2ZW50KGNsaXBib2FyZEV2ZW50OiBDbGlwYm9hcmRFdmVudCwgZWRpdG9yOiBFZGl0b3IsIHBvcnQ6IG51bWJlciwgcGx1Z2luSW5zdGFuY2U6IE15UGx1Z2luKSB7XHJcbiAgICAvLyBcdTgzQjdcdTUzRDZcdTUyNkFcdThEMzRcdTY3N0ZcdTRFMkRcdTc2ODRcdTdFQUZcdTY1ODdcdTY3MkNcdTUxODVcdTVCQjlcclxuICAgIGxldCBjbGlwYm9hcmRUZXh0ID0gY2xpcGJvYXJkRXZlbnQuY2xpcGJvYXJkRGF0YT8uZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xyXG4gICAgbGV0IGZpbGVQYXRoID0gXCJcIjtcclxuXHJcbiAgICBpZiAoY2xpcGJvYXJkRXZlbnQuY2xpcGJvYXJkRGF0YT8uZmlsZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY2xpcGJvYXJkRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zdCBmaWxlID0gY2xpcGJvYXJkRXZlbnQuY2xpcGJvYXJkRGF0YS5maWxlc1swXTtcclxuICAgICAgICBmaWxlUGF0aCA9IGVsZWN0cm9uLndlYlV0aWxzLmdldFBhdGhGb3JGaWxlKGZpbGUpO1xyXG5cclxuICAgICAgICBpZiAoIWZpbGVQYXRoKSB7IC8vIFx1NTk4Mlx1Njc5QyBmaWxlUGF0aCBcdTRFMERcdTVCNThcdTU3MjhcclxuICAgICAgICAgICAgY29uc3QgdGVtcERpciA9IG9zLnRtcGRpcigpOyAvLyBcdTRGN0ZcdTc1Mjggb3MudG1wZGlyKCkgXHU4M0I3XHU1M0Q2XHU0RTM0XHU2NUY2XHU3NkVFXHU1RjU1XHJcbiAgICAgICAgICAgIGNvbnN0IHVwbG9hZERpciA9IHBhdGguam9pbih0ZW1wRGlyLCAnb2JzaWRpYW4tdXBsb2FkcycpO1xyXG4gICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmModXBsb2FkRGlyKSkge1xyXG4gICAgICAgICAgICAgICAgZnMubWtkaXJTeW5jKHVwbG9hZERpcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFx1NUMwNlx1NjU4N1x1NEVGNlx1NEZERFx1NUI1OFx1NTIzMFx1NEUzNFx1NjVGNlx1NzZFRVx1NUY1NVxyXG4gICAgICAgICAgICBmaWxlUGF0aCA9IHBhdGguam9pbih1cGxvYWREaXIsIGZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdGaWxlIHBhdGgyOicsIGZpbGVQYXRoKTsgLy8gXHU1NzI4XHU2M0E3XHU1MjM2XHU1M0YwXHU2MjUzXHU1MzcwXHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcclxuICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgQnVmZmVyLmZyb20oYnVmZmVyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoY2xpcGJvYXJkVGV4dCAmJiAvXmh0dHBzPzpcXC9cXC9bXlxcc10rJC8udGVzdChjbGlwYm9hcmRUZXh0KSAmJiAhY2xpcGJvYXJkVGV4dC5zdGFydHNXaXRoKCdodHRwOi8vbG9jYWxob3N0JykpIHtcclxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY1ODdcdTY3MkNcdTUxODVcdTVCQjlcdTRFM0EgVVJMIFx1NEUxNFx1NEUwRFx1NEVFNSBodHRwOi8vbG9jYWxob3N0IFx1NUYwMFx1NTkzNFxyXG5cclxuICAgICAgICBpZiAocGx1Z2luSW5zdGFuY2Uuc2V0dGluZ3Mud2Vic2l0ZVVwbG9hZCkge1xyXG4gICAgICAgICAgICBjbGlwYm9hcmRFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7Y2xpcGJvYXJkVGV4dH1gO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdXBsb2FkQnlVcmwodXJsLCBwbHVnaW5JbnN0YW5jZSwgZWRpdG9yKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1VSTCB1cGxvYWRlZCBzdWNjZXNzZnVsbHksIHBsZWFzZSB3YWl0IGZvciBFYWdsZSBsaW5rIHVwZGF0ZScsIDEyMDAwKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1VSTCB1cGxvYWQgZmFpbGVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJpbnQoYENsaXBib2FyZCBoYXMgdGV4dDogJHtjbGlwYm9hcmRUZXh0fWApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKGZpbGVQYXRoKSB7XHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDIGZpbGVQYXRoIFx1NUI1OFx1NTcyOFxyXG4gICAgICAgIGNsaXBib2FyZEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKCFmaWxlUGF0aC5zdGFydHNXaXRoKHBsdWdpbkluc3RhbmNlLnNldHRpbmdzLmxpYnJhcnlQYXRoKSkge1xyXG4gICAgICAgICAgICBwcmludCgnZmlsZVBhdGgxOicsIGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDIGZpbGVQYXRoIFx1NEUwRFx1NUM1RVx1NEU4RSBwbHVnaW5JbnN0YW5jZS5zZXR0aW5ncy5saWJyYXJ5UGF0aCBcdTc2ODRcdTVCNTBcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVwbG9hZEJ5Q2xpcGJvYXJkKGZpbGVQYXRoLCBwbHVnaW5JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NzZEMVx1NTQyQyBVUkwgXHU2NkY0XHU2NUIwXHU0RThCXHU0RUY2XHJcbiAgICAgICAgICAgICAgICB1cmxFbWl0dGVyLm9uY2UoJ3VybFVwZGF0ZWQnLCAobGF0ZXN0RGlyVXJsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVFeHQgPSBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChbJy5wbmcnLCAnLmpwZycsICcuanBlZycsICcuZ2lmJywgJy53ZWJwJ10uaW5jbHVkZXMoZmlsZUV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYCFbJHtmaWxlTmFtZX18JHtwbHVnaW5JbnN0YW5jZS5zZXR0aW5ncy5pbWFnZVNpemV9XSgke2xhdGVzdERpclVybH0pYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VhZ2xlIGxpbmsgY29udmVydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYFske2ZpbGVOYW1lfV0oJHtsYXRlc3REaXJVcmx9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmlsZSB1cGxvYWQgZmFpbGVkLCBjaGVjayBpZiBFYWdsZSBpcyBydW5uaW5nJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTUgZmlsZVBhdGggXHU0RTJEXHU2NjJGXHU1NDI2XHU1MzA1XHU1NDJCICdpbWFnZXNcXHh4eHh4eC5pbmZvJyBcdTZBMjFcdTVGMEZcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBmaWxlUGF0aC5tYXRjaCgvaW1hZ2VzXFxcXFteXFxcXF0rXFwuaW5mby8pO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcGF0aC5iYXNlbmFtZShmaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlRXh0ID0gcGF0aC5leHRuYW1lKGZpbGVQYXRoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkVGV4dDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVybFBhdGggPSBtYXRjaFswXS5yZXBsYWNlKC9cXFxcL2csICcvJyk7IC8vIFx1NUMwNlx1NTNDRFx1NjU5Q1x1Njc2MFx1NjZGRlx1NjM2Mlx1NEUzQVx1NkI2M1x1NjU5Q1x1Njc2MFxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChbJy5wbmcnLCAnLmpwZycsICcuanBlZyddLmluY2x1ZGVzKGZpbGVFeHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpcGJvYXJkRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGV4dCA9IGAhWyR7ZmlsZU5hbWV9fCR7cGx1Z2luSW5zdGFuY2Uuc2V0dGluZ3MuaW1hZ2VTaXplfV0oaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9LyR7dXJsUGF0aH0pYDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpcGJvYXJkRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkVGV4dCA9IGBbJHtmaWxlTmFtZX1dKGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS8ke3VybFBhdGh9KWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbih1cGRhdGVkVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFYWdsZSBsaW5rIGNvbnZlcnRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm9uLUVhZ2xlIGxpbmsnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTI2QVx1OEQzNFx1Njc3Rlx1NTE4NVx1NUJCOVx1NjYyRlx1NTQyNlx1NEUzQUVhZ2xlXHU5NEZFXHU2M0E1XHJcbiAgICAgICAgLy8gaWYgKC9lYWdsZTpcXC9cXC9pdGVtXFwvKFxcdyspLy50ZXN0KGNsaXBib2FyZFRleHQpKSB7XHJcbiAgICAgICAgLy8gICAgIGNsaXBib2FyZC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIC8vICAgICBjb25zdCB1cGRhdGVkVGV4dCA9IGNsaXBib2FyZFRleHQucmVwbGFjZSgvZWFnbGU6XFwvXFwvaXRlbVxcLyhcXHcrKS9nLCAobWF0Y2gsIHAxKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gYCFbXShodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vaW1hZ2VzLyR7cDF9LmluZm8pYDtcclxuICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHVwZGF0ZWRUZXh0KTtcclxuICAgICAgICAvLyAgICAgbmV3IE5vdGljZSgnRWFnbGVcdTk0RkVcdTYzQTVcdTVERjJcdThGNkNcdTYzNjInKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU5NzVFXHU1QzQwXHU1N0RGXHU3RjUxXHU3Njg0VVJMXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1MjZBXHU4RDM0XHU2NzdGXHU1MTg1XHU1QkI5XHJcbiAgICAgICAgLy8gZWxzZSBpZiAob3MgPT09IFwid2luMzJcIikge1xyXG4gICAgICAgIC8vICAgICBjb25zdCByYXdGaWxlUGF0aCA9IGNsaXBib2FyZC5yZWFkQnVmZmVyKFwiRmlsZU5hbWVXXCIpO1xyXG4gICAgICAgIC8vICAgICBmaWxlUGF0aCA9IHJhd0ZpbGVQYXRoLnRvU3RyaW5nKCd1Y3MyJykucmVwbGFjZShuZXcgUmVnRXhwKFN0cmluZy5mcm9tQ2hhckNvZGUoMCksIFwiZ1wiKSwgXCJcIik7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmIChvcyA9PT0gXCJkYXJ3aW5cIikge1xyXG4gICAgICAgIC8vICAgICBmaWxlUGF0aCA9IGNsaXBib2FyZC5yZWFkKFwicHVibGljLmZpbGUtdXJsXCIpLnJlcGxhY2UoXCJmaWxlOi8vXCIsIFwiXCIpO1xyXG4gICAgICAgIC8vIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgIGZpbGVQYXRoID0gXCJcIjsgLy8gTGludXggXHU2MjE2XHU1MTc2XHU0RUQ2XHU3Q0ZCXHU3RURGXHU3Njg0XHU1OTA0XHU3NDA2XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTI2QVx1OEQzNFx1Njc3Rlx1NTE4NVx1NUJCOVxyXG4gICAgICAgIFxyXG4vLyBcdTRGN0ZcdTc1MjhBUElcdTRFMEFcdTRGMjBcdTUyNkFcdThEMzRcdTY3N0ZcdTRFMkRcdTc2ODRcdTU2RkVcdTcyNDdcclxuYXN5bmMgZnVuY3Rpb24gdXBsb2FkQnlDbGlwYm9hcmQoZmlsZVBhdGg6IHN0cmluZywgcGx1Z2luSW5zdGFuY2U6IE15UGx1Z2luKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAvLyBcdTRFQ0VcdTYzRDJcdTRFRjZcdTVCOUVcdTRGOEJcdTc2ODQgc2V0dGluZ3MgXHU0RTJEXHU4M0I3XHU1M0Q2IGZvbGRlcklkXHJcbiAgICBjb25zdCBmb2xkZXJJZCA9IHBsdWdpbkluc3RhbmNlLnNldHRpbmdzLmZvbGRlcklkIHx8IFwiXCI7XHJcblxyXG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkY3XHU2QzQyXHU2NTcwXHU2MzZFXHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIFwicGF0aFwiOiBmaWxlUGF0aCwgLy8gXHU3NkY0XHU2M0E1XHU0RjdGXHU3NTI4XHU0RjIwXHU1MTY1XHU3Njg0XHU2NTg3XHU0RUY2XHU4REVGXHU1Rjg0XHJcbiAgICAgICAgXCJuYW1lXCI6IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpLCAvLyBcdTRFQ0VcdThERUZcdTVGODRcdTRFMkRcdTYzRDBcdTUzRDZcdTY1ODdcdTRFRjZcdTU0MERcclxuICAgICAgICBcImZvbGRlcklkXCI6IGZvbGRlcklkLFxyXG4gICAgICAgIC8vIFwidG9rZW5cIjogXCI1OGY3ZWNkYS0yNTBmLTQwNDMtOGFlMC1jZDExZDY3M2Y2ODBcIiAvLyBcdThCRjdcdTY2RkZcdTYzNjJcdTRFM0FcdTVCOUVcdTk2NDVcdTc2ODRBUElcdTRFRTRcdTcyNENcclxuICAgIH07XHJcblxyXG4gICAgLy8gXHU2Nzg0XHU1RUZBXHU4QkY3XHU2QzQyXHU5MDA5XHU5ODc5XHJcbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSxcclxuICAgICAgICByZWRpcmVjdDogJ2ZvbGxvdycgYXMgUmVxdWVzdFJlZGlyZWN0XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFx1NTNEMVx1OTAwMVx1OEJGN1x1NkM0Mlx1NTIzMFx1NjMwN1x1NUI5QVx1NzY4NEFQSVx1N0FFRlx1NzBCOVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6NDE1OTUvYXBpL2l0ZW0vYWRkRnJvbVBhdGhcIiwgcmVxdWVzdE9wdGlvbnMpO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VwbG9hZCBGYWlsZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBcdTRFMERcdTk3MDBcdTg5ODFcdTU5MDRcdTc0MDZcdThGRDRcdTU2REVcdTUwM0NcdUZGMENcdTc2RjRcdTYzQTVcdThGRDRcdTU2REVcclxuICAgIHJldHVybjsgLy8gXHU2MjE2XHU4MDA1IHJldHVybiBudWxsOyBcdTU5ODJcdTY3OUNcdTk3MDBcdTg5ODFcdThGRDRcdTU2REVcdTRFMDBcdTRFMkFcdTUwM0NcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwbG9hZEJ5VXJsKHVybDogc3RyaW5nLCBwbHVnaW5JbnN0YW5jZTogTXlQbHVnaW4sIGVkaXRvcjogRWRpdG9yKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBmb2xkZXJJZCA9IHBsdWdpbkluc3RhbmNlLnNldHRpbmdzLmZvbGRlcklkIHx8IFwiXCI7XHJcbiAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgIFwidXJsXCI6IHVybCxcclxuICAgICAgICAvLyBcIm5hbWVcIjogXCJcdTMwQTJcdTMwRUJcdTMwQzhcdTMwRUFcdTMwQTJcdUZGNjVcdTMwQURcdTMwRTNcdTMwQjlcdTMwQkZcdTMwRkNcIixcclxuICAgICAgICAvLyBcInRhZ3NcIjogW1wiRkdPXCIsIFwiXHUzMEEyXHUzMEVCXHUzMEM4XHUzMEVBXHUzMEEyXHUzMEZCXHUzMEFEXHUzMEUzXHUzMEI5XHUzMEJGXHUzMEZDXCJdLFxyXG4gICAgICAgIFwiZm9sZGVySWRcIjogZm9sZGVySWRcclxuICAgIH07XHJcblxyXG4gICAgcHJpbnQoJ1JlcXVlc3QgZGF0YTonLCBkYXRhKTsgLy8gXHU4QzAzXHU4QkQ1XHU4RjkzXHU1MUZBXHU4QkY3XHU2QzQyXHU2NTcwXHU2MzZFXHJcblxyXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgcmVkaXJlY3Q6ICdmb2xsb3cnIGFzIFJlcXVlc3RSZWRpcmVjdFxyXG4gICAgfTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjQxNTk1L2FwaS9pdGVtL2FkZEJvb2ttYXJrXCIsIHJlcXVlc3RPcHRpb25zKTtcclxuXHJcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvclJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVzcG9uc2U6JywgZXJyb3JSZXN1bHQpOyAvLyBcdThGOTNcdTUxRkFcdTk1MTlcdThCRUZcdTU0Q0RcdTVFOTRcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVcGxvYWQgRmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTVFRjZcdTY1RjZcdTdCNDlcdTVGODVcclxuICAgICAgICAvLyBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpOyAvLyBcdTVFRjZcdTY1RjYyXHU3OUQyXHJcblxyXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQyBVUkwgXHU2NkY0XHU2NUIwXHU0RThCXHU0RUY2XHJcbiAgICAgICAgdXJsRW1pdHRlci5vbmNlKCd1cmxVcGRhdGVkJywgYXN5bmMgKGxhdGVzdERpclVybDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFx1NjNEMFx1NTNENiBJRFxyXG4gICAgICAgICAgICBwcmludCgnbGF0ZXN0RGlyVXJsOicsIGxhdGVzdERpclVybCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGF0ZXN0RGlyVXJsLm1hdGNoKC9pbWFnZXNcXC8oW14vXSspXFwuaW5mby8pO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlSWQgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpOyAgIFxyXG4gICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4QkY3XHU2QzQyXHU5MDA5XHU5ODc5XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0OiAnZm9sbG93JyBhcyBSZXF1ZXN0UmVkaXJlY3QgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1M0QxXHU5MDAxXHU4QkY3XHU2QzQyXHU0RUU1XHU4M0I3XHU1M0Q2XHU2NTg3XHU0RUY2XHU0RkUxXHU2MDZGXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo0MTU5NS9hcGkvaXRlbS9pbmZvP2lkPSR7ZmlsZUlkfWAsIHJlcXVlc3RPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcInN1Y2Nlc3NcIiAmJiByZXN1bHQuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHJlc3VsdC5kYXRhLm5hbWUgKyBcIi5cIiArIHJlc3VsdC5kYXRhLmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgZmlsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU3RjE2XHU4RjkxXHU1NjY4XHU0RTJEXHU3Njg0XHU5NEZFXHU2M0E1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGBbJHtmaWxlTmFtZX1dKCR7bGF0ZXN0RGlyVXJsfSlgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmludChgRmFpbGVkIHRvIGdldCBmaWxlIGluZm9ybWF0aW9uOiAke3Jlc3VsdH1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW50KGBSZXF1ZXN0IGVycm9yOiAke2Vycm9yfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJpbnQoJ0Nhbm5vdCBleHRyYWN0IGZpbGUgSUQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGZXRjaCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBleHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlRHJvcEV2ZW50KGRyb3BFdmVudDogRHJhZ0V2ZW50LCBlZGl0b3I6IEVkaXRvciwgcG9ydDogbnVtYmVyLCBwbHVnaW5JbnN0YW5jZTogTXlQbHVnaW4pIHtcclxuLy8gICAgIGRyb3BFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuLy8gICAgIC8vIFx1NTcyOFx1NEVFM1x1NzgwMVx1NEUyRFx1NkRGQlx1NTJBMFx1OEJFNlx1N0VDNlx1NjVFNVx1NUZEN1xyXG4vLyAgICAgY29uc29sZS5sb2coJ1x1NTM5Rlx1NTlDQlx1NjJENlx1NjJGRFx1NjU3MFx1NjM2RTonLCB7XHJcbi8vICAgICAgICAgdHlwZXM6IGRyb3BFdmVudC5kYXRhVHJhbnNmZXI/LnR5cGVzLFxyXG4vLyAgICAgICAgIGZpbGVzOiBkcm9wRXZlbnQuZGF0YVRyYW5zZmVyPy5maWxlcyxcclxuLy8gICAgICAgICBpdGVtczogQXJyYXkuZnJvbShkcm9wRXZlbnQuZGF0YVRyYW5zZmVyPy5pdGVtcyB8fCBbXSkubWFwKGkgPT4gKHtcclxuLy8gICAgICAgICAgICAga2luZDogaS5raW5kLFxyXG4vLyAgICAgICAgICAgICB0eXBlOiBpLnR5cGUsXHJcbi8vICAgICAgICAgICAgIGdldEFzRmlsZTogaS5nZXRBc0ZpbGUoKVxyXG4vLyAgICAgICAgIH0pKVxyXG5cclxuLy8gICAgIH0pO1xyXG5cclxuLy8gICAgIC8vIFx1ODNCN1x1NTNENlx1N0NGQlx1N0VERlx1NUU3M1x1NTNGMFx1NEZFMVx1NjA2RlxyXG4vLyAgICAgY29uc3Qgb3MgPSBwcm9jZXNzLnBsYXRmb3JtO1xyXG4vLyAgICAgY29uc3QgZmlsZVBhdGhzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgXHJcblxyXG4vLyAgICAgLy8gXHU5MDREXHU1Mzg2XHU2MkQ2XHU2MkZEXHU5ODc5XHJcbi8vICAgICBpZiAoZHJvcEV2ZW50LmRhdGFUcmFuc2Zlcj8uaXRlbXMpIHtcclxuLy8gICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oZHJvcEV2ZW50LmRhdGFUcmFuc2Zlci5pdGVtcyk7IC8vIFx1NUMwNiBpdGVtcyBcdThGNkNcdTYzNjJcdTRFM0FcdTY1NzBcdTdFQzRcclxuLy8gICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcclxuLy8gICAgICAgICAgICAgaWYgKGl0ZW0ua2luZCA9PT0gJ2ZpbGUnKSB7XHJcbi8vICAgICAgICAgICAgICAgICAvLyBcdTdDRkJcdTdFREZcdTdFQTdcdThERUZcdTVGODRcdTgzQjdcdTUzRDZcdTkwM0JcdThGOTFcclxuLy8gICAgICAgICAgICAgICAgIGxldCBmaWxlUGF0aCA9IFwiXCI7XHJcblxyXG4vLyAgICAgICAgICAgICAgICAgLy8gV2luZG93cyBcdTdDRkJcdTdFREZcdTU5MDRcdTc0MDZcclxuLy8gICAgICAgICAgICAgICAgIGlmIChvcyA9PT0gXCJ3aW4zMlwiKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU5MDFBXHU4RkM3XHU3OUMxXHU2NzA5IEFQSSBcdTgzQjdcdTUzRDYgTlRGUyBcdThERUZcdTVGODRcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGl0ZW0uZ2V0QXNGaWxlKCkgYXMgYW55O1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZT8ucGF0aCkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGggPSBmaWxlLnBhdGgucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignV2luZG93c1x1OERFRlx1NUY4NFx1ODNCN1x1NTNENlx1NTkzMVx1OEQyNTonLCBlcnJvcik7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgLy8gbWFjT1MgXHU3Q0ZCXHU3RURGXHU1OTA0XHU3NDA2XHJcbi8vICAgICAgICAgICAgICAgICBlbHNlIGlmIChvcyA9PT0gXCJkYXJ3aW5cIikge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1OTAxQVx1OEZDN1x1NzlDMVx1NjcwOVx1NjU3MFx1NjM2RVx1NjgzQ1x1NUYwRlx1ODNCN1x1NTNENlx1OERFRlx1NUY4NFxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmkgPSBkcm9wRXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvdXJpLWxpc3QnKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVyaSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGggPSBkZWNvZGVVUklDb21wb25lbnQodXJpKVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCdmaWxlOi8vJywgJycpXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcLyhbXi9dKykkLywgJyQxJyk7IC8vIFx1NUI4OVx1NTE2OFx1ODlFM1x1NzgwMVxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbWFjT1NcdThERUZcdTVGODRcdTgzQjdcdTUzRDZcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgICAgICAgICAvLyBcdTU5MDdcdTc1MjhcdTY1QjlcdTY4NDhcdUZGMUFcdTRGN0ZcdTc1MjhcdTRGMjBcdTdFREZcdTY1QjlcdTVGMEZcdTgzQjdcdTUzRDZcclxuLy8gICAgICAgICAgICAgICAgIGlmICghZmlsZVBhdGgpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gaXRlbS5nZXRBc0ZpbGUoKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aCA9IChmaWxlIGFzIGFueSkucGF0aCB8fCBgLyR7ZmlsZS5uYW1lfWA7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICAgICAgICAgIGlmIChmaWxlUGF0aCkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGZpbGVQYXRocy5wdXNoKGZpbGVQYXRoKTtcclxuLy8gICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuXHJcbi8vICAgICAvLyBcdTU5MDRcdTc0MDZcdTYyNDBcdTY3MDlcdTgzQjdcdTUzRDZcdTUyMzBcdTc2ODRcdTY1ODdcdTRFRjZcdThERUZcdTVGODRcclxuLy8gICAgIGlmIChmaWxlUGF0aHMubGVuZ3RoID4gMCkge1xyXG4vLyAgICAgICAgIGZvciAoY29uc3QgZmlsZVBhdGggb2YgZmlsZVBhdGhzKSB7XHJcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdcdTg5RTNcdTY3OTBcdTU0MEVcdTc2ODRcdTVCOENcdTY1NzRcdThERUZcdTVGODQ6JywgZmlsZVBhdGgpO1xyXG5cclxuLy8gICAgICAgICAgICAgdHJ5IHtcclxuLy8gICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBuZXcgRmlsZShbXSwgZmlsZVBhdGgpOyAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTdBN0FcdTc2ODQgRmlsZSBcdTVCRjlcdThDNjFcclxuLy8gICAgICAgICAgICAgICAgIGF3YWl0IHVwbG9hZEJ5Q2xpcGJvYXJkKGZpbGUsIHBsdWdpbkluc3RhbmNlKTtcclxuLy8gICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjU4N1x1NEVGNlx1NEUwQVx1NEYyMFx1NjIxMFx1NTI5RicpO1xyXG5cclxuLy8gICAgICAgICAgICAgICAgIHVybEVtaXR0ZXIub25jZSgndXJsVXBkYXRlZCcsIChsYXRlc3REaXJVcmw6IHN0cmluZykgPT4ge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGVQYXRoLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCkgfHwgJyc7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNJbWFnZSA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICd3ZWJwJ10uaW5jbHVkZXMoZXh0ZW5zaW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgZmlsZVBhdGg7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW1hZ2UpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oYCFbJHtmaWxlTmFtZX1dKCR7bGF0ZXN0RGlyVXJsfSlgKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgWyR7ZmlsZU5hbWV9XSgke2xhdGVzdERpclVybH0pYCk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OTRGRVx1NjNBNVx1NURGMlx1NjNEMlx1NTE2NScpO1xyXG4vLyAgICAgICAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTRFMEFcdTRGMjBcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xyXG4vLyAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgXHU0RTBBXHU0RjIwXHU1OTMxXHU4RDI1OiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9XHJcbi8vIH1cclxuXHJcbi8vIC8vIFx1NjVCMFx1NTg5RVx1NURFNVx1NTE3N1x1NTFGRFx1NjU3MFxyXG4vLyBmdW5jdGlvbiBnZXRGaWxlUGF0aChmaWxlOiBGaWxlKTogc3RyaW5nIHtcclxuLy8gICAgIC8vIFx1N0M3Qlx1NTc4Qlx1NUI4OVx1NTE2OFx1NzY4NFx1OERFRlx1NUY4NFx1ODNCN1x1NTNENlx1NjVCOVx1NUYwRlxyXG4vLyAgICAgY29uc3QgYW55RmlsZSA9IGZpbGUgYXMgYW55O1xyXG4vLyAgICAgcmV0dXJuIGFueUZpbGUucGF0aCB8fCBcclxuLy8gICAgICAgICAgICBhbnlGaWxlLmZpbGVwYXRoIHx8ICAvLyBcdTY3RDBcdTRFOUJcdTczQUZcdTU4ODNcdTRFMEJcdTUzRUZcdTgwRkRcdTRGN0ZcdTc1MjhcdTRFMERcdTU0MENcdTVDNUVcdTYwMjdcdTU0MERcclxuLy8gICAgICAgICAgICAoYW55RmlsZS5uYW1lICYmIGAvJHthbnlGaWxlLm5hbWV9YCkgfHwgLy8gXHU1OTA3XHU3NTI4XHU2NUI5XHU2ODQ4XHJcbi8vICAgICAgICAgICAgJ3Vua25vd25fcGF0aCc7XHJcbi8vIH1cclxuXHJcbi8vIGZ1bmN0aW9uIGdldEZpbGVFeHRlbnNpb24ocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuLy8gICAgIHJldHVybiBwYXRoLnNwbGl0KCcuJykucG9wKCkgfHwgJyc7XHJcbi8vIH1cclxuXHJcblxyXG4vLyBcdTZERkJcdTUyQTBcdTYyRDZcdTUyQThcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZURyb3BFdmVudChkcm9wRXZlbnQ6IERyYWdFdmVudCwgZWRpdG9yOiBFZGl0b3IsIHBvcnQ6IG51bWJlciwgcGx1Z2luSW5zdGFuY2U6IE15UGx1Z2luKSB7XHJcbiAgICAvLyBcdTk2M0JcdTZCNjJcdTlFRDhcdThCQTRcdTg4NENcdTRFM0FcdUZGMENcdThGRDlcdTY4MzdcdTYyMTFcdTRFRUNcdTUzRUZcdTRFRTVcdTgxRUFcdTVERjFcdTU5MDRcdTc0MDZcdTYyRDZcdTY1M0VcclxuICAgIGRyb3BFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIC8vIFx1NjhDMFx1NjdFNVx1NjJENlx1NjJGRFx1NEU4Qlx1NEVGNlx1NEUyRFx1NzY4NFx1NjU4N1x1NEVGNlxyXG4gICAgaWYgKGRyb3BFdmVudC5kYXRhVHJhbnNmZXI/LmZpbGVzLmxlbmd0aCkge1xyXG4gICAgICAgIGNvbnN0IGZpbGVzID0gZHJvcEV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcztcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlc1tpXTtcclxuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IGVsZWN0cm9uLndlYlV0aWxzLmdldFBhdGhGb3JGaWxlIFx1ODNCN1x1NTNENlx1NjU4N1x1NEVGNlx1OERFRlx1NUY4NFxyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGVsZWN0cm9uLndlYlV0aWxzLmdldFBhdGhGb3JGaWxlKGZpbGUpO1xyXG5cclxuICAgICAgICAgICAgcHJpbnQoYERyYWcgZmlsZSBwYXRoOiAke2ZpbGVQYXRofWApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmaWxlUGF0aC5zdGFydHNXaXRoKHBsdWdpbkluc3RhbmNlLnNldHRpbmdzLmxpYnJhcnlQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDIGZpbGVQYXRoIFx1NEUwRFx1NUM1RVx1NEU4RSBwbHVnaW5JbnN0YW5jZS5zZXR0aW5ncy5saWJyYXJ5UGF0aCBcdTc2ODRcdTVCNTBcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBsb2FkQnlDbGlwYm9hcmQoZmlsZVBhdGgsIHBsdWdpbkluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGaWxlIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTc2RDFcdTU0MkMgVVJMIFx1NjZGNFx1NjVCMFx1NEU4Qlx1NEVGNlxyXG4gICAgICAgICAgICAgICAgICAgIHVybEVtaXR0ZXIub25jZSgndXJsVXBkYXRlZCcsIChsYXRlc3REaXJVcmw6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlRXh0ID0gcGF0aC5leHRuYW1lKGZpbGVQYXRoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MUM2XHU1OTA3XHU2M0QyXHU1MTY1XHU3Njg0XHU2NTg3XHU2NzJDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnNlcnRUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoWycucG5nJywgJy5qcGcnLCAnLmpwZWcnLCAnLmdpZicsICcud2VicCddLmluY2x1ZGVzKGZpbGVFeHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRUZXh0ID0gYCFbJHtmaWxlTmFtZX18JHtwbHVnaW5JbnN0YW5jZS5zZXR0aW5ncy5pbWFnZVNpemV9XSgke2xhdGVzdERpclVybH0pYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VhZ2xlIGxpbmsgY29udmVydGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRUZXh0ID0gYFske2ZpbGVOYW1lfV0oJHtsYXRlc3REaXJVcmx9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1NjJENlx1NjUzRVx1NEY0RFx1N0Y2RVx1NjNEMlx1NTE2NVx1NTE4NVx1NUJCOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTZDRThcdTYxMEZcdUZGMUFPYnNpZGlhblx1NEYxQVx1ODFFQVx1NTJBOFx1NTkwNFx1NzQwNlx1NjJENlx1NjUzRVx1NEY0RFx1N0Y2RVx1RkYwQ1x1NjIxMVx1NEVFQ1x1NTNFQVx1OTcwMFx1ODk4MVx1NEY3Rlx1NzUyOHJlcGxhY2VTZWxlY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oaW5zZXJ0VGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0VhZ2xlXHU5NEZFXHU2M0E1XHU1REYyXHU4RjZDXHU2MzYyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZpbGUgdXBsb2FkIGZhaWxlZCwgY2hlY2sgaWYgRWFnbGUgaXMgcnVubmluZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1IGZpbGVQYXRoIFx1NEUyRFx1NjYyRlx1NTQyNlx1NTMwNVx1NTQyQiAnaW1hZ2VzXFx4eHh4eHguaW5mbycgXHU2QTIxXHU1RjBGXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IGZpbGVQYXRoLm1hdGNoKC9pbWFnZXNcXFxcW15cXFxcXStcXC5pbmZvLyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHBhdGguYmFzZW5hbWUoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVFeHQgPSBwYXRoLmV4dG5hbWUoZmlsZVBhdGgpLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB1cGRhdGVkVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmxQYXRoID0gbWF0Y2hbMF0ucmVwbGFjZSgvXFxcXC9nLCAnLycpOyAvLyBcdTVDMDZcdTUzQ0RcdTY1OUNcdTY3NjBcdTY2RkZcdTYzNjJcdTRFM0FcdTZCNjNcdTY1OUNcdTY3NjBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFsnLnBuZycsICcuanBnJywgJy5qcGVnJ10uaW5jbHVkZXMoZmlsZUV4dCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRleHQgPSBgIVske2ZpbGVOYW1lfXwke3BsdWdpbkluc3RhbmNlLnNldHRpbmdzLmltYWdlU2l6ZX1dKGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fS8ke3VybFBhdGh9KWA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlZFRleHQgPSBgWyR7ZmlsZU5hbWV9XShodHRwOi8vbG9jYWxob3N0OiR7cG9ydH0vJHt1cmxQYXRofSlgO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbih1cGRhdGVkVGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRWFnbGVcdTk0RkVcdTYzQTVcdTVERjJcdThGNkNcdTYzNjInKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU5NzVFRWFnbGVcdTk0RkVcdTYzQTUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSAiLCAiLy8gXHU4RkQ5XHU2QkI1XHU0RUUzXHU3ODAxXHU1QjlBXHU0RTQ5XHU0RTg2XHU0RTAwXHU0RTJBXHU1NDBEXHU0RTNBIGBvbkVsZW1lbnRgIFx1NzY4NFx1NTFGRFx1NjU3MFx1NTQ4Q1x1NEUwMFx1NEUyQSBgTGlzdGVuZXJgIFx1NjNBNVx1NTNFM1x1MzAwMlxyXG5cclxuLy8gYG9uRWxlbWVudGAgXHU1MUZEXHU2NTcwXHU3NTI4XHU0RThFXHU1NzI4XHU2MzA3XHU1QjlBXHU3Njg0XHU2NTg3XHU2ODYzXHU1MTQzXHU3RDIwXHU0RTBBXHU2Q0U4XHU1MThDXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHU1NjY4XHVGRjBDXHU1RTc2XHU4RkQ0XHU1NkRFXHU0RTAwXHU0RTJBXHU1MUZEXHU2NTcwXHU0RUU1XHU0RkJGXHU3QTBEXHU1NDBFXHU3OUZCXHU5NjY0XHU4QkU1XHU3NkQxXHU1NDJDXHU1NjY4XHUzMDAyXHU1QjgzXHU2M0E1XHU1M0Q3XHU0RUU1XHU0RTBCXHU1M0MyXHU2NTcwXHVGRjFBXHJcbi8vIC0gYGVsYDogXHU4OTgxXHU2Q0U4XHU1MThDXHU0RThCXHU0RUY2XHU3Njg0XHU2NTg3XHU2ODYzXHU1MTQzXHU3RDIwXHUzMDAyXHJcbi8vIC0gYGV2ZW50YDogXHU4OTgxXHU3NkQxXHU1NDJDXHU3Njg0XHU0RThCXHU0RUY2XHU3QzdCXHU1NzhCXHUzMDAyXHJcbi8vIC0gYHNlbGVjdG9yYDogXHU5MDA5XHU2MkU5XHU1NjY4XHU1QjU3XHU3QjI2XHU0RTMyXHVGRjBDXHU3NTI4XHU0RThFXHU1MzM5XHU5MTREXHU4OTgxXHU3NkQxXHU1NDJDXHU3Njg0XHU1QjUwXHU1MTQzXHU3RDIwXHUzMDAyXHJcbi8vIC0gYGxpc3RlbmVyYDogXHU0RThCXHU0RUY2XHU4OUU2XHU1M0QxXHU2NUY2XHU4OTgxXHU4QzAzXHU3NTI4XHU3Njg0XHU1NkRFXHU4QzAzXHU1MUZEXHU2NTcwXHUzMDAyXHJcbi8vIC0gYG9wdGlvbnNgOiBcdTUzRUZcdTkwMDlcdTUzQzJcdTY1NzBcdUZGMENcdTc1MjhcdTRFOEVcdTYzMDdcdTVCOUFcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcdTU2NjhcdTc2ODRcdTkwMDlcdTk4NzlcdUZGMDhcdTRGOEJcdTU5ODJcdTY2MkZcdTU0MjZcdTU3MjhcdTYzNTVcdTgzQjdcdTk2MzZcdTZCQjVcdTg5RTZcdTUzRDFcdUZGMDlcdTMwMDJcclxuXHJcbi8vIGBMaXN0ZW5lcmAgXHU2M0E1XHU1M0UzXHU1QjlBXHU0RTQ5XHU0RTg2XHU0RTAwXHU0RTJBXHU1NkRFXHU4QzAzXHU1MUZEXHU2NTcwXHU3QzdCXHU1NzhCXHVGRjBDXHU4QkU1XHU1MUZEXHU2NTcwXHU1NzI4XHU0RThCXHU0RUY2XHU4OUU2XHU1M0QxXHU2NUY2XHU4OEFCXHU4QzAzXHU3NTI4XHUzMDAyXHJcblxyXG4vLyBcdTUxNzdcdTRGNTNcdTVCOUVcdTczQjBcdTRFMkRcdUZGMENgZWwub25gIFx1NjVCOVx1NkNENVx1NzUyOFx1NEU4RVx1NkNFOFx1NTE4Q1x1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFx1RkYwQ2BlbC5vZmZgIFx1NjVCOVx1NkNENVx1NzUyOFx1NEU4RVx1NzlGQlx1OTY2NFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1NTY2OFx1MzAwMlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIG9uRWxlbWVudChcclxuICAgIGVsOiBEb2N1bWVudCxcclxuICAgIGV2ZW50OiBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwLFxyXG4gICAgc2VsZWN0b3I6IHN0cmluZyxcclxuICAgIGxpc3RlbmVyOiBMaXN0ZW5lcixcclxuICAgIG9wdGlvbnM/OiB7IGNhcHR1cmU/OiBib29sZWFuOyB9XHJcbikge1xyXG4gICAgZWwub24oZXZlbnQsIHNlbGVjdG9yLCBsaXN0ZW5lciwgb3B0aW9ucyk7XHJcbiAgICByZXR1cm4gKCkgPT4gZWwub2ZmKGV2ZW50LCBzZWxlY3RvciwgbGlzdGVuZXIsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIExpc3RlbmVyIHtcclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAodGhpczogRG9jdW1lbnQsIGV2OiBFdmVudCk6IGFueTtcclxufVxyXG5cclxuLy8gXHU1OTgyXHU2NzlDXHU2NjJGIHR5cGUgXHU2NjJGIFwiaW1nXCJcdUZGMENcdTVDMzFcdTUxQzZcdTc4NkVcdTUyMjBcdTk2NjRcdTU2RkVcdTcyNDdcdTVGMTVcdTc1MjhcdTk0RkVcdTYzQTVcdTc2ODRcdTkwRThcdTUyMDZcdUZGMENcdTU5ODJcdTY3OUNcdTY2MkZcdTUxNzZcdTRFRDZcdTdDN0JcdTU3OEJcdUZGMENcdTc2RjRcdTYzQTVcdTUyMjBcdTk2NjRcdTY1NzRcdTg4NENcclxuLy8gdGFyZ2V0X2xpbmUgXHVGRjA4MS1iYXNlZFx1RkYwOSBcdTU0OEMgdGFyZ2V0X2NoIFx1NjYyRlx1NjMwN1x1NzkzQVx1OTY0NFx1NEVGNlx1NjI0MFx1NTcyOFx1NzY4NFx1NEY0RFx1N0Y2RVxyXG4vLyBleHBvcnQgY29uc3QgZGVsZXRlQ3VyVGFyZ2V0TGluayA9IChcclxuLy8gXHRmaWxlX2Jhc2VfbmFtZTogc3RyaW5nLFxyXG4vLyBcdHBsdWdpbjogQXR0YWNoRmxvd1BsdWdpbixcclxuLy8gXHR0YXJnZXRfdHlwZTogc3RyaW5nLFxyXG4vLyBcdHRhcmdldF9wb3M6IG51bWJlcixcclxuLy8gXHRpbl90YWJsZTogYm9vbGVhbixcclxuLy8gXHRpbl9jYWxsb3V0OiBib29sZWFuXHJcbi8vICkgPT4ge1xyXG4vLyBcdGZpbGVfYmFzZV9uYW1lID0gZmlsZV9iYXNlX25hbWUuc3RhcnRzV2l0aCgnLycpID8gZmlsZV9iYXNlX25hbWUuc3Vic3RyaW5nKDEpOmZpbGVfYmFzZV9uYW1lO1xyXG4vLyBcdGNvbnN0IGFjdGl2ZVZpZXcgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldykgYXMgTWFya2Rvd25WaWV3O1xyXG4vLyBcdGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xyXG4vLyBcdC8vICBAdHMtZXhwZWN0LWVycm9yLCBub3QgdHlwZWRcclxuLy8gXHRjb25zdCBlZGl0b3JWaWV3ID0gZWRpdG9yLmNtIGFzIEVkaXRvclZpZXc7XHJcblxyXG4vLyBcdGxldCB0YXJnZXRfbGluZSA9IGVkaXRvclZpZXcuc3RhdGUuZG9jLmxpbmVBdCh0YXJnZXRfcG9zKTtcclxuLy8gXHRsZXQgbGluZV90ZXh0ID0gdGFyZ2V0X2xpbmUudGV4dDtcclxuXHJcbi8vIFx0aWYgKCFpbl90YWJsZSAmJiAhaW5fY2FsbG91dCl7XHJcbi8vIFx0XHRsZXQgZmluZHMgPSBmaW5kTGlua0luTGluZShmaWxlX2Jhc2VfbmFtZSwgbGluZV90ZXh0KTtcclxuLy8gXHRcdGlmIChmaW5kcy5sZW5ndGggPT0gMCl7XHJcbi8vIFx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsIHRvIGZpbmQgdGhlIGxpbmstdGV4dCwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFcIiwgMCk7XHJcbi8vIFx0XHRcdHJldHVybjtcclxuLy8gXHRcdH1cclxuLy8gXHRcdGVsc2UgaWYoZmluZHMubGVuZ3RoICE9IDEpe1xyXG4vLyBcdFx0XHRuZXcgTm90aWNlKFwiRmluZCBtdWx0aXBsZSBzYW1lIExpbmsgaW4gY3VycmVudCBsaW5lLCBwbGVhc2UgZGVsZXRlIGl0IG1hbnVhbGx5IVwiLCAwKTtcclxuLy8gXHRcdFx0cmV0dXJuO1xyXG4vLyBcdFx0fVxyXG4vLyBcdFx0ZWxzZXtcclxuLy8gXHRcdFx0Ly8gZWRpdG9yVmlldy5kaXNwYXRjaCh7Y2hhbmdlczoge2Zyb206IHRhcmdldF9saW5lLmZyb20gKyBmaW5kc1swXVswXSwgdG86IHRhcmdldF9saW5lLmZyb20gKyBmaW5kc1swXVsxXSwgaW5zZXJ0OiAnJ319KTtcclxuLy8gXHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZSgnJywge2xpbmU6IHRhcmdldF9saW5lLm51bWJlci0xLCBjaDogZmluZHNbMF1bMF19LCB7bGluZTogdGFyZ2V0X2xpbmUubnVtYmVyLTEsIGNoOiBmaW5kc1swXVsxXX0pO1xyXG4vLyBcdFx0XHRyZXR1cm47XHJcbi8vIFx0XHR9XHJcbi8vIFx0fVxyXG5cclxuLy8gXHR0eXBlIFJlZ0RpY3Rpb25hcnkgPSB7XHJcbi8vIFx0XHRba2V5OiBzdHJpbmddOiBSZWdFeHA7XHJcbi8vIFx0fTtcclxuXHRcclxuLy8gXHRsZXQgc3RhcnRSZWc6IFJlZ0RpY3Rpb25hcnkgPSB7XHJcbi8vIFx0XHQndGFibGUnOiAvXlxccypcXHwvLFxyXG4vLyBcdFx0J2NhbGxvdXQnOiAvXj4vLFxyXG4vLyBcdH07XHJcblxyXG4vLyBcdGxldCBtb2RlID0gaW5fdGFibGUgPyAndGFibGUnIDogJ2NhbGxvdXQnO1xyXG4vLyBcdGxldCBmaW5kc19saW5lczogbnVtYmVyW10gPSBbXTtcclxuLy8gXHRsZXQgZmluZHNfYWxsOiBbZnJvbTpudW1iZXIsIHRvOm51bWJlcl1bXSA9IFtdO1xyXG4vLyBcdGZvciAobGV0IGk9dGFyZ2V0X2xpbmUubnVtYmVyOyBpPD1lZGl0b3IubGluZUNvdW50KCk7IGkrKyl7XHJcbi8vIFx0XHRsZXQgbGluZV90ZXh0ID0gZWRpdG9yLmdldExpbmUoaS0xKTtcclxuLy8gXHRcdGlmICghc3RhcnRSZWdbbW9kZV0udGVzdChsaW5lX3RleHQpKSBicmVhaztcclxuLy8gXHRcdHByaW50KGBsaW5lXyR7aX1fdGV4dDpgLCBsaW5lX3RleHQpXHJcbi8vIFx0XHRsZXQgZmluZHMgPSBmaW5kTGlua0luTGluZShmaWxlX2Jhc2VfbmFtZSwgbGluZV90ZXh0KTtcclxuLy8gXHRcdGlmIChmaW5kcy5sZW5ndGggPiAwKXtcclxuLy8gXHRcdFx0ZmluZHNfbGluZXMucHVzaCguLi5uZXcgQXJyYXkoZmluZHMubGVuZ3RoKS5maWxsKGkpKTtcclxuLy8gXHRcdFx0ZmluZHNfYWxsLnB1c2goLi4uZmluZHMpO1xyXG4vLyBcdFx0fVxyXG4vLyBcdH1cclxuXHJcbi8vIFx0Zm9yIChsZXQgaT10YXJnZXRfbGluZS5udW1iZXItMTsgaT49MTsgaS0tKXtcclxuLy8gXHRcdGxldCBsaW5lX3RleHQgPSBlZGl0b3IuZ2V0TGluZShpLTEpO1xyXG4vLyBcdFx0aWYgKCFzdGFydFJlZ1ttb2RlXS50ZXN0KGxpbmVfdGV4dCkpIGJyZWFrO1xyXG4vLyBcdFx0cHJpbnQoYGxpbmVfJHtpfV90ZXh0OmAsIGxpbmVfdGV4dClcclxuLy8gXHRcdGxldCBmaW5kcyA9IGZpbmRMaW5rSW5MaW5lKGZpbGVfYmFzZV9uYW1lLCBsaW5lX3RleHQpO1xyXG4vLyBcdFx0aWYgKGZpbmRzLmxlbmd0aCA+IDApe1xyXG4vLyBcdFx0XHRmaW5kc19saW5lcy5wdXNoKC4uLm5ldyBBcnJheShmaW5kcy5sZW5ndGgpLmZpbGwoaSkpO1xyXG4vLyBcdFx0XHRmaW5kc19hbGwucHVzaCguLi5maW5kcyk7XHJcbi8vIFx0XHR9XHJcbi8vIFx0fVxyXG5cclxuLy8gXHRpZiAoZmluZHNfYWxsLmxlbmd0aCA9PSAwKXtcclxuLy8gXHRcdG5ldyBOb3RpY2UoYEZhaWwgdG8gZmluZCB0aGUgbGluay10ZXh0IChmb3IgbGlua3MgaW4gJHttb2RlfSksIHBsZWFzZSBkZWxldGUgaXQgbWFudWFsbHkhYCwgMCk7XHJcbi8vIFx0XHRyZXR1cm47XHJcbi8vIFx0fVxyXG4vLyBcdGVsc2UgaWYoZmluZHNfYWxsLmxlbmd0aCAhPSAxKXtcclxuLy8gXHRcdG5ldyBOb3RpY2UoYEZpbmQgbXVsdGlwbGUgc2FtZSBMaW5rIGluIGN1cnJlbnQgJHttb2RlfSwgcGxlYXNlIGRlbGV0ZSBpdCBtYW51YWxseSFgLCAwKTtcclxuLy8gXHRcdHJldHVybjtcclxuLy8gXHR9XHJcbi8vIFx0ZWxzZXtcclxuLy8gXHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoJycsIHtsaW5lOiBmaW5kc19saW5lc1swXS0xLCBjaDogZmluZHNfYWxsWzBdWzBdfSwge2xpbmU6IGZpbmRzX2xpbmVzWzBdLTEsIGNoOiBmaW5kc19hbGxbMF1bMV19KTtcclxuLy8gXHR9XHJcblxyXG4vLyBcdGVkaXRvci5mb2N1cygpO1xyXG4vLyB9IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTXlQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZyc7XHJcbmltcG9ydCB7IHByaW50LCBzZXREZWJ1ZyB9IGZyb20gJy4vbWFpbic7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3luY1RhZ3MoYXBwOiBBcHAsIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKSB7XHJcblx0dHJ5IHtcclxuXHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RCBNYXJrZG93biBcdTY1ODdcdTRFRjZcdTc2ODQgWUFNTCBcdTY4MDdcdTdCN0VcclxuXHRcdGNvbnN0IHlhbWxUYWdzID0gZ2V0WWFtbFRhZ3NGcm9tQ3VycmVudEZpbGUoYXBwKTsgLy8gXHU0RjhCXHU1OTgyXHVGRjFBWyd0YWcxJywgJ3RhZzInXVxyXG5cclxuXHRcdC8vIFx1NjhDMFx1NjdFNSBhZHZhbmNlZElEIFx1OEJCRVx1N0Y2RVxyXG5cdFx0bGV0IGFkZGl0aW9uYWxUYWdzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdFx0aWYgKHNldHRpbmdzLmFkdmFuY2VkSUQpIHtcclxuXHRcdFx0Y29uc3QgeWFtbElkID0gZ2V0WWFtbElkRnJvbUN1cnJlbnRGaWxlKGFwcCk7XHJcblx0XHRcdGlmICh5YW1sSWQpIHtcclxuXHRcdFx0XHRhZGRpdGlvbmFsVGFncy5wdXNoKHlhbWxJZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdTRFMkRcdTYyNDBcdTY3MDlcdTc2ODQgLmluZm8gXHU2NTg3XHU0RUY2IElEXHJcblx0XHRjb25zdCBpbmZvRmlsZUlkcyA9IGF3YWl0IGdldEluZm9GaWxlSWRzRnJvbUN1cnJlbnRGaWxlKGFwcCk7IC8vIFx1NEY4Qlx1NTk4Mlx1RkYxQVsnTTVVNUJPUktOMUxOVycsICdLQkhHNktBMFk1UzlXJ11cclxuXHJcblx0XHRmb3IgKGNvbnN0IGlkIG9mIGluZm9GaWxlSWRzKSB7XHJcblx0XHRcdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RCAuaW5mbyBcdTY1ODdcdTRFRjZcdTc2ODRcdTY4MDdcdTdCN0VcclxuXHRcdFx0Y29uc3QgY3VycmVudFRhZ3MgPSBhd2FpdCBmZXRjaFRhZ3NGb3JJbmZvRmlsZShpZCk7XHJcblxyXG5cdFx0XHQvLyBcdTU0MDhcdTVFNzZcdTVFNzZcdTUzQkJcdTkxQ0RcdTY4MDdcdTdCN0VcclxuXHRcdFx0Y29uc3QgbmV3VGFncyA9IEFycmF5LmZyb20obmV3IFNldChbLi4uY3VycmVudFRhZ3MsIC4uLnlhbWxUYWdzLCAuLi5hZGRpdGlvbmFsVGFnc10pKTtcclxuXHJcblx0XHRcdC8vIFx1NTNEMVx1OTAwMVx1NjZGNFx1NjVCMFx1NTQwRVx1NzY4NFx1NjgwN1x1N0I3RVxyXG5cdFx0XHRhd2FpdCB1cGRhdGVUYWdzRm9ySW5mb0ZpbGUoaWQsIG5ld1RhZ3MpO1xyXG5cdFx0XHRuZXcgTm90aWNlKCdUYWdzIHN5bmNlZCBzdWNjZXNzZnVsbHknKTtcclxuXHRcdH1cclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0cHJpbnQoJ0Vycm9yIHN5bmNpbmcgdGFnczonLCBlcnJvcik7XHJcblx0XHRuZXcgTm90aWNlKCdFcnJvciBzeW5jaW5nIHRhZ3MuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XHJcblx0fVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmZXRjaFRhZ3NGb3JJbmZvRmlsZShpZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG5cdGNvbnN0IHJlcXVlc3RPcHRpb25zOiBSZXF1ZXN0SW5pdCA9IHtcclxuXHRcdG1ldGhvZDogJ0dFVCcsXHJcblx0XHRyZWRpcmVjdDogJ2ZvbGxvdycgYXMgUmVxdWVzdFJlZGlyZWN0XHJcblx0fTtcclxuXHJcblx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo0MTU5NS9hcGkvaXRlbS9pbmZvP3Rva2VuPVlPVVJfQVBJX1RPS0VOJmlkPSR7aWR9YCwgcmVxdWVzdE9wdGlvbnMpO1xyXG5cdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHRyZXR1cm4gcmVzdWx0LmRhdGEudGFncyB8fCBbXTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVGFnc0ZvckluZm9GaWxlKGlkOiBzdHJpbmcsIHRhZ3M6IHN0cmluZ1tdKSB7XHJcblx0Y29uc3QgZGF0YSA9IHtcclxuXHRcdGlkOiBpZCxcclxuXHRcdHRhZ3M6IHRhZ3NcclxuXHR9O1xyXG5cclxuXHRjb25zdCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdEluaXQgPSB7XHJcblx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG5cdFx0cmVkaXJlY3Q6ICdmb2xsb3cnIGFzIFJlcXVlc3RSZWRpcmVjdFxyXG5cdH07XHJcblxyXG5cdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjQxNTk1L2FwaS9pdGVtL3VwZGF0ZVwiLCByZXF1ZXN0T3B0aW9ucyk7XHJcblx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cdHByaW50KGBVcGRhdGVkIHRhZ3MgZm9yICR7aWR9OmAsIHJlc3VsdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFlhbWxUYWdzRnJvbUN1cnJlbnRGaWxlKGFwcDogQXBwKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlIGZvdW5kLicpO1xyXG5cdFx0cmV0dXJuIFtdO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZmlsZUNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZUZpbGUpO1xyXG5cdGlmICghZmlsZUNhY2hlIHx8ICFmaWxlQ2FjaGUuZnJvbnRtYXR0ZXIpIHtcclxuXHRcdG5ldyBOb3RpY2UoJ05vIFlBTUwgZnJvbnRtYXR0ZXIgZm91bmQuJyk7XHJcblx0XHRyZXR1cm4gW107XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZmlsZUNhY2hlLmZyb250bWF0dGVyLnRhZ3MgfHwgW107XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldEluZm9GaWxlSWRzRnJvbUN1cnJlbnRGaWxlKGFwcDogQXBwKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG5cdGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRpZiAoIWFjdGl2ZUZpbGUpIHtcclxuXHRcdG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBmaWxlIGZvdW5kLicpO1xyXG5cdFx0cmV0dXJuIFtdO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcclxuXHRjb25zdCByZWdleCA9IC9odHRwOlxcL1xcL2xvY2FsaG9zdDpcXGQrXFwvaW1hZ2VzXFwvKFtBLVowLTldKylcXC5pbmZvL2c7XHJcblx0bGV0IG1hdGNoO1xyXG5cdGNvbnN0IGlkcyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xyXG5cclxuXHR3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhmaWxlQ29udGVudCkpICE9PSBudWxsKSB7XHJcblx0XHRpZHMuYWRkKG1hdGNoWzFdKTsgLy8gbWF0Y2hbMV0gXHU2NjJGXHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU0RTJEXHU2MzU1XHU4M0I3XHU3Njg0IElEXHJcblx0fVxyXG5cclxuXHRyZXR1cm4gQXJyYXkuZnJvbShpZHMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRZYW1sSWRGcm9tQ3VycmVudEZpbGUoYXBwOiBBcHApOiBzdHJpbmcgfCBudWxsIHtcclxuXHRjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0aWYgKCFhY3RpdmVGaWxlKSB7XHJcblx0XHRuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZSBmb3VuZC4nKTtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZmlsZUNhY2hlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGFjdGl2ZUZpbGUpO1xyXG5cdGlmICghZmlsZUNhY2hlIHx8ICFmaWxlQ2FjaGUuZnJvbnRtYXR0ZXIpIHtcclxuXHRcdG5ldyBOb3RpY2UoJ05vIFlBTUwgZnJvbnRtYXR0ZXIgZm91bmQuJyk7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdHJldHVybiBmaWxlQ2FjaGUuZnJvbnRtYXR0ZXIuaWQgfHwgbnVsbDtcclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBTZXR0aW5nLCBNYXJrZG93blZpZXcgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuL3NldHRpbmcnO1xyXG5pbXBvcnQgeyBwcmludCwgc2V0RGVidWcgfSBmcm9tICcuL21haW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVhZ2xlSnVtcE1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdHByaXZhdGUgb25TdWJtaXQ6IChsaW5rOiBzdHJpbmcpID0+IHZvaWQ7XHJcblx0cHJpdmF0ZSBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzLCBvblN1Ym1pdDogKGxpbms6IHN0cmluZykgPT4gdm9pZCkge1xyXG5cdFx0c3VwZXIoYXBwKTtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1BsZWFzZSBlbnRlciBQYWdlIGlkIG9yIEVhZ2xlIGltYWdlIGxpbmsnIH0pO1xyXG5cclxuXHRcdGxldCBsaW5rSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcclxuXHRcdFx0XHRsaW5rSW5wdXQgPSB0ZXh0LmlucHV0RWw7XHJcblx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcignbGluay4uLicpO1xyXG5cdFx0XHRcdGxpbmtJbnB1dC5zdHlsZS53aWR0aCA9ICc0MDBweCc7IC8vIFx1OEJCRVx1N0Y2RVx1NjU4N1x1NjcyQ1x1Njg0Nlx1NUJCRFx1NUVBNlx1NEUzQTQwMFxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcblx0XHRidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuXHRcdC8vIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMTBweCc7IC8vIFx1OEJCRVx1N0Y2RVx1NjMwOVx1OTRBRVx1NEU0Qlx1OTVGNFx1NzY4NFx1OTVGNFx1OERERFxyXG5cdFx0YnV0dG9uQ29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnZW5kJzsgLy8gXHU3ODZFXHU0RkREXHU2MzA5XHU5NEFFXHU1NzI4XHU1NDBDXHU0RTAwXHU4ODRDXHU0RTBBXHJcblx0XHRidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsgLy8gXHU3ODZFXHU0RkREXHU2MzA5XHU5NEFFXHU1NzI4XHU1NDBDXHU0RTAwXHU4ODRDXHU0RTBBXHJcblxyXG5cdFx0bmV3IFNldHRpbmcoYnV0dG9uQ29udGFpbmVyKVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ0biA9PiBidG5cclxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnSnVtcCcpXHJcblx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgbGluayA9IGxpbmtJbnB1dC52YWx1ZS50cmltKCk7XHJcblx0XHRcdFx0XHRpZiAobGluaykge1xyXG5cdFx0XHRcdFx0XHQvLyBcdTY4QzBcdTY3RTVcdTk0RkVcdTYzQTVcdTY4M0NcdTVGMEZcclxuXHRcdFx0XHRcdFx0Y29uc3QgZWFnbGVQYXR0ZXJuID0gL15lYWdsZTpcXC9cXC9pdGVtXFwvKFtBLVowLTldKykkLztcclxuXHRcdFx0XHRcdFx0Y29uc3QgdXVpZFBhdHRlcm4gPSAvXi4rJC87IC8vIFx1NTMzOVx1OTE0RFx1NEVGQlx1NjEwRlx1OTc1RVx1N0E3QVx1NUI1N1x1N0IyNlx1NEUzMlxyXG5cdFx0XHRcdFx0XHRjb25zdCBpbWFnZVBhdHRlcm4gPSAvaHR0cDpcXC9cXC9sb2NhbGhvc3Q6XFxkK1xcL2ltYWdlc1xcLyhbQS1aMC05XSspXFwuaW5mby87XHJcblxyXG5cdFx0XHRcdFx0XHRjb25zdCBlYWdsZU1hdGNoID0gbGluay5tYXRjaChlYWdsZVBhdHRlcm4pO1xyXG5cdFx0XHRcdFx0XHRjb25zdCB1dWlkTWF0Y2ggPSBsaW5rLm1hdGNoKHV1aWRQYXR0ZXJuKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgaW1hZ2VNYXRjaCA9IGxpbmsubWF0Y2goaW1hZ2VQYXR0ZXJuKTtcclxuXHJcblx0XHRcdFx0XHRcdGlmIChlYWdsZU1hdGNoIHx8IGltYWdlTWF0Y2gpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTY2MkYgZWFnbGU6Ly9pdGVtLyBcdTYyMTZcdTgwMDVcdTU2RkVcdTcyNDdcdTk0RkVcdTYzQTVcdTY4M0NcdTVGMEZcdUZGMENcdTRGN0ZcdTc1MjggT2JzaWRpYW4gXHU3Njg0XHU2NDFDXHU3RDIyXHU1MjlGXHU4MEZEXHJcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXRlbUlkID0gZWFnbGVNYXRjaCA/IGVhZ2xlTWF0Y2hbMV0gOiAoaW1hZ2VNYXRjaCA/IGltYWdlTWF0Y2hbMV0gOiBudWxsKTtcclxuXHRcdFx0XHRcdFx0XHRpZiAoaXRlbUlkKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRwcmludChgU2VhcmNoIElEIGluIE9ic2lkaWFuOiAke2l0ZW1JZH1gKTtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIFx1NjI1M1x1NUYwMFx1NjQxQ1x1N0QyMlx1OTc2Mlx1Njc3RlxyXG5cdFx0XHRcdFx0XHRcdFx0bGV0IHNlYXJjaExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZWFyY2gnKVswXTtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICghc2VhcmNoTGVhZikge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWFyY2hMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7IC8vIFx1ODNCN1x1NTNENlx1NEUwMFx1NEUyQVx1NjVCMFx1NzY4NFx1NTNGNlx1NUI1MFxyXG5cdFx0XHRcdFx0XHRcdFx0XHRzZWFyY2hMZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6ICdzZWFyY2gnIH0pOyAvLyBcdThCQkVcdTdGNkVcdTg5QzZcdTU2RkVcdTdDN0JcdTU3OEJcdTRFM0FcdTY0MUNcdTdEMjJcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKHNlYXJjaExlYWYpO1xyXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2VhcmNoVmlldyA9IHNlYXJjaExlYWYudmlldztcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChzZWFyY2hWaWV3ICYmIHR5cGVvZiAoc2VhcmNoVmlldyBhcyBhbnkpLnNldFF1ZXJ5ID09PSAnZnVuY3Rpb24nKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdChzZWFyY2hWaWV3IGFzIGFueSkuc2V0UXVlcnkoaXRlbUlkKTtcclxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1NlYXJjaCB2aWV3IGRvZXMgbm90IHN1cHBvcnQgc2V0UXVlcnknKTtcclxuXHRcdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnQ2Fubm90IGV4dHJhY3QgYSB2YWxpZCBJRCcpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh1dWlkTWF0Y2gpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBcdTU5ODJcdTY3OUNcdTY2MkYgVVVJRCBcdTY4M0NcdTVGMEZcdUZGMENcdTY3ODRcdTVFRkEgb2JzaWRpYW46Ly9hZHYtdXJpIFx1OTRGRVx1NjNBNVxyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IG9ic2lkaWFuU3RvcmVJZCA9IHRoaXMuc2V0dGluZ3Mub2JzaWRpYW5TdG9yZUlkO1xyXG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFkdlVyaSA9IGBvYnNpZGlhbjovL2Fkdi11cmk/dmF1bHQ9JHtvYnNpZGlhblN0b3JlSWR9JnVpZD0ke2xpbmt9YDtcclxuXHRcdFx0XHRcdFx0XHRwcmludChgUnVuIGxpbms6ICR7YWR2VXJpfWApO1xyXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5vcGVuKGFkdlVyaSwgJ19ibGFuaycpO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBlbnRlciBhIHZhbGlkIGxpbmsnKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2UgZW50ZXIgYSB2YWxpZCBsaW5rJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdFx0LmFkZEJ1dHRvbihidG4gPT4gYnRuXHJcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ0NhbmNlbCcpXHJcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cdH1cclxufVxyXG5cclxuLy8gXHU0RjdGXHU3NTI4XHU3OTNBXHU0RjhCXHJcbmV4cG9ydCBmdW5jdGlvbiBqdW1wTW9kYWwoYXBwOiBBcHAsIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKSB7XHJcblx0bmV3IEVhZ2xlSnVtcE1vZGFsKGFwcCwgc2V0dGluZ3MsIChsaW5rKSA9PiB7XHJcblx0XHRwcmludChgVXNlciBpbnB1dCBsaW5rOiAke2xpbmt9YCk7XHJcblx0fSkub3BlbigpO1xyXG59IiwgImltcG9ydCBNeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBzeW5jVGFncyB9IGZyb20gXCIuL3N5bmNocm9uaXplZHBhZ2V0YWJzXCI7XHJcbmltcG9ydCB7IGp1bXBNb2RhbCB9IGZyb20gXCIuL2VhZ2xlanVtcG9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ29tbWFuZFN5bmNocm9uaXplZFBhZ2VUYWJzID0gKG15UGx1Z2luOiBNeVBsdWdpbikgPT4ge1xyXG5cdG15UGx1Z2luLmFkZENvbW1hbmQoe1xyXG5cdFx0aWQ6IFwic3luY2hyb25pemVkLXBhZ2UtdGFic1wiLFxyXG5cdFx0bmFtZTogXCJzeW5jaHJvbml6ZWQtcGFnZS10YWJzXCIsXHJcblx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRzeW5jVGFncyhteVBsdWdpbi5hcHAsIG15UGx1Z2luLnNldHRpbmdzKTtcclxuXHRcdH0sXHJcblx0fSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ29tbWFuZEVhZ2xlSnVtcCA9IChteVBsdWdpbjogTXlQbHVnaW4pID0+IHtcclxuXHRteVBsdWdpbi5hZGRDb21tYW5kKHtcclxuXHRcdGlkOiBcImVhZ2xlLWp1bXAtb2JzaWRpYW5cIixcclxuXHRcdG5hbWU6IFwiZWFnbGUtanVtcC1vYnNpZGlhblwiLFxyXG5cdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuXHRcdFx0anVtcE1vZGFsKG15UGx1Z2luLmFwcCwgbXlQbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0fSxcclxuXHR9KTtcclxufTsiLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBzdGFydFNlcnZlciwgcmVmcmVzaFNlcnZlciwgc3RvcFNlcnZlciB9IGZyb20gJy4vc2VydmVyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcblx0bXlTZXR0aW5nOiBzdHJpbmc7XHJcblx0cG9ydDogbnVtYmVyO1xyXG5cdGxpYnJhcnlQYXRoOiBzdHJpbmc7XHJcblx0Zm9sZGVySWQ/OiBzdHJpbmc7XHJcblx0Y2xpY2tWaWV3OiBib29sZWFuO1xyXG5cdGFkYXB0aXZlUmF0aW86IG51bWJlcjtcclxuXHRhZHZhbmNlZElEOiBib29sZWFuO1xyXG5cdG9ic2lkaWFuU3RvcmVJZDogc3RyaW5nO1xyXG5cdGltYWdlU2l6ZTogbnVtYmVyIHwgdW5kZWZpbmVkO1xyXG5cdHdlYnNpdGVVcGxvYWQ6IGJvb2xlYW47XHJcblx0bGlicmFyeVBhdGhzOiBzdHJpbmdbXTtcclxuXHRkZWJ1ZzogYm9vbGVhbjtcclxuXHRvcGVuSW5PYnNpZGlhbjogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRteVNldHRpbmc6ICdkZWZhdWx0JyxcclxuXHRwb3J0OiA2MDYwLFxyXG5cdGxpYnJhcnlQYXRoOiAnJyxcclxuXHRmb2xkZXJJZDogJycsXHJcblx0Y2xpY2tWaWV3OiBmYWxzZSxcclxuXHRhZGFwdGl2ZVJhdGlvOiAwLjgsXHJcblx0YWR2YW5jZWRJRDogZmFsc2UsXHJcblx0b2JzaWRpYW5TdG9yZUlkOiAnJyxcclxuXHRpbWFnZVNpemU6IHVuZGVmaW5lZCxcclxuXHR3ZWJzaXRlVXBsb2FkOiBmYWxzZSxcclxuXHRsaWJyYXJ5UGF0aHM6IFtdLFxyXG5cdGRlYnVnOiBmYWxzZSxcclxuXHRvcGVuSW5PYnNpZGlhbjogJ25ld1BhZ2UnLFxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFNhbXBsZVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IE15UGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUG9ydCcpXHJcblx0XHRcdC5zZXREZXNjKCdFbnRlciB0aGUgcG9ydCBudW1iZXIgb2YgdGhlIHNlcnZlciwgcmFuZ2luZyBmcm9tIDEwMDAgdG8gOTk5OSwgYW5kIGRvIG5vdCBtb2RpZnkgaXQgYWZ0ZXIgc2V0dGluZy4nKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHBvcnQgbnVtYmVyJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucG9ydC50b1N0cmluZygpKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcnQgPSBwYXJzZUludCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdMaWJyYXJ5IFBhdGhzJylcclxuXHRcdFx0LnNldERlc2MoYEVudGVyIG11bHRpcGxlIGxpYnJhcnkgcGF0aHMgZm9yIHRoZSBzZXJ2ZXIuIEN1cnJlbnQgdmFsaWQgcGF0aDogJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5saWJyYXJ5UGF0aH1gKVxyXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XHJcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoJysnKVxyXG5cdFx0XHRcdFx0LnNldEN0YSgpXHJcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxpYnJhcnlQYXRocy5wdXNoKCcnKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBcdTkxQ0RcdTY1QjBcdTZFMzJcdTY3RDNcdThCQkVcdTdGNkVcdTc1NENcdTk3NjJcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcclxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGlicmFyeVBhdGhzLmZvckVhY2goKHBhdGgsIGluZGV4KSA9PiB7XHJcblx0XHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBsaWJyYXJ5IHBhdGgnKVxyXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUocGF0aClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxpYnJhcnlQYXRoc1tpbmRleF0gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi51cGRhdGVMaWJyYXJ5UGF0aCgpOyAvLyBcdTY2RjRcdTY1QjBMaWJyYXJ5IFBhdGhcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gXHU5MUNEXHU2NUIwXHU2RTMyXHU2N0QzXHU4QkJFXHU3RjZFXHU3NTRDXHU5NzYyXHJcblx0XHRcdFx0XHRcdH0pKVxyXG5cdFx0XHRcdFx0LmFkZEV4dHJhQnV0dG9uKGJ1dHRvbiA9PiB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdjcm9zcycpXHJcblx0XHRcdFx0XHRcdFx0LnNldFRvb2x0aXAoJ1JlbW92ZScpXHJcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGlicmFyeVBhdGhzLnNwbGljZShpbmRleCwgMSk7XHJcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnVwZGF0ZUxpYnJhcnlQYXRoKCk7IC8vIFx1NjZGNFx1NjVCMExpYnJhcnkgUGF0aFxyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7IC8vIFx1OTFDRFx1NjVCMFx1NkUzMlx1NjdEM1x1OEJCRVx1N0Y2RVx1NzU0Q1x1OTc2MlxyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0Ly8gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQvLyBcdC5zZXROYW1lKCdDdXJyZW50IExpYnJhcnkgUGF0aCcpXHJcblx0XHQvLyBcdC5zZXREZXNjKCdUaGUgZmlyc3QgdmFsaWQgbGlicmFyeSBwYXRoJylcclxuXHRcdC8vIFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHQvLyBcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxpYnJhcnlQYXRoKVxyXG5cdFx0Ly8gXHRcdC5zZXREaXNhYmxlZCh0cnVlKSk7IC8vIFx1Nzk4MVx1NzUyOFx1OEY5M1x1NTE2NVx1Njg0Nlx1RkYwQ1x1NTNFQVx1NjYzRVx1NzkzQVx1NjcwOVx1NjU0OFx1OERFRlx1NUY4NFxyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnRWFnbGUgRm9sZGVyIElEJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBmb2xkZXIgSUQgZm9yIEVhZ2xlJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBmb2xkZXIgSUQnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJJZCB8fCAnJylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJJZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKCdJbWFnZSBzaXplJylcclxuXHRcdC5zZXREZXNjKCdEZWZhdWx0IHNpemUgZm9yIGltYWdlIGltcG9ydCcpXHJcblx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBpbWFnZSBzaXplJylcclxuXHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmltYWdlU2l6ZT8udG9TdHJpbmcoKSB8fCAnJylcclxuXHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmltYWdlU2l6ZSA9IHZhbHVlID8gcGFyc2VJbnQodmFsdWUpIDogdW5kZWZpbmVkO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkNsaWNrIHRvIHZpZXcgaW1hZ2VzXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiQ2xpY2sgdGhlIHJpZ2h0IGhhbGYgb2YgdGhlIGltYWdlIHRvIHZpZXcgdGhlIGltYWdlIGluIGRldGFpbC5cIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpY2tWaWV3KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2xpY2tWaWV3ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKCdBZGFwdGl2ZSBpbWFnZSBkaXNwbGF5IHJhdGlvIGJhc2VkIG9uIHdpbmRvdyBzaXplJylcclxuXHRcdC5zZXREZXNjKCdXaGVuIHRoZSBpbWFnZSBleGNlZWRzIHRoZSB3aW5kb3cgc2l6ZSwgdGhlIGltYWdlIGlzIGRpc3BsYXllZCBhZGFwdGl2ZWx5IGFjY29yZGluZyB0byB0aGUgd2luZG93IHNpemUuJylcclxuXHRcdC5hZGRTbGlkZXIoKHNsaWRlcikgPT4ge1xyXG5cdFx0XHRzbGlkZXIuc2V0TGltaXRzKDAuMSwgMSwgMC4wNSk7XHJcblx0XHRcdHNsaWRlci5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hZGFwdGl2ZVJhdGlvKTtcclxuXHRcdFx0c2xpZGVyLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFkYXB0aXZlUmF0aW8gPSB2YWx1ZTtcclxuXHRcdFx0XHRuZXcgTm90aWNlKGBBZGFwdGl2ZSByYXRpbzogJHt2YWx1ZX1gKTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHNsaWRlci5zZXREeW5hbWljVG9vbHRpcCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU3luY2hyb25pemluZyBhZHZhbmNlZCBVUkkgYXMgYSB0YWdcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTeW5jaHJvbml6ZSBhZHZhbmNlZCBVUkkgYXMgYSB0YWcgd2hlbiBwYWdlIGlkcyBleGlzdC5cIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWR2YW5jZWRJRClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFkdmFuY2VkSUQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnT2JzaWRpYW4gc3RvcmUgSUQnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgdGhlIE9ic2lkaWFuIHN0b3JlIElEJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdFbnRlciBPYnNpZGlhbiBzdG9yZSBJRCcpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9ic2lkaWFuU3RvcmVJZClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vYnNpZGlhblN0b3JlSWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoJ09wZW4gaW4gb2JzaWRpYW4nKVxyXG5cdFx0LnNldERlc2MoJ0RlZmF1bHQgb3BlbmluZyBvZiBhdHRhY2htZW50cyBpbiBvYnNpZGlhbicpXHJcblx0XHQuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG5cdFx0XHRkcm9wZG93bi5hZGRPcHRpb24oJ25ld1BhZ2UnLCAnT3BlbiBpbiBuZXcgcGFnZScpXHJcblx0XHRcdFx0LmFkZE9wdGlvbigncG9wdXAnLCAnT3BlbiBpbiBwb3B1cCcpXHJcblx0XHRcdFx0LmFkZE9wdGlvbigncmlnaHRQYW5lJywgJ09wZW4gaW4gcmlnaHQgcGFuZScpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5Jbk9ic2lkaWFuIHx8ICduZXdQYWdlJylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuSW5PYnNpZGlhbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKCdXZWJzaXRlIHVwbG9hZCcpXHJcblx0XHQuc2V0RGVzYygnVVJMIHVwbG9hZGVkIHRvIGVhZ2xlLiBub3RlOiAxLiBlYWdsZSB3aWxsIGF1dG9tYXRpY2FsbHkgZ2V0IHRoZSBjb3Zlciwgd2l0aCBhIGNlcnRhaW4gZGVsYXkuIDIuIHdoZW4gZXhwb3J0aW5nIG5vdGVzIHRvIHNoYXJlLCBtYXkgbm90IGJlIGFibGUgdG8ganVtcCBlZmZlY3RpdmVseS4gMy5UaGlzIG9wdGlvbiBkb2VzIG5vdCBhZmZlY3QgbGlua3MgZHJhZ2dlZC9jb3BpZWQgZnJvbSBlYWdsZSB0byBvYnNpZGlhbi4nKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53ZWJzaXRlVXBsb2FkKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLndlYnNpdGVVcGxvYWQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdSZWZyZXNoIFNlcnZlcicpXHJcblx0XHRcdC5zZXREZXNjKCdSZWZyZXNoIHRoZSBzZXJ2ZXIgd2l0aCB0aGUgbmV3IHNldHRpbmdzJylcclxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ1JlZnJlc2gnKVxyXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdHJlZnJlc2hTZXJ2ZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MubGlicmFyeVBhdGgsIHRoaXMucGx1Z2luLnNldHRpbmdzLnBvcnQpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0RlYnVnIE1vZGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgZGVidWcgbW9kZScpXHJcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1ZylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1ZyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcclxuXHR9XHJcbn0iLCAiLy9mcm9tICBbQXR0YWNoRmxvd10oaHR0cHM6Ly9naXRodWIuY29tL1lhb3podXdhL0F0dGFjaEZsb3cpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGV2dDogTW91c2VFdmVudCwgYWRhcHRpdmVSYXRpbzogbnVtYmVyKSB7XHJcblx0Y29uc3QgdGFyZ2V0ID0gZXZ0LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHJcblx0aWYgKHRhcmdldC50YWdOYW1lICE9PSAnSU1HJykge1xyXG5cdFx0cmVtb3ZlWm9vbWVkSW1hZ2UoKTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdGNvbnN0IHJlY3QgPSB0YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblx0Y29uc3QgaW1hZ2VDZW50ZXIgPSByZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMjtcclxuXHJcblx0aWYgKGV2dC5jbGllbnRYIDw9IGltYWdlQ2VudGVyIHx8IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZi16b29tZWQtaW1hZ2UnKSkgcmV0dXJuO1xyXG5cclxuXHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0Y29uc3QgbWFzayA9IGNyZWF0ZVpvb21NYXNrKCk7XHJcblx0Y29uc3QgeyB6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQgfSA9IGF3YWl0IGNyZWF0ZVpvb21lZEltYWdlKCh0YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCkuc3JjLCBhZGFwdGl2ZVJhdGlvKTtcclxuXHRjb25zdCBzY2FsZURpdiA9IGNyZWF0ZVpvb21TY2FsZURpdih6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQpO1xyXG5cclxuXHR6b29tZWRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChlKSA9PiBoYW5kbGVab29tTW91c2VXaGVlbChlLCB6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQsIHNjYWxlRGl2KSk7XHJcblx0em9vbWVkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoZSkgPT4gaGFuZGxlWm9vbUNvbnRleHRNZW51KGUsIHpvb21lZEltYWdlLCBvcmlnaW5hbFdpZHRoLCBvcmlnaW5hbEhlaWdodCwgc2NhbGVEaXYpKTtcclxuXHR6b29tZWRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4gaGFuZGxlWm9vbURyYWdTdGFydChlLCB6b29tZWRJbWFnZSkpO1xyXG5cdHpvb21lZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKGUpID0+IHtcclxuXHRcdGFkYXB0aXZlbHlEaXNwbGF5SW1hZ2Uoem9vbWVkSW1hZ2UsIG9yaWdpbmFsV2lkdGgsIG9yaWdpbmFsSGVpZ2h0LCBhZGFwdGl2ZVJhdGlvKTtcclxuXHRcdHVwZGF0ZVpvb21TY2FsZURpdihzY2FsZURpdiwgem9vbWVkSW1hZ2UsIG9yaWdpbmFsV2lkdGgsIG9yaWdpbmFsSGVpZ2h0KTtcclxuXHR9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVpvb21lZEltYWdlKCkge1xyXG5cdGNvbnN0IHpvb21lZEltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FmLXpvb21lZC1pbWFnZScpO1xyXG5cdGlmICh6b29tZWRJbWFnZSkgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh6b29tZWRJbWFnZSk7XHJcblx0Y29uc3Qgc2NhbGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWYtc2NhbGUtZGl2Jyk7XHJcblx0aWYgKHNjYWxlRGl2KSBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHNjYWxlRGl2KTtcclxuXHRjb25zdCBtYXNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FmLW1hc2snKTtcclxuXHRpZiAobWFzaykgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtYXNrKTtcclxufVxyXG5cclxuLy8gLi4uIGV4aXN0aW5nIGZ1bmN0aW9ucyBsaWtlIGNyZWF0ZVpvb21NYXNrLCBjcmVhdGVab29tZWRJbWFnZSwgYWRhcHRpdmVseURpc3BsYXlJbWFnZSwgZXRjLiAuLi4gXHJcbi8vIFx1NTIxQlx1NUVGQVx1NjUzRVx1NTkyN1x1NTZGRVx1NzI0N1x1NzY4NFx1OTA2RVx1N0Y2OVx1NUM0MlxyXG5mdW5jdGlvbiBjcmVhdGVab29tTWFzaygpOiBIVE1MRGl2RWxlbWVudCB7XHJcblx0Y29uc3QgbWFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cdG1hc2suaWQgPSAnYWYtbWFzayc7XHJcblx0bWFzay5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XHJcblx0bWFzay5zdHlsZS50b3AgPSAnMCc7XHJcblx0bWFzay5zdHlsZS5sZWZ0ID0gJzAnO1xyXG5cdG1hc2suc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcblx0bWFzay5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XHJcblx0bWFzay5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoMCwgMCwgMCwgMC41KSc7XHJcblx0bWFzay5zdHlsZS56SW5kZXggPSAnOTk5OCc7XHJcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtYXNrKTtcclxuXHRyZXR1cm4gbWFzaztcclxufVxyXG5cclxuXHJcbi8vIFx1NTIxQlx1NUVGQVx1NjUzRVx1NTkyN1x1NTZGRVx1NzI0N1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVab29tZWRJbWFnZShzcmM6IHN0cmluZywgYWRhcHRpdmVfcmF0aW86IG51bWJlcik6IFByb21pc2U8eyB6b29tZWRJbWFnZTogSFRNTEltYWdlRWxlbWVudCwgb3JpZ2luYWxXaWR0aDogbnVtYmVyLCBvcmlnaW5hbEhlaWdodDogbnVtYmVyIH0+IHtcclxuXHRjb25zdCB6b29tZWRJbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdHpvb21lZEltYWdlLmlkID0gJ2FmLXpvb21lZC1pbWFnZSc7XHJcblx0em9vbWVkSW1hZ2Uuc3JjID0gc3JjO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuXHR6b29tZWRJbWFnZS5zdHlsZS56SW5kZXggPSAnOTk5OSc7XHJcblx0em9vbWVkSW1hZ2Uuc3R5bGUudG9wID0gJzUwJSc7XHJcblx0em9vbWVkSW1hZ2Uuc3R5bGUubGVmdCA9ICc1MCUnO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknO1xyXG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoem9vbWVkSW1hZ2UpO1xyXG5cclxuXHRsZXQgb3JpZ2luYWxXaWR0aCA9IHpvb21lZEltYWdlLm5hdHVyYWxXaWR0aDtcclxuXHRsZXQgb3JpZ2luYWxIZWlnaHQgPSB6b29tZWRJbWFnZS5uYXR1cmFsSGVpZ2h0O1xyXG5cclxuXHRhZGFwdGl2ZWx5RGlzcGxheUltYWdlKHpvb21lZEltYWdlLCBvcmlnaW5hbFdpZHRoLCBvcmlnaW5hbEhlaWdodCwgYWRhcHRpdmVfcmF0aW8pO1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0em9vbWVkSW1hZ2UsXHJcblx0XHRvcmlnaW5hbFdpZHRoLFxyXG5cdFx0b3JpZ2luYWxIZWlnaHRcclxuXHR9O1xyXG59XHJcblxyXG5cclxuLy8gXHU4MUVBXHU5MDAyXHU1RTk0XHU1NkZFXHU3MjQ3XHU1OTI3XHU1QzBGXHJcbmZ1bmN0aW9uIGFkYXB0aXZlbHlEaXNwbGF5SW1hZ2Uoem9vbWVkSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIG9yaWdpbmFsV2lkdGg6IG51bWJlciwgb3JpZ2luYWxIZWlnaHQ6IG51bWJlciwgYWRhcHRpdmVfcmF0aW86IG51bWJlcikge1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLmxlZnQgPSBgNTAlYDtcclxuXHR6b29tZWRJbWFnZS5zdHlsZS50b3AgPSBgNTAlYDtcclxuXHQvLyBcdTU5ODJcdTY3OUNcdTU2RkVcdTcyNDdcdTc2ODRcdTVDM0FcdTVCRjhcdTU5MjdcdTRFOEVcdTVDNEZcdTVFNTVcdTVDM0FcdTVCRjhcdUZGMENcdTRGN0ZcdTUxNzZcdTU5MjdcdTVDMEZcdTRFM0FcdTVDNEZcdTVFNTVcdTVDM0FcdTVCRjhcdTc2ODQgYWRhcHRpdmVfcmF0aW9cclxuXHRsZXQgc2NyZWVuUmF0aW8gPSBhZGFwdGl2ZV9yYXRpbzsgICAvLyBcdTVDNEZcdTVFNTVcdTVDM0FcdTVCRjhcdTZCRDRcdTRGOEJcclxuXHRsZXQgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuXHRsZXQgc2NyZWVuSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG5cclxuXHQvLyBBZGp1c3QgaW5pdGlhbCBzaXplIG9mIHRoZSBpbWFnZSBpZiBpdCBleGNlZWRzIHNjcmVlbiBzaXplXHJcblx0aWYgKG9yaWdpbmFsV2lkdGggPiBzY3JlZW5XaWR0aCB8fCBvcmlnaW5hbEhlaWdodCA+IHNjcmVlbkhlaWdodCkge1xyXG5cdFx0aWYgKG9yaWdpbmFsV2lkdGggLyBzY3JlZW5XaWR0aCA+IG9yaWdpbmFsSGVpZ2h0IC8gc2NyZWVuSGVpZ2h0KSB7XHJcblx0XHRcdHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7c2NyZWVuV2lkdGggKiBzY3JlZW5SYXRpb31weGA7XHJcblx0XHRcdHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9IGAke3NjcmVlbkhlaWdodCAqIHNjcmVlblJhdGlvfXB4YDtcclxuXHRcdFx0em9vbWVkSW1hZ2Uuc3R5bGUud2lkdGggPSAnYXV0byc7XHJcblx0XHR9XHJcblx0fSBlbHNlIHtcclxuXHRcdHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7b3JpZ2luYWxXaWR0aH1weGA7XHJcblx0XHR6b29tZWRJbWFnZS5zdHlsZS5oZWlnaHQgPSBgJHtvcmlnaW5hbEhlaWdodH1weGA7XHJcblx0fVxyXG59XHJcblxyXG4vLyBcdTUyMUJcdTVFRkFcdTc2N0VcdTUyMDZcdTZCRDRcdTYzMDdcdTc5M0FcdTUxNDNcdTdEMjBcclxuZnVuY3Rpb24gY3JlYXRlWm9vbVNjYWxlRGl2KHpvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIG9yaWdpbmFsSGVpZ2h0OiBudW1iZXIpOiBIVE1MRGl2RWxlbWVudCB7XHJcblx0Y29uc3Qgc2NhbGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuXHRzY2FsZURpdi5pZCA9ICdhZi1zY2FsZS1kaXYnO1xyXG5cdHNjYWxlRGl2LmNsYXNzTGlzdC5hZGQoJ2FmLXNjYWxlLWRpdicpO1xyXG5cdHNjYWxlRGl2LnN0eWxlLnpJbmRleCA9ICcxMDAwMCc7XHJcblx0dXBkYXRlWm9vbVNjYWxlRGl2KHNjYWxlRGl2LCB6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQpO1xyXG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NhbGVEaXYpO1xyXG5cdHJldHVybiBzY2FsZURpdjtcclxufVxyXG4vLyBcdTY2RjRcdTY1QjBcdTc2N0VcdTUyMDZcdTZCRDRcdTYzMDdcdTc5M0FcdTUxNDNcdTdEMjBcclxuZnVuY3Rpb24gdXBkYXRlWm9vbVNjYWxlRGl2KHNjYWxlRGl2OiBIVE1MRGl2RWxlbWVudCwgem9vbWVkSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIG9yaWdpbmFsV2lkdGg6IG51bWJlciwgb3JpZ2luYWxIZWlnaHQ6IG51bWJlcikge1xyXG5cdC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NzY4NFx1NUJCRFx1NUVBNlx1NTQ4Q1x1OUFEOFx1NUVBNlxyXG5cdGNvbnN0IHdpZHRoID0gem9vbWVkSW1hZ2Uub2Zmc2V0V2lkdGg7XHJcblx0Y29uc3QgaGVpZ2h0ID0gem9vbWVkSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xyXG5cdGxldCBzY2FsZVBlcmNlbnQgPSB3aWR0aCAvIG9yaWdpbmFsV2lkdGggKiAxMDA7XHJcblx0c2NhbGVEaXYuaW5uZXJUZXh0ID0gYCR7d2lkdGh9XHUwMEQ3JHtoZWlnaHR9ICgke3NjYWxlUGVyY2VudC50b0ZpeGVkKDEpfSUpYDtcclxufVxyXG5cclxuLy8gXHU2RURBXHU4RjZFXHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XHU1NjY4XHJcbmZ1bmN0aW9uIGhhbmRsZVpvb21Nb3VzZVdoZWVsKGU6IFdoZWVsRXZlbnQsIHpvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50LCBvcmlnaW5hbFdpZHRoOiBudW1iZXIsIG9yaWdpbmFsSGVpZ2h0OiBudW1iZXIsIHNjYWxlRGl2OiBIVE1MRGl2RWxlbWVudCkge1xyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRjb25zdCBtb3VzZVggPSBlLmNsaWVudFg7XHJcblx0Y29uc3QgbW91c2VZID0gZS5jbGllbnRZO1xyXG5cdGNvbnN0IHNjYWxlID0gZS5kZWx0YVkgPiAwID8gMC45NSA6IDEuMDU7XHJcblx0Y29uc3QgbmV3V2lkdGggPSBzY2FsZSAqIHpvb21lZEltYWdlLm9mZnNldFdpZHRoO1xyXG5cdGNvbnN0IG5ld0hlaWdodCA9IHNjYWxlICogem9vbWVkSW1hZ2Uub2Zmc2V0SGVpZ2h0O1xyXG5cdGNvbnN0IG5ld0xlZnQgPSBtb3VzZVggLSAobW91c2VYIC0gem9vbWVkSW1hZ2Uub2Zmc2V0TGVmdCkgKiBzY2FsZTtcclxuXHRjb25zdCBuZXdUb3AgPSBtb3VzZVkgLSAobW91c2VZIC0gem9vbWVkSW1hZ2Uub2Zmc2V0VG9wKSAqIHNjYWxlO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7bmV3V2lkdGh9cHhgO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLmhlaWdodCA9IGAke25ld0hlaWdodH1weGA7XHJcblx0em9vbWVkSW1hZ2Uuc3R5bGUubGVmdCA9IGAke25ld0xlZnR9cHhgO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLnRvcCA9IGAke25ld1RvcH1weGA7XHJcblx0dXBkYXRlWm9vbVNjYWxlRGl2KHNjYWxlRGl2LCB6b29tZWRJbWFnZSwgb3JpZ2luYWxXaWR0aCwgb3JpZ2luYWxIZWlnaHQpO1xyXG59XHJcbi8vIFx1OUYyMFx1NjgwN1x1NTNGM1x1OTUyRVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1NTY2OFxyXG5mdW5jdGlvbiBoYW5kbGVab29tQ29udGV4dE1lbnUoZTogTW91c2VFdmVudCwgem9vbWVkSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIG9yaWdpbmFsV2lkdGg6IG51bWJlciwgb3JpZ2luYWxIZWlnaHQ6IG51bWJlciwgc2NhbGVEaXY6IEhUTUxEaXZFbGVtZW50KSB7XHJcblx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLndpZHRoID0gYCR7b3JpZ2luYWxXaWR0aH1weGA7XHJcblx0em9vbWVkSW1hZ2Uuc3R5bGUuaGVpZ2h0ID0gYCR7b3JpZ2luYWxIZWlnaHR9cHhgO1xyXG5cdHpvb21lZEltYWdlLnN0eWxlLmxlZnQgPSBgNTAlYDtcclxuXHR6b29tZWRJbWFnZS5zdHlsZS50b3AgPSBgNTAlYDtcclxuXHR1cGRhdGVab29tU2NhbGVEaXYoc2NhbGVEaXYsIHpvb21lZEltYWdlLCBvcmlnaW5hbFdpZHRoLCBvcmlnaW5hbEhlaWdodCk7XHJcbn1cclxuXHJcbi8vIFx1NjJENlx1NTJBOFx1NEU4Qlx1NEVGNlx1NTkwNFx1NzQwNlx1NTY2OFxyXG5mdW5jdGlvbiBoYW5kbGVab29tRHJhZ1N0YXJ0KGU6IE1vdXNlRXZlbnQsIHpvb21lZEltYWdlOiBIVE1MSW1hZ2VFbGVtZW50KSB7XHJcblx0Ly8gXHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XHU3Njg0XHU0RUUzXHU3ODAxIC4uLlxyXG5cdC8vIFx1OTYzQlx1NkI2Mlx1NkQ0Rlx1ODlDOFx1NTY2OFx1OUVEOFx1OEJBNFx1NzY4NFx1NjJENlx1NTJBOFx1NEU4Qlx1NEVGNlxyXG5cdGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0Ly8gXHU4QkIwXHU1RjU1XHU3MEI5XHU1MUZCXHU0RjREXHU3RjZFXHJcblx0bGV0IGNsaWNrWCA9IGUuY2xpZW50WDtcclxuXHRsZXQgY2xpY2tZID0gZS5jbGllbnRZO1xyXG5cclxuXHQvLyBcdTY2RjRcdTY1QjBcdTUxNDNcdTdEMjBcdTRGNERcdTdGNkVcdTc2ODRcdTU2REVcdThDMDNcdTUxRkRcdTY1NzBcclxuXHRjb25zdCB1cGRhdGVQb3NpdGlvbiA9IChtb3ZlRXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHQvLyBcdThCQTFcdTdCOTdcdTlGMjBcdTY4MDdcdTc5RkJcdTUyQThcdThERERcdTc5QkJcclxuXHRcdGxldCBtb3ZlWCA9IG1vdmVFdnQuY2xpZW50WCAtIGNsaWNrWDtcclxuXHRcdGxldCBtb3ZlWSA9IG1vdmVFdnQuY2xpZW50WSAtIGNsaWNrWTtcclxuXHJcblx0XHQvLyBcdTVCOUFcdTRGNERcdTU2RkVcdTcyNDdcdTRGNERcdTdGNkVcclxuXHRcdHpvb21lZEltYWdlLnN0eWxlLmxlZnQgPSBgJHt6b29tZWRJbWFnZS5vZmZzZXRMZWZ0ICsgbW92ZVh9cHhgO1xyXG5cdFx0em9vbWVkSW1hZ2Uuc3R5bGUudG9wID0gYCR7em9vbWVkSW1hZ2Uub2Zmc2V0VG9wICsgbW92ZVl9cHhgO1xyXG5cclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1NzBCOVx1NTFGQlx1NEY0RFx1N0Y2RVxyXG5cdFx0Y2xpY2tYID0gbW92ZUV2dC5jbGllbnRYO1xyXG5cdFx0Y2xpY2tZID0gbW92ZUV2dC5jbGllbnRZO1xyXG5cdH1cclxuXHJcblx0Ly8gXHU5RjIwXHU2ODA3XHU3OUZCXHU1MkE4XHU0RThCXHU0RUY2XHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdXBkYXRlUG9zaXRpb24pO1xyXG5cclxuXHQvLyBcdTlGMjBcdTY4MDdcdTY3N0VcdTVGMDBcdTRFOEJcdTRFRjZcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24gbGlzdGVuZXIoKSB7XHJcblx0XHQvLyBcdTc5RkJcdTk2NjRcdTlGMjBcdTY4MDdcdTc5RkJcdTUyQThcdTU0OENcdTlGMjBcdTY4MDdcdTY3N0VcdTVGMDBcdTc2ODRcdTc2RDFcdTU0MkNcdTU2NjhcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHVwZGF0ZVBvc2l0aW9uKTtcclxuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBsaXN0ZW5lcik7XHJcblx0fSwgeyBvbmNlOiB0cnVlIH0pO1xyXG59IiwgImltcG9ydCB7IE1lbnUsIE1lbnVJdGVtLCBNYXJrZG93blZpZXcsIE5vdGljZSwgTW9kYWwsIEFwcCwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCB7IG9uRWxlbWVudCB9IGZyb20gJy4vb25FbGVtZW50JztcclxuaW1wb3J0IHsgcHJpbnQsIHNldERlYnVnIH0gZnJvbSAnLi9tYWluJztcclxuaW1wb3J0IHsgZXhlYywgc3Bhd24sIGV4ZWNTeW5jIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XHJcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdmcyc7XHJcbmltcG9ydCB7IEVkaXRvclZpZXd9IGZyb20gJ0Bjb2RlbWlycm9yL3ZpZXcnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUxpbmtDbGljayhwbHVnaW46IE15UGx1Z2luLCBldmVudDogTW91c2VFdmVudCwgdXJsOiBzdHJpbmcpIHtcclxuXHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRjb25zdCBpblByZXZpZXcgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmdldE1vZGUoKSA9PSBcInByZXZpZXdcIjtcclxuXHRpZiAoaW5QcmV2aWV3KSB7XHJcblx0XHRhZGRFYWdsZUltYWdlTWVudVByZXZpZXdNb2RlKHBsdWdpbiwgbWVudSwgdXJsLCBldmVudCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdGFkZEVhZ2xlSW1hZ2VNZW51U291cmNlTW9kZShwbHVnaW4sIG1lbnUsIHVybCwgZXZlbnQpO1xyXG5cdH1cclxuXHRyZWdpc3RlckVzY2FwZUJ1dHRvbihwbHVnaW4sIG1lbnUpO1xyXG5cdGxldCBvZmZzZXQgPSAwO1xyXG5cdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgKyBvZmZzZXQgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlYWdsZUltYWdlQ29udGV4dE1lbnVDYWxsKHRoaXM6IE15UGx1Z2luLCBldmVudDogTW91c2VFdmVudCkge1xyXG5cdGNvbnN0IGltZyA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50O1xyXG5cdGNvbnN0IGluVGFibGU6IGJvb2xlYW4gPSBpbWcuY2xvc2VzdCgndGFibGUnKSAhPSBudWxsO1xyXG5cdGNvbnN0IGluQ2FsbG91dDogYm9vbGVhbiA9IGltZy5jbG9zZXN0KCcuY2FsbG91dCcpICE9IG51bGw7XHJcblx0aWYgKGltZy5pZCA9PSAnYWYtem9vbWVkLWltYWdlJykgcmV0dXJuO1xyXG5cdGlmICghaW1nLnNyYy5zdGFydHNXaXRoKCdodHRwJykpIHJldHVybjtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0dGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KT8uZWRpdG9yPy5ibHVyKCk7XHJcblx0aW1nLmNsYXNzTGlzdC5yZW1vdmUoJ2ltYWdlLXJlYWR5LWNsaWNrLXZpZXcnLCAnaW1hZ2UtcmVhZHktcmVzaXplJyk7XHJcblx0Y29uc3QgdXJsID0gaW1nLnNyYztcclxuXHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuXHRjb25zdCBpblByZXZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5nZXRNb2RlKCkgPT0gXCJwcmV2aWV3XCI7XHJcblx0aWYgKGluUHJldmlldykge1xyXG5cdFx0YWRkRWFnbGVJbWFnZU1lbnVQcmV2aWV3TW9kZSh0aGlzLCBtZW51LCB1cmwsIGV2ZW50KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0YWRkRWFnbGVJbWFnZU1lbnVTb3VyY2VNb2RlKHRoaXMsIG1lbnUsIHVybCwgZXZlbnQpO1xyXG5cdH1cclxuXHRyZWdpc3RlckVzY2FwZUJ1dHRvbih0aGlzLCBtZW51KTtcclxuXHRsZXQgb2Zmc2V0ID0gMDtcclxuXHRpZiAoIWluUHJldmlldyAmJiAoaW5UYWJsZSB8fCBpbkNhbGxvdXQpKSBvZmZzZXQgPSAtMTM4O1xyXG5cdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgKyBvZmZzZXQgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckVzY2FwZUJ1dHRvbihwbHVnaW46IE15UGx1Z2luLCBtZW51OiBNZW51LCBkb2N1bWVudDogRG9jdW1lbnQgPSBhY3RpdmVEb2N1bWVudCkge1xyXG5cdG1lbnUucmVnaXN0ZXIoXHJcblx0XHRvbkVsZW1lbnQoXHJcblx0XHRcdGRvY3VtZW50LFxyXG5cdFx0XHRcImtleWRvd25cIiBhcyBrZXlvZiBIVE1MRWxlbWVudEV2ZW50TWFwLFxyXG5cdFx0XHRcIipcIixcclxuXHRcdFx0KGU6IEtleWJvYXJkRXZlbnQpID0+IHtcclxuXHRcdFx0XHRpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRtZW51LmhpZGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdClcclxuXHQpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkRWFnbGVJbWFnZU1lbnVQcmV2aWV3TW9kZShwbHVnaW46IE15UGx1Z2luLCBtZW51OiBNZW51LCBvYnVybDogc3RyaW5nLCBldmVudDogTW91c2VFdmVudCkge1xyXG5cdGNvbnN0IGltYWdlSW5mbyA9IGF3YWl0IGZldGNoSW1hZ2VJbmZvKG9idXJsKTtcclxuXHJcbiAgICBpZiAoaW1hZ2VJbmZvKSB7XHJcbiAgICAgICAgY29uc3QgeyBpZCwgbmFtZSwgZXh0LCBhbm5vdGF0aW9uLCB0YWdzLCB1cmwgfSA9IGltYWdlSW5mbztcclxuICAgICAgICAvLyBjb25zdCBpbmZvVG9Db3B5ID0gYElEOiAke2lkfSwgTmFtZTogJHtuYW1lfSwgRXh0OiAke2V4dH0sIEFubm90YXRpb246ICR7YW5ub3RhdGlvbn0sIFRhZ3M6ICR7dGFnc30sIFVSTDogJHt1cmx9YDtcclxuICAgICAgICAvLyBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChpbmZvVG9Db3B5KTtcclxuICAgICAgICAvLyBuZXcgTm90aWNlKGBDb3BpZWQ6ICR7aW5mb1RvQ29weX1gKTtcclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxyXG4gICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImZpbGUtc3ltbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBvYnNpZGlhblwiKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU4QkJFXHU3RjZFXHU1MUIzXHU1QjlBXHU1OTgyXHU0RjU1XHU2MjUzXHU1RjAwXHU5NEZFXHU2M0E1XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3Blbk1ldGhvZCA9IHBsdWdpbi5zZXR0aW5ncy5vcGVuSW5PYnNpZGlhbiB8fCAnbmV3UGFnZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5NZXRob2QgPT09ICduZXdQYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTY1QjBcdTk4NzVcdTk3NjJcdTYyNTNcdTVGMDBcdUZGMDhcdTlFRDhcdThCQTRcdTg4NENcdTRFM0FcdUZGMDlcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4ob2J1cmwsICdfYmxhbmsnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wZW5NZXRob2QgPT09ICdwb3B1cCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IE9ic2lkaWFuIFx1NzY4NFx1NzJFQ1x1N0FDQlx1N0E5N1x1NTNFM1x1NjI1M1x1NUYwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignd2luZG93Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3ZWJ2aWV3ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG9idXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcGVuTWV0aG9kID09PSAncmlnaHRQYW5lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTUzRjNcdTRGQTdcdTY1QjBcdTY4MEZcdTRFMkRcdTYyNTNcdTVGMDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0JywgJ3ZlcnRpY2FsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3ZWJ2aWV3ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IG9idXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1zeW1saW5rXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJPcGVuIGluIGVhZ2xlXCIpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWFnbGVMaW5rID0gYGVhZ2xlOi8vaXRlbS8ke2lkfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoZWFnbGVMaW5rKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihlYWdsZUxpbmssICdfc2VsZicpOyAvLyBcdTc2RjRcdTYzQTVcdThGRDBcdTg4NENcdThERjNcdThGNkNcdTUyMzAgZWFnbGU6Ly8gXHU5NEZFXHU2M0E1XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwic3F1YXJlLWFycm93LW91dC11cC1yaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiB0aGUgZGVmYXVsdCBhcHBcIilcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsaWJyYXJ5UGF0aCA9IHBsdWdpbi5zZXR0aW5ncy5saWJyYXJ5UGF0aDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBsb2NhbEZpbGVQYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaWJyYXJ5UGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJpbWFnZXNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7aWR9LmluZm9gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgJHtuYW1lfS4ke2V4dH1gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTYyNTNcdTUzNzBcdThERUZcdTVGODRcdTc1MjhcdTRFOEVcdThDMDNcdThCRDVcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGaWxlIHJlYWwgcGF0aDogJHtsb2NhbEZpbGVQYXRofWApO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTY1ODdcdTRFRjZcdTc2ODRcdTc3MUZcdTVCOUVcdThERUZcdTVGODRcdTY2MkY6ICR7bG9jYWxGaWxlUGF0aH1gKTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1Mjggc3Bhd24gXHU4QzAzXHU3NTI4IGV4cGxvcmVyLmV4ZSBcdTYyNTNcdTVGMDBcdTY1ODdcdTRFRjZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHNwYXduKCdleHBsb3Jlci5leGUnLCBbbG9jYWxGaWxlUGF0aF0sIHsgc2hlbGw6IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCdFcnJvciBvcGVuaW5nIGZpbGU6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDYW5ub3Qgb3BlbiB0aGUgZmlsZSwgcGxlYXNlIGNoZWNrIGlmIHRoZSBwYXRoIGlzIGNvcnJlY3QnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQub24oJ2V4aXQnLCAoY29kZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1RoZSBmaWxlIGhhcyBiZWVuIG9wZW5lZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGBUaGUgZmlsZSBjYW5ub3QgYmUgb3BlbmVkIG5vcm1hbGx5LCBleGl0IGNvZGU6ICR7Y29kZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZXh0ZXJuYWwtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBvdGhlciBhcHBzXCIpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlicmFyeVBhdGggPSBwbHVnaW4uc2V0dGluZ3MubGlicmFyeVBhdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9jYWxGaWxlUGF0aCA9IHBhdGguam9pbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlicmFyeVBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaW1hZ2VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke2lkfS5pbmZvYCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7bmFtZX0uJHtleHR9YFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2MjUzXHU1MzcwXHU4REVGXHU1Rjg0XHU3NTI4XHU0RThFXHU4QzAzXHU4QkQ1XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRmlsZSByZWFsIHBhdGg6ICR7bG9jYWxGaWxlUGF0aH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBwcmludChgXHU2NTg3XHU0RUY2XHU3Njg0XHU3NzFGXHU1QjlFXHU4REVGXHU1Rjg0XHU2NjJGOiAke2xvY2FsRmlsZVBhdGh9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4IHJ1bmRsbDMyIFx1OEMwM1x1NzUyOFx1N0NGQlx1N0VERlx1NzY4NFwiXHU2MjUzXHU1RjAwXHU2NUI5XHU1RjBGXCJcdTVCRjlcdThCRERcdTY4NDZcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlsZCA9IHNwYXduKCdydW5kbGwzMicsIFsnc2hlbGwzMi5kbGwsT3BlbkFzX1J1bkRMTCcsIGxvY2FsRmlsZVBhdGhdLCB7IHNoZWxsOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ0Vycm9yIG9wZW5pbmcgZmlsZTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBvcGVuIHRoZSBmaWxlLCBwbGVhc2UgY2hlY2sgaWYgdGhlIHBhdGggaXMgY29ycmVjdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5vbignZXhpdCcsIChjb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgnVGhlIGZpbGUgaGFzIGJlZW4gb3BlbmVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoYFRoZSBmaWxlIGNhbm5vdCBiZSBvcGVuZWQgbm9ybWFsbHksIGV4aXQgY29kZTogJHtjb2RlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHRcclxuICAgICAgICAvLyBcdTU5MERcdTUyMzZcdTZFOTBcdTY1ODdcdTRFRjZcclxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxyXG4gICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLnNldEljb24oXCJjb3B5XCIpXHJcbiAgICAgICAgICAgIC5zZXRUaXRsZShcIkNvcHkgc291cmNlIGZpbGVcIilcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlicmFyeVBhdGggPSBwbHVnaW4uc2V0dGluZ3MubGlicmFyeVBhdGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsb2NhbEZpbGVQYXRoID0gcGF0aC5qb2luKFxyXG4gICAgICAgICAgICAgICAgICAgIGxpYnJhcnlQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaW1hZ2VzXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYCR7aWR9LmluZm9gLFxyXG4gICAgICAgICAgICAgICAgICAgIGAke25hbWV9LiR7ZXh0fWBcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvcHlGaWxlVG9DbGlwYm9hcmRDTUQobG9jYWxGaWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvcGllZCB0byBjbGlwYm9hcmQhXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNvcHkgdGhlIGZpbGUhXCIsIDMwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHRcdFxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY2FzZS1zZW5zaXRpdmVcIilcclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShgRWFnbGUgTmFtZTogJHtuYW1lfWApXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgQ29waWVkOiAke25hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwibGV0dGVyLXRleHRcIilcclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShgRWFnbGUgQW5ub3RhdGlvbjogJHthbm5vdGF0aW9ufWApXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoYW5ub3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgQ29waWVkOiAke2Fubm90YXRpb259YCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwibGluay0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoYEVhZ2xlIHVybDogJHt1cmx9YClcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19zZWxmJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYENvcGllZDogJHt1cmx9YCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gXHU3ODZFXHU0RkREIHRhZ3MgXHU2NjJGXHU0RTAwXHU0RTJBXHU2NTcwXHU3RUM0XHJcbiAgICAgICAgY29uc3QgdGFnc0FycmF5ID0gQXJyYXkuaXNBcnJheSh0YWdzKSA/IHRhZ3MgOiB0YWdzLnNwbGl0KCcsJykubWFwKHRhZyA9PiB0YWcudHJpbSgpKTtcclxuXHJcbiAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtOiBNZW51SXRlbSkgPT5cclxuICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oXCJ0YWdzXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoYEVhZ2xlIHRhZzogJHt0YWdzQXJyYXkuam9pbignLCAnKX1gKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhZ3NTdHJpbmcgPSB0YWdzQXJyYXkuam9pbignLCAnKTtcclxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0YWdzU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiBuZXcgTm90aWNlKGBDb3BpZWQ6ICR7dGFnc1N0cmluZ31gKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSB0YWdzJykpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwid3JlbmNoXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJNb2RpZnkgcHJvcGVydGllc1wiKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBNb2RpZnlQcm9wZXJ0aWVzTW9kYWwodGhpcy5hcHAsIGlkLCBuYW1lLCBhbm5vdGF0aW9uLCB1cmwsIHRhZ3NBcnJheSwgKG5ld0lkLCBuZXdOYW1lLCBuZXdBbm5vdGF0aW9uLCBuZXdVcmwsIG5ld1RhZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbmV3IE5vdGljZShgTmFtZSBjaGFuZ2VkIHRvOiAke25ld05hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1OEZEOVx1OTFDQ1x1NTkwNFx1NzQwNlx1NEZERFx1NUI1OFx1OTAzQlx1OEY5MVxyXG4gICAgICAgICAgICAgICAgICAgIH0pLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBcdTUxNzZcdTRFRDZcdTgzRENcdTUzNTVcdTk4NzlcdTUzRUZcdTRFRTVcdTdFRTdcdTdFRURcdTRGN0ZcdTc1MjggeyBpZCwgbmFtZSwgZXh0IH0gXHU2NTcwXHU2MzZFXHJcbiAgICB9XHJcblxyXG5cdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRFYWdsZUltYWdlTWVudVNvdXJjZU1vZGUocGx1Z2luOiBNeVBsdWdpbiwgbWVudTogTWVudSwgdXJsOiBzdHJpbmcsIGV2ZW50OiBNb3VzZUV2ZW50KSB7XHJcblx0YXdhaXQgYWRkRWFnbGVJbWFnZU1lbnVQcmV2aWV3TW9kZShwbHVnaW4sIG1lbnUsIHVybCwgZXZlbnQpO1xyXG5cclxuICAgIG1lbnUuYWRkSXRlbSgoaXRlbTogTWVudUl0ZW0pID0+XHJcbiAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAuc2V0SWNvbihcImNvcHlcIilcclxuICAgICAgICAgICAgLnNldFRpdGxlKFwiQ29weSBtYXJrZG93biBsaW5rXCIpXHJcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmVkaXRvcjtcclxuICAgICAgICAgICAgICAgIGlmICghZWRpdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ2Fubm90IGZpbmQgdGhlIGFjdGl2ZSBlZGl0b3InKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgZG9jID0gZWRpdG9yLmdldERvYygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUNvdW50ID0gZG9jLmxpbmVDb3VudCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBsaW5rRm91bmQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lID0gMDsgbGluZSA8IGxpbmVDb3VudDsgbGluZSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZVRleHQgPSBkb2MuZ2V0TGluZShsaW5lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU2N0U1XHU2MjdFIE1hcmtkb3duIFx1OTRGRVx1NjNBNVx1RkYwQ1x1NTMzOVx1OTE0RFx1NUUyNlx1NTNGOVx1NTNGN1x1NTQ4Q1x1NEUwRFx1NUUyNlx1NTNGOVx1NTNGN1x1NzY4NFx1OTRGRVx1NjNBNVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKCE/XFxcXFsuKj9cXFxcXVxcXFwoJHt1cmx9XFxcXCkpYCwgJ2cnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHJlZ2V4LmV4ZWMobGluZVRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua1RleHQgPSBtYXRjaFsxXTsgLy8gXHU4M0I3XHU1M0Q2XHU1QjhDXHU2NTc0XHU3Njg0XHU1MzM5XHU5MTREXHU2NTg3XHU2NzJDXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KGxpbmtUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTGluayBjb3BpZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua0ZvdW5kID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7IC8vIFx1NjI3RVx1NTIzMFx1NUU3Nlx1NTkwRFx1NTIzNlx1NTQwRVx1OTAwMFx1NTFGQVx1NUZBQVx1NzNBRlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWxpbmtGb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Nhbm5vdCBmaW5kIHRoZSBsaW5rJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfSlcclxuICAgICk7XHJcbiAgICBtZW51LmFkZEl0ZW0oKGl0ZW06IE1lbnVJdGVtKSA9PlxyXG4gICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgLnNldEljb24oXCJ0cmFzaC0yXCIpXHJcbiAgICAgICAgICAgIC5zZXRUaXRsZShcIkNsZWFyIG1hcmtkb3duIGxpbmtcIilcclxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVdGlsLmhhbmRsZXJEZWxGaWxlKEZpbGVCYXNlTmFtZSwgY3VycmVudE1kLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBnZXRNb3VzZUV2ZW50VGFyZ2V0KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWRpdG9yVmlldyA9IGVkaXRvci5jbSBhcyBFZGl0b3JWaWV3O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldF9wb3MgPSBlZGl0b3JWaWV3LnBvc0F0RE9NKHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlQ3VyVGFyZ2V0TGluayh1cmwsIHBsdWdpbiwgdGFyZ2V0X3Bvcyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IsIGNvdWxkIG5vdCBjbGVhciB0aGUgZmlsZSFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICApO1xyXG5cdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5wYWdlWCwgeTogZXZlbnQucGFnZVkgfSk7XHJcbn0gXHJcblxyXG4vLyBcdTRGRUVcdTY1MzllYWdsZVx1NUM1RVx1NjAyN1x1NEUyRFx1NzY4NGFubm90YXRpb24sdXJsLHRhZ3NcclxuY2xhc3MgTW9kaWZ5UHJvcGVydGllc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG5cdGlkOiBzdHJpbmc7XHJcblx0bmFtZTogc3RyaW5nO1xyXG5cdGFubm90YXRpb246IHN0cmluZztcclxuXHR1cmw6IHN0cmluZztcclxuXHR0YWdzOiBzdHJpbmdbXTtcclxuXHRvblN1Ym1pdDogKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgYW5ub3RhdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZywgdGFnczogc3RyaW5nW10pID0+IHZvaWQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmcsIGFubm90YXRpb246IHN0cmluZywgdXJsOiBzdHJpbmcsIHRhZ3M6IHN0cmluZ1tdLCBvblN1Ym1pdDogKGlkOiBzdHJpbmcsIG5hbWU6IHN0cmluZywgYW5ub3RhdGlvbjogc3RyaW5nLCB1cmw6IHN0cmluZywgdGFnczogc3RyaW5nW10pID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLmlkID0gaWQ7XHJcblx0XHR0aGlzLm5hbWUgPSBuYW1lO1xyXG5cdFx0dGhpcy5hbm5vdGF0aW9uID0gYW5ub3RhdGlvbjtcclxuXHRcdHRoaXMudXJsID0gdXJsO1xyXG5cdFx0dGhpcy50YWdzID0gdGFncztcclxuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01vZGlmeSBQcm9wZXJ0aWVzJyB9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdBbm5vdGF0aW9uJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMuYW5ub3RhdGlvbilcclxuXHRcdFx0XHQub25DaGFuZ2UodmFsdWUgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5hbm5vdGF0aW9uID0gdmFsdWU7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICc0MDBweCdcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdVUkwnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy51cmwpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudXJsID0gdmFsdWU7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICc0MDBweCdcclxuXHRcdFx0KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKCdUYWdzJylcclxuXHRcdFx0LnNldERlc2MoJ1NlcGFyYXRlIHRhZ3MgdXNlICwnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy50YWdzLmpvaW4oJywgJykpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudGFncyA9IHZhbHVlLnNwbGl0KCcsJykubWFwKHRhZyA9PiB0YWcudHJpbSgpKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzQwMHB4J1xyXG5cdFx0XHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuXHRcdFx0LmFkZEJ1dHRvbihidG4gPT4gYnRuXHJcblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ1NhdmUnKVxyXG5cdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcclxuXHRcdFx0XHRcdC8vIFx1Njc4NFx1NUVGQVx1NjU3MFx1NjM2RVx1NUJGOVx1OEM2MVxyXG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IHtcclxuXHRcdFx0XHRcdFx0aWQ6IHRoaXMuaWQsXHJcblx0XHRcdFx0XHRcdC8vIG5hbWU6IHRoaXMubmFtZSxcclxuXHRcdFx0XHRcdFx0dGFnczogdGhpcy50YWdzLFxyXG5cdFx0XHRcdFx0XHRhbm5vdGF0aW9uOiB0aGlzLmFubm90YXRpb24sXHJcblx0XHRcdFx0XHRcdHVybDogdGhpcy51cmwsXHJcblx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRcdC8vIFx1OEJCRVx1N0Y2RVx1OEJGN1x1NkM0Mlx1OTAwOVx1OTg3OVxyXG5cdFx0XHRcdFx0Y29uc3QgcmVxdWVzdE9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge1xyXG5cdFx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdFx0XHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcblx0XHRcdFx0XHRcdHJlZGlyZWN0OiAnZm9sbG93JyBhcyBSZXF1ZXN0UmVkaXJlY3RcclxuXHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU1M0QxXHU5MDAxXHU4QkY3XHU2QzQyXHJcblx0XHRcdFx0XHRmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6NDE1OTUvYXBpL2l0ZW0vdXBkYXRlXCIsIHJlcXVlc3RPcHRpb25zKVxyXG5cdFx0XHRcdFx0XHQudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcblx0XHRcdFx0XHRcdC50aGVuKHJlc3VsdCA9PiB7XHJcblx0XHRcdFx0XHRcdFx0cHJpbnQocmVzdWx0KTtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdEYXRhIHVwbG9hZGVkIHN1Y2Nlc3NmdWxseScpO1xyXG5cdFx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0XHQuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHByaW50KCdlcnJvcicsIGVycm9yKTtcclxuXHRcdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdGYWlsZWQgdG8gdXBsb2FkIGRhdGEnKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gXHU4QzAzXHU3NTI4IG9uU3VibWl0IFx1NTZERVx1OEMwM1xyXG5cdFx0XHRcdFx0dGhpcy5vblN1Ym1pdCh0aGlzLmlkLCB0aGlzLm5hbWUsIHRoaXMuYW5ub3RhdGlvbiwgdGhpcy51cmwsIHRoaXMudGFncyk7XHJcblx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpIHtcclxuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gY29weUZpbGVUb0NsaXBib2FyZENNRChmaWxlUGF0aDogc3RyaW5nKSB7XHJcblxyXG5cdGlmICghZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBGaWxlICR7ZmlsZVBhdGh9IGRvZXMgbm90IGV4aXN0YCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNhbGxiYWNrID0gKGVycm9yOiBFcnJvciB8IG51bGwsIHN0ZG91dDogc3RyaW5nLCBzdGRlcnI6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmIChlcnJvcikge1xyXG5cdFx0XHRuZXcgTm90aWNlKGBFcnJvciBleGVjdXRpbmcgY29tbWFuZDogJHtlcnJvci5tZXNzYWdlfWAsIDMwMDApO1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBleGVjdXRpbmcgY29tbWFuZDogJHtlcnJvci5tZXNzYWdlfWApO1xyXG5cdFx0XHRyZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcclxuXHRcdGV4ZWNTeW5jKGBvcGVuIC1SIFwiJHtmaWxlUGF0aH1cImApO1xyXG4gICAgICAgIGV4ZWNTeW5jKGBvc2FzY3JpcHQgLWUgJ3RlbGwgYXBwbGljYXRpb24gXCJTeXN0ZW0gRXZlbnRzXCIgdG8ga2V5c3Ryb2tlIFwiY1wiIHVzaW5nIGNvbW1hbmQgZG93bidgKTtcclxuICAgICAgICBleGVjU3luYyhgb3Nhc2NyaXB0IC1lICd0ZWxsIGFwcGxpY2F0aW9uIFwiU3lzdGVtIEV2ZW50c1wiIHRvIGtleXN0cm9rZSBcIndcIiB1c2luZyBjb21tYW5kIGRvd24nYCk7XHJcblx0XHRleGVjU3luYyhgb3BlbiAtYSBcIk9ic2lkaWFuLmFwcFwiYCk7XHJcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MucGxhdGZvcm0gPT09ICdsaW51eCcpIHtcclxuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xyXG5cdFx0bGV0IHNhZmVGaWxlUGF0aCA9IGZpbGVQYXRoLnJlcGxhY2UoLycvZywgXCInJ1wiKTtcclxuICAgICAgICBleGVjKGBwb3dlcnNoZWxsIC1jb21tYW5kIFwiU2V0LUNsaXBib2FyZCAtUGF0aCAnJHtzYWZlRmlsZVBhdGh9J1wiYCwgY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hJbWFnZUluZm8odXJsOiBzdHJpbmcpOiBQcm9taXNlPHsgaWQ6IHN0cmluZywgbmFtZTogc3RyaW5nLCBleHQ6IHN0cmluZywgYW5ub3RhdGlvbjogc3RyaW5nLCB0YWdzOiBzdHJpbmcsIHVybDogc3RyaW5nIH0gfCBudWxsPiB7XHJcblx0Y29uc3QgbWF0Y2ggPSB1cmwubWF0Y2goL1xcL2ltYWdlc1xcLyguKilcXC5pbmZvLyk7XHJcblx0aWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XHJcblx0XHRjb25zdCByZXF1ZXN0T3B0aW9uczogUmVxdWVzdEluaXQgPSB7XHJcblx0XHRcdG1ldGhvZDogJ0dFVCcsXHJcblx0XHRcdHJlZGlyZWN0OiAnZm9sbG93JyBhcyBSZXF1ZXN0UmVkaXJlY3RcclxuXHRcdH07XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo0MTU5NS9hcGkvaXRlbS9pbmZvP2lkPSR7bWF0Y2hbMV19YCwgcmVxdWVzdE9wdGlvbnMpO1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcblxyXG5cdFx0XHRpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIgJiYgcmVzdWx0LmRhdGEpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmVzdWx0LmRhdGE7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cHJpbnQoJ0ZhaWxlZCB0byBmZXRjaCBpdGVtIGluZm8nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0cHJpbnQoJ0Vycm9yIGZldGNoaW5nIGl0ZW0gaW5mbycsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0cHJpbnQoJ0ludmFsaWQgaW1hZ2Ugc291cmNlIGZvcm1hdCcpO1xyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGdldE1vdXNlRXZlbnRUYXJnZXQgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiBIVE1MRWxlbWVudCA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUN1clRhcmdldExpbmsoXHJcbiAgICB1cmw6IHN0cmluZyxcclxuICAgIHBsdWdpbjogTXlQbHVnaW4sXHJcbiAgICB0YXJnZXRfcG9zOiBudW1iZXIsXHJcbikge1xyXG4gICAgY29uc3QgYWN0aXZlVmlldyA9IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICAgIGlmICghYWN0aXZlVmlldykge1xyXG4gICAgICAgIG5ldyBOb3RpY2UoXCJcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcdUZGMDFcIiwgMzAwMCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XHJcbiAgICBjb25zdCBlZGl0b3JWaWV3ID0gKGVkaXRvciBhcyBhbnkpLmNtIGFzIEVkaXRvclZpZXc7XHJcbiAgICBcclxuICAgIC8vIFx1ODNCN1x1NTNENlx1NzZFRVx1NjgwN1x1ODg0Q1x1NTQ4Q1x1NjU4N1x1NjcyQ1xyXG4gICAgY29uc3QgdGFyZ2V0X2xpbmUgPSBlZGl0b3JWaWV3LnN0YXRlLmRvYy5saW5lQXQodGFyZ2V0X3Bvcyk7XHJcbiAgICBjb25zdCBsaW5lX3RleHQgPSB0YXJnZXRfbGluZS50ZXh0O1xyXG4gICAgXHJcbiAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTU3MjhcdTg4NjhcdTY4M0NcdTYyMTZjYWxsb3V0XHU0RTJEXHJcbiAgICBjb25zdCB0YXJnZXQgPSBlZGl0b3JWaWV3LmRvbUF0UG9zKHRhcmdldF9wb3MpLm5vZGUgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBjb25zdCBpblRhYmxlID0gISF0YXJnZXQuY2xvc2VzdCgndGFibGUnKTtcclxuICAgIGNvbnN0IGluQ2FsbG91dCA9ICEhdGFyZ2V0LmNsb3Nlc3QoJy5jYWxsb3V0Jyk7XHJcbiAgICBcclxuICAgIGlmICghaW5UYWJsZSAmJiAhaW5DYWxsb3V0KSB7XHJcbiAgICAgICAgLy8gXHU2NjZFXHU5MDFBXHU2NTg3XHU2NzJDXHU0RTJEXHU3Njg0XHU5NEZFXHU2M0E1XHJcbiAgICAgICAgY29uc3QgZmluZHMgPSBmaW5kTGlua0luTGluZSh1cmwsIGxpbmVfdGV4dCk7XHJcbiAgICAgICAgaWYgKGZpbmRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiXHU2NUUwXHU2Q0Q1XHU2MjdFXHU1MjMwXHU5NEZFXHU2M0E1XHU2NTg3XHU2NzJDXHVGRjBDXHU4QkY3XHU2MjRCXHU1MkE4XHU1MjIwXHU5NjY0XHVGRjAxXCIsIDMwMDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGZpbmRzLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiXHU1RjUzXHU1MjREXHU4ODRDXHU0RTJEXHU1M0QxXHU3M0IwXHU1OTFBXHU0RTJBXHU3NkY4XHU1NDBDXHU3Njg0XHU5NEZFXHU2M0E1XHVGRjBDXHU4QkY3XHU2MjRCXHU1MkE4XHU1MjIwXHU5NjY0XHVGRjAxXCIsIDMwMDApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKCcnLCBcclxuICAgICAgICAgICAgICAgIHtsaW5lOiB0YXJnZXRfbGluZS5udW1iZXItMSwgY2g6IGZpbmRzWzBdWzBdfSwgXHJcbiAgICAgICAgICAgICAgICB7bGluZTogdGFyZ2V0X2xpbmUubnVtYmVyLTEsIGNoOiBmaW5kc1swXVsxXX1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDXHU2MjE2Y2FsbG91dFx1NEUyRFx1NzY4NFx1OTRGRVx1NjNBNVxyXG4gICAgY29uc3Qgc3RhcnRSZWc6IHtba2V5OiBzdHJpbmddOiBSZWdFeHB9ID0ge1xyXG4gICAgICAgICd0YWJsZSc6IC9eXFxzKlxcfC8sXHJcbiAgICAgICAgJ2NhbGxvdXQnOiAvXj4vLFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgY29uc3QgbW9kZSA9IGluVGFibGUgPyAndGFibGUnIDogJ2NhbGxvdXQnO1xyXG4gICAgbGV0IGZpbmRzX2xpbmVzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgbGV0IGZpbmRzX2FsbDogW251bWJlciwgbnVtYmVyXVtdID0gW107XHJcbiAgICBcclxuICAgIC8vIFx1NTQxMVx1NEUwQlx1NjQxQ1x1N0QyMlxyXG4gICAgZm9yIChsZXQgaSA9IHRhcmdldF9saW5lLm51bWJlcjsgaSA8PSBlZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGxpbmVfdGV4dCA9IGVkaXRvci5nZXRMaW5lKGktMSk7XHJcbiAgICAgICAgaWYgKCFzdGFydFJlZ1ttb2RlXS50ZXN0KGxpbmVfdGV4dCkpIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZpbmRzID0gZmluZExpbmtJbkxpbmUodXJsLCBsaW5lX3RleHQpO1xyXG4gICAgICAgIGlmIChmaW5kcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZpbmRzX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KGZpbmRzLmxlbmd0aCkuZmlsbChpKSk7XHJcbiAgICAgICAgICAgIGZpbmRzX2FsbC5wdXNoKC4uLmZpbmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NTQxMVx1NEUwQVx1NjQxQ1x1N0QyMlxyXG4gICAgZm9yIChsZXQgaSA9IHRhcmdldF9saW5lLm51bWJlci0xOyBpID49IDE7IGktLSkge1xyXG4gICAgICAgIGNvbnN0IGxpbmVfdGV4dCA9IGVkaXRvci5nZXRMaW5lKGktMSk7XHJcbiAgICAgICAgaWYgKCFzdGFydFJlZ1ttb2RlXS50ZXN0KGxpbmVfdGV4dCkpIGJyZWFrO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGZpbmRzID0gZmluZExpbmtJbkxpbmUodXJsLCBsaW5lX3RleHQpO1xyXG4gICAgICAgIGlmIChmaW5kcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZpbmRzX2xpbmVzLnB1c2goLi4ubmV3IEFycmF5KGZpbmRzLmxlbmd0aCkuZmlsbChpKSk7XHJcbiAgICAgICAgICAgIGZpbmRzX2FsbC5wdXNoKC4uLmZpbmRzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChmaW5kc19hbGwubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgbmV3IE5vdGljZShgXHU2NUUwXHU2Q0Q1XHU1NzI4JHttb2RlfVx1NEUyRFx1NjI3RVx1NTIzMFx1OTRGRVx1NjNBNVx1NjU4N1x1NjcyQ1x1RkYwQ1x1OEJGN1x1NjI0Qlx1NTJBOFx1NTIyMFx1OTY2NFx1RkYwMWAsIDMwMDApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZpbmRzX2FsbC5sZW5ndGggIT09IDEpIHtcclxuICAgICAgICBuZXcgTm90aWNlKGBcdTU3Mjgke21vZGV9XHU0RTJEXHU2MjdFXHU1MjMwXHU1OTFBXHU0RTJBXHU3NkY4XHU1NDBDXHU3Njg0XHU5NEZFXHU2M0E1XHVGRjBDXHU4QkY3XHU2MjRCXHU1MkE4XHU1MjIwXHU5NjY0XHVGRjAxYCwgMzAwMCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZSgnJywgXHJcbiAgICAgICAgICAgIHtsaW5lOiBmaW5kc19saW5lc1swXS0xLCBjaDogZmluZHNfYWxsWzBdWzBdfSwgXHJcbiAgICAgICAgICAgIHtsaW5lOiBmaW5kc19saW5lc1swXS0xLCBjaDogZmluZHNfYWxsWzBdWzFdfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGVkaXRvci5mb2N1cygpO1xyXG59XHJcblxyXG4vLyBcdTY3RTVcdTYyN0VcdTRFMDBcdTg4NENcdTRFMkRcdTUzMDVcdTU0MkJcdTcyNzlcdTVCOUFVUkxcdTc2ODRcdTk0RkVcdTYzQTVcclxuZnVuY3Rpb24gZmluZExpbmtJbkxpbmUodXJsOiBzdHJpbmcsIGxpbmU6IHN0cmluZyk6IFtudW1iZXIsIG51bWJlcl1bXSB7XHJcbiAgICBjb25zdCByZXN1bHRzOiBbbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcclxuICAgIFxyXG4gICAgLy8gXHU1MzM5XHU5MTRETWFya2Rvd25cdTk0RkVcdTYzQTU6ICFbYWx0XSh1cmwpIFx1NjIxNiBbdGV4dF0odXJsKVxyXG4gICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGAoIT9cXFxcW1teXFxcXF1dKlxcXFxdXFxcXCgke2VzY2FwZVJlZ0V4cCh1cmwpfVteKV0qXFxcXCkpYCwgJ2cnKTtcclxuICAgIFxyXG4gICAgbGV0IG1hdGNoO1xyXG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMobGluZSkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgcmVzdWx0cy5wdXNoKFttYXRjaC5pbmRleCwgbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGhdKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcbi8vIFx1OEY2Q1x1NEU0OVx1NkI2M1x1NTIxOVx1ODg2OFx1OEZCRVx1NUYwRlx1NzI3OVx1NkI4QVx1NUI1N1x1N0IyNlxyXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpO1xyXG59IiwgIi8vIFVSTCBcdTY4QzBcdTZENEJcdTUxRkRcdTY1NzBcbmV4cG9ydCBmdW5jdGlvbiBpc1VSTChzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGxldCB1cmw6IFVSTDtcblxuICAgIHRyeSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwoc3RyKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdXJsLnByb3RvY29sID09PSBcImh0dHA6XCIgfHwgdXJsLnByb3RvY29sID09PSBcImh0dHBzOlwiO1xufVxuXG5cbi8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NEUzQVx1NjcyQ1x1NTczMFx1NEUzQlx1NjczQVx1OTRGRVx1NjNBNVxuZXhwb3J0IGZ1bmN0aW9uIGlzTG9jYWxIb3N0TGluayhzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc3RyKTtcbiAgICAgICAgcmV0dXJuIHVybC5ob3N0bmFtZSA9PT0gXCJsb2NhbGhvc3RcIiB8fCB1cmwuaG9zdG5hbWUgPT09IFwiMTI3LjAuMC4xXCI7XG4gICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cblxuLy8gXHU2OEMwXHU2N0U1QWx0XHU2NTg3XHU2NzJDXHU2NjJGXHU1NDI2XHU4ODY4XHU3OTNBXHU1NkZFXHU3MjQ3XHU3QzdCXHU1NzhCXHVGRjA4XHU1ODlFXHU1RjNBXHU3MjQ4XHVGRjA5XG5leHBvcnQgZnVuY3Rpb24gaXNBbHRUZXh0SW1hZ2UoYWx0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBcdTk5OTZcdTUxNDhcdTU5MDRcdTc0MDZcdTUzRUZcdTgwRkRcdTUzMDVcdTU0MkJcdTVDM0FcdTVCRjhcdTc2ODRcdTYwQzVcdTUxQjVcdUZGMENcdTU5ODIgXCJpbWFnZS5wbmd8NzAwXCJcbiAgICBjb25zdCBtYWluUGFydCA9IGFsdC5zcGxpdCgnfCcpWzBdLnRyaW0oKTtcbiAgICByZXR1cm4gL1xcLihqcGd8anBlZ3xwbmd8Z2lmfHdlYnB8c3ZnfGF2aWZ8Ym1wfGljbykkL2kudGVzdChtYWluUGFydCk7XG59XG5cbi8vIFx1NTdGQVx1NjcyQ1x1NUQ0Q1x1NTE2NVx1NjU3MFx1NjM2RVx1N0VEM1x1Njc4NFxuZXhwb3J0IGludGVyZmFjZSBFbWJlZFJlc3VsdCB7XG4gICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICAgIGlmcmFtZUVsPzogSFRNTElGcmFtZUVsZW1lbnQ7XG59XG5cbi8vIFx1NjcyQ1x1NTczMFx1OTRGRVx1NjNBNVx1NUQ0Q1x1NTE2NVx1NTkwNFx1NzQwNlx1NTY2OFxuZXhwb3J0IGNsYXNzIExvY2FsSG9zdEVtYmVkZGVyIHtcbiAgICAvLyBcdTUyMUJcdTVFRkFcdTVENENcdTUxNjVcdTUxODVcdTVCQjlcbiAgICBjcmVhdGUoc3JjOiBzdHJpbmcpOiBFbWJlZFJlc3VsdCB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJlYWdsZS1lbWJlZC1jb250YWluZXJcIjtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQSBpZnJhbWUgXHU1MTQzXHU3RDIwXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO1xuICAgICAgICBpZnJhbWUuc3JjID0gc3JjO1xuICAgICAgICBpZnJhbWUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgICAgaWZyYW1lLmhlaWdodCA9IFwiNTAwcHhcIjsgLy8gXHU1ODlFXHU1MkEwXHU5QUQ4XHU1RUE2XHU0RUU1XHU5MDAyXHU1RTk0XHU2NkY0XHU1OTFBXHU1MTg1XHU1QkI5XG4gICAgICAgIGlmcmFtZS5zdHlsZS5ib3JkZXIgPSBcIm5vbmVcIjtcbiAgICAgICAgaWZyYW1lLnNldEF0dHJpYnV0ZShcImFsbG93ZnVsbHNjcmVlblwiLCBcInRydWVcIik7XG4gICAgICAgIGlmcmFtZS5zZXRBdHRyaWJ1dGUoXCJsb2FkaW5nXCIsIFwibGF6eVwiKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpZnJhbWUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgXG4gICAgICAgICAgICBjb250YWluZXJFbDogY29udGFpbmVyLFxuICAgICAgICAgICAgaWZyYW1lRWw6IGlmcmFtZVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUU5NFx1OEJFNVx1NUQ0Q1x1NTE2NVx1NkI2NFx1OTRGRVx1NjNBNVxuICAgIHNob3VsZEVtYmVkKHNyYzogc3RyaW5nLCBhbHQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2M0QwXHU0RjlCXHU0RTg2YWx0XHU2NTg3XHU2NzJDXHU0RTE0XHU4ODY4XHU3OTNBXHU1NkZFXHU3MjQ3XHVGRjBDXHU4REYzXHU4RkM3XHU1RDRDXHU1MTY1XG4gICAgICAgIGlmIChhbHQgJiYgaXNBbHRUZXh0SW1hZ2UoYWx0KSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtFYWdsZS1FbWJlZF0gXHU4REYzXHU4RkM3XHU1NkZFXHU3MjQ3XHU1RDRDXHU1MTY1OiAke2FsdH0sIFVSTDogJHtzcmN9YCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1Nzg2RVx1OEJBNFx1NjYyRmxvY2FsaG9zdFx1OTRGRVx1NjNBNVxuICAgICAgICByZXR1cm4gaXNMb2NhbEhvc3RMaW5rKHNyYyk7XG4gICAgfVxufVxuXG4vLyBcdTVENENcdTUxNjVcdTdCQTFcdTc0MDZcdTU2NjhcbmV4cG9ydCBjb25zdCBlbWJlZE1hbmFnZXIgPSBuZXcgTG9jYWxIb3N0RW1iZWRkZXIoKTtcbiIsICJpbXBvcnQgeyBzeW50YXhUcmVlIH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmd1YWdlXCI7XG5pbXBvcnQgeyBFeHRlbnNpb24sIFJhbmdlU2V0QnVpbGRlciwgU3RhdGVGaWVsZCwgVHJhbnNhY3Rpb24gfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcbmltcG9ydCB7IERlY29yYXRpb24sIERlY29yYXRpb25TZXQsIEVkaXRvclZpZXcgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xuaW1wb3J0IHsgZWRpdG9yTGl2ZVByZXZpZXdGaWVsZCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgRW1iZWRXaWRnZXQgfSBmcm9tIFwiLi9lbWJlZC13aWRnZXRcIjtcbmltcG9ydCB7IGlzVVJMLCBpc0xvY2FsSG9zdExpbmssIGVtYmVkTWFuYWdlciwgaXNBbHRUZXh0SW1hZ2UgfSBmcm9tIFwiLi9lbWJlZFwiO1xuXG4vLyBcdTRGN0ZcdTc1MjhcdTRFMEVcdTUzQzJcdTgwMDNcdTRFRTNcdTc4MDFcdTVCOENcdTUxNjhcdTRFMDBcdTgxRjRcdTc2ODRcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEZcbmNvbnN0IGZvcm1hdHRpbmdJbWFnZU1hcmtlclJlZ2V4ID0gL2Zvcm1hdHRpbmdfZm9ybWF0dGluZy1pbWFnZV9pbWFnZV9pbWFnZS1tYXJrZXIoPzpfbGlzdC1cXGQqKT8kLztcbmNvbnN0IHN0cmluZ1VybFJlZ2V4ID0gL14oPzpsaXN0LVxcZCpfKT9zdHJpbmdfdXJsJC87XG5cbi8vIFx1OEMwM1x1OEJENVx1NTFGRFx1NjU3MFxuZnVuY3Rpb24gZGVidWdMb2cobWVzc2FnZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIC8vIGNvbnNvbGUubG9nKGBbRWFnbGUtRW1iZWQtRGVidWddICR7bWVzc2FnZX1gLCAuLi5hcmdzKTsgLy8gXHU1MjIwXHU5NjY0XHU1MTk3XHU0RjU5XG59XG5cbi8vIFx1NjhDMFx1NjdFNUFsdFx1NjU4N1x1NjcyQ1x1NjYyRlx1NTQyNlx1ODg2OFx1NzkzQVx1NTZGRVx1NzI0N1x1N0M3Qlx1NTc4Qlx1RkYwOFx1NEUwRWVtYmVkLnRzXHU0RkREXHU2MzAxXHU0RTAwXHU4MUY0XHVGRjA5XG4vLyBmdW5jdGlvbiBpc0FsdFRleHRJbWFnZShhbHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuLy8gICAgIC8vIFx1OTk5Nlx1NTE0OFx1NTkwNFx1NzQwNlx1NTNFRlx1ODBGRFx1NTMwNVx1NTQyQlx1NUMzQVx1NUJGOFx1NzY4NFx1NjBDNVx1NTFCNVx1RkYwQ1x1NTk4MiBcImltYWdlLnBuZ3w3MDBcIlxuLy8gICAgIGNvbnN0IG1haW5QYXJ0ID0gYWx0LnNwbGl0KCd8JylbMF0udHJpbSgpO1xuLy8gICAgIGRlYnVnTG9nKGBcdTY4QzBcdTY3RTVhbHRcdTY1ODdcdTY3MkM6ICR7YWx0fSwgXHU0RTNCXHU4OTgxXHU5MEU4XHU1MjA2OiAke21haW5QYXJ0fWApO1xuLy8gICAgIHJldHVybiAvXFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8d2VicHxzdmd8YXZpZnxibXB8aWNvKSQvaS50ZXN0KG1haW5QYXJ0KTtcbi8vIH1cblxuLy8gXHU1QjlBXHU0RTQ5XHU3RjE2XHU4RjkxXHU1NjY4XHU3MkI2XHU2MDAxXHU1QjU3XHU2QkI1XG5leHBvcnQgY29uc3QgZW1iZWRGaWVsZCA9IFN0YXRlRmllbGQuZGVmaW5lPERlY29yYXRpb25TZXQ+KHtcbiAgICBjcmVhdGUoKTogRGVjb3JhdGlvblNldCB7XG4gICAgICAgIC8vIHByaW50KFwiXHU1MjFCXHU1RUZBXHU1MjFEXHU1OUNCXHU4OEM1XHU5OTcwXHU5NkM2XCIpO1xuICAgICAgICByZXR1cm4gRGVjb3JhdGlvbi5ub25lO1xuICAgIH0sXG4gICAgXG4gICAgdXBkYXRlKG9sZFN0YXRlOiBEZWNvcmF0aW9uU2V0LCB0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pOiBEZWNvcmF0aW9uU2V0IHtcbiAgICAgICAgY29uc3QgYnVpbGRlciA9IG5ldyBSYW5nZVNldEJ1aWxkZXI8RGVjb3JhdGlvbj4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NTcyOFx1NUI5RVx1NjVGNlx1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlx1NEUwQlxuICAgICAgICBpZiAoIXRyYW5zYWN0aW9uLnN0YXRlLmZpZWxkKGVkaXRvckxpdmVQcmV2aWV3RmllbGQsIGZhbHNlKSkge1xuICAgICAgICAgICAgLy8gcHJpbnQoXCJcdTRFMERcdTU3MjhcdTVCOUVcdTY1RjZcdTk4ODRcdTg5QzhcdTZBMjFcdTVGMEZcdUZGMENcdThERjNcdThGQzdcIik7XG4gICAgICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2goKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gcHJpbnQoXCJcdTU5MDRcdTc0MDZcdTdGMTZcdThGOTFcdTU2NjhcdTcyQjZcdTYwMDFcdTY2RjRcdTY1QjBcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBcdThGRkRcdThFMkFhbHRcdTY1ODdcdTY3MkNcdTc2ODRcdTVGMDBcdTU5Q0JcdTRGNERcdTdGNkVcbiAgICAgICAgbGV0IGFsdFRleHRTdGFydFBvczogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTkwNERcdTUzODZcdThCRURcdTZDRDVcdTY4MTFcdTY3RTVcdTYyN0VcdTU2RkVcdTUwQ0ZcdTk0RkVcdTYzQTVcbiAgICAgICAgc3ludGF4VHJlZSh0cmFuc2FjdGlvbi5zdGF0ZSkuaXRlcmF0ZSh7XG4gICAgICAgICAgICBlbnRlcihub2RlKSB7XG4gICAgICAgICAgICAgICAgLy8gXHU4QzAzXHU4QkQ1XHU4MjgyXHU3MEI5XHU3QzdCXHU1NzhCXG4gICAgICAgICAgICAgICAgZGVidWdMb2coYFx1ODI4Mlx1NzBCOVx1N0M3Qlx1NTc4QjogJHtub2RlLnR5cGUubmFtZX1gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VcdTU2RkVcdTUwQ0ZcdTY4MDdcdThCQjBcbiAgICAgICAgICAgICAgICBpZiAoZm9ybWF0dGluZ0ltYWdlTWFya2VyUmVnZXgudGVzdChub2RlLnR5cGUubmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWx0VGV4dFN0YXJ0UG9zID0gbm9kZS50byArIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTYyN0VcdTUyMzBcdTU2RkVcdTUwQ0ZcdTY4MDdcdThCQjBcdUZGMENhbHRcdTY1ODdcdTY3MkNcdTVGMDBcdTU5Q0JcdTRGNERcdTdGNkU6ICR7YWx0VGV4dFN0YXJ0UG9zfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBcdTY3RTVcdTYyN0VVUkxcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzdHJpbmdVcmxSZWdleC50ZXN0KG5vZGUudHlwZS5uYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWx0VGV4dFN0YXJ0UG9zID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmludChcIlx1NjcyQVx1NjI3RVx1NTIzMFx1NUJGOVx1NUU5NFx1NzY4NFx1NTZGRVx1NTBDRlx1NjgwN1x1OEJCMFx1RkYwQ1x1OERGM1x1OEZDN1VSTFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2VVJMXHU1NDhDYWx0XHU2NTg3XHU2NzJDXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IHRyYW5zYWN0aW9uLnN0YXRlLnNsaWNlRG9jKG5vZGUuZnJvbSwgbm9kZS50byk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdCA9IHRyYW5zYWN0aW9uLnN0YXRlLnNsaWNlRG9jKGFsdFRleHRTdGFydFBvcywgbm9kZS5mcm9tIC0gMik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBwcmludChgXHU2M0QwXHU1M0Q2XHU3Njg0VVJMOiAke3VybH1gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcHJpbnQoYFx1NjNEMFx1NTNENlx1NzY4NGFsdFx1NjU4N1x1NjcyQzogJHthbHR9YCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTkxQ0RcdTdGNkVhbHRcdTY1ODdcdTY3MkNcdTVGMDBcdTU5Q0JcdTRGNERcdTdGNkVcbiAgICAgICAgICAgICAgICAgICAgYWx0VGV4dFN0YXJ0UG9zID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NUU5NFx1OEJFNVx1NUQ0Q1x1NTE2NVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVVJMKHVybCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTRFMERcdTY2MkZcdTY3MDlcdTY1NDhVUkw6ICR7dXJsfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVhbHRcdTY1ODdcdTY3MkNcdTY2MkZcdTU0MjZcdTg4NjhcdTc5M0FcdTU2RkVcdTcyNDdcdTdDN0JcdTU3OEJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQWx0VGV4dEltYWdlKGFsdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTY4MzlcdTYzNkVhbHRcdTY1ODdcdTY3MkNcdThCQzZcdTUyMkJcdTRFM0FcdTU2RkVcdTcyNDdcdUZGMENcdThERjNcdThGQzc6ICR7YWx0fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTY3MkNcdTU3MzBcdTk0RkVcdTYzQTVcdTRFMTRcdTRFMERcdTY2MkZcdTU2RkVcdTcyNDdcdTk0RkVcdTYzQTVcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0xvY2FsSG9zdExpbmsodXJsKSB8fCBpc0FsdFRleHRJbWFnZSh1cmwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcmludChgXHU0RTBEXHU2NjJGXHU2NzJDXHU1NzMwXHU5NEZFXHU2M0E1XHU2MjE2XHU2NjJGXHU1NkZFXHU3MjQ3XHU5NEZFXHU2M0E1OiAke3VybH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbWJlZE1hbmFnZXIuc2hvdWxkRW1iZWQodXJsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJpbnQoYFx1NEUwRFx1NUU5NFx1OEJFNVx1NUQ0Q1x1NTE2NVx1NkI2NFVSTDogJHt1cmx9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTUyMUJcdTVFRkFcdTVENENcdTUxNjVcdTUxODVcdTVCQjk6ICR7dXJsfWApO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NkZGXHU2MzYyXHU4OEM1XHU5OTcwXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VGcm9tID0gbm9kZS50byArIDE7XG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZUZyb20sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYWNlRnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIERlY29yYXRpb24ucmVwbGFjZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgRW1iZWRXaWRnZXQodXJsLCBhbHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gYnVpbGRlci5maW5pc2goKTtcbiAgICB9LFxuICAgIFxuICAgIHByb3ZpZGUoZmllbGQ6IFN0YXRlRmllbGQ8RGVjb3JhdGlvblNldD4pOiBFeHRlbnNpb24ge1xuICAgICAgICByZXR1cm4gRWRpdG9yVmlldy5kZWNvcmF0aW9ucy5mcm9tKGZpZWxkKTtcbiAgICB9XG59KTsiLCAiaW1wb3J0IHsgV2lkZ2V0VHlwZSB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XG5pbXBvcnQgeyBlbWJlZE1hbmFnZXIgfSBmcm9tIFwiLi9lbWJlZFwiO1xuXG4vLyBcdThDMDNcdThCRDVcdTUxRkRcdTY1NzBcbmZ1bmN0aW9uIGRlYnVnTG9nKG1lc3NhZ2U6IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgICBjb25zb2xlLmxvZyhgW0VhZ2xlLUVtYmVkLVdpZGdldF0gJHttZXNzYWdlfWAsIC4uLmFyZ3MpO1xufVxuXG5leHBvcnQgY2xhc3MgRW1iZWRXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICBwcml2YXRlIHVybDogc3RyaW5nO1xuICAgIHByaXZhdGUgYWx0OiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgYWx0OiBzdHJpbmcgPSBcIlwiKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgICAgICB0aGlzLmFsdCA9IGFsdDtcbiAgICAgICAgLy8gcHJpbnQoYFx1NTIxQlx1NUVGQVx1NUQ0Q1x1NTE2NVx1OTBFOFx1NEVGNjogJHt1cmx9YCk7XG4gICAgfVxuXG4gICAgZXEob3RoZXI6IEVtYmVkV2lkZ2V0KTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBvdGhlci51cmwgPT09IHRoaXMudXJsICYmIG90aGVyLmFsdCA9PT0gdGhpcy5hbHQ7XG4gICAgfVxuXG4gICAgdG9ET00oKTogSFRNTEVsZW1lbnQge1xuICAgICAgICAvLyBwcmludChgXHU2RTMyXHU2N0QzXHU1RDRDXHU1MTY1XHU5MEU4XHU0RUY2OiAke3RoaXMudXJsfWApO1xuXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1N0VDRlx1NjcwOVx1NUJCOVx1NTY2OFx1RkYwQ1x1OEZENFx1NTZERVx1NzNCMFx1NjcwOVx1NUJCOVx1NTY2OFxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiZWFnbGUtZW1iZWQtY29udGFpbmVyIGNtLWVtYmVkLWJsb2NrXCI7XG5cbiAgICAgICAgLy8gLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU2NzA5bm9lbWJlZFx1NjgwN1x1OEJCMFxuICAgICAgICAvLyBpZiAodGhpcy5hbHQgJiYgL25vZW1iZWQvaS50ZXN0KHRoaXMuYWx0KSkge1xuICAgICAgICAvLyAgICAgLy8gcHJpbnQoYFx1OERGM1x1OEZDN1x1NUQ0Q1x1NTE2NVx1RkYwQ1x1NTNEMVx1NzNCMG5vZW1iZWRcdTY4MDdcdThCQjA6ICR7dGhpcy51cmx9YCk7XG4gICAgICAgIC8vICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiZWFnbGUtZW1iZWQtcGxhY2Vob2xkZXJcIik7XG4gICAgICAgIC8vICAgICB0aGlzLmNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBcdTVERjJcdTc5ODFcdTc1MjhcdTVENENcdTUxNjUgKG5vZW1iZWQpOiAke3RoaXMudXJsLnN1YnN0cmluZygwLCA1MCl9Li4uYDtcbiAgICAgICAgLy8gICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZW1iZWRNYW5hZ2VyLnNob3VsZEVtYmVkKHRoaXMudXJsKSkge1xuICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTUyMUJcdTVFRkFcdTVENENcdTUxNjVcdTUxODVcdTVCQjk6ICR7dGhpcy51cmx9YCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZW1iZWRNYW5hZ2VyLmNyZWF0ZSh0aGlzLnVybCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSByZXN1bHQuY29udGFpbmVyRWw7XG5cbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTdGMTZcdThGOTFcdTZBMjFcdTVGMEZcdTcyNzlcdTVCOUFcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiY20tZW1iZWQtYmxvY2tcIik7XG5cbiAgICAgICAgICAgICAgICAvL1x1MDBBMFx1NkRGQlx1NTJBMFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NzI3OVx1NUI5QVx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjbS1lbWJlZC1ibG9ja1wiKTtcbiAgICAgICAgICAgICAgICAvL1x1MDBBMFx1NTcyOFx1NjNEMlx1NTE2NURPTVx1NTQwRVx1RkYwQ1x1NjhDMFx1NjdFNVx1NTI0RFx1NEUwMFx1NEUyQVx1NTQwQ1x1N0VBN1x1NTE0M1x1N0QyMFx1NjYyRlx1NTQyNlx1NEUzQVx1NEUwRVx1NUY1M1x1NTI0RFVSTFx1NTMzOVx1OTE0RFx1NzY4NFx1NTZGRVx1NzI0N1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIgJiYgdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldlNpYmxpbmcgPSB0aGlzLmNvbnRhaW5lci5wcmV2aW91c1NpYmxpbmc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwcmV2U2libGluZyAmJiBwcmV2U2libGluZy5ub2RlTmFtZSA9PT0gJ0lNRycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWdFbGVtZW50ID0gcHJldlNpYmxpbmcgYXMgSFRNTEltYWdlRWxlbWVudDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltZ0VsZW1lbnQuY2xhc3NMaXN0LmFkZChcImF1dG8tZW1iZWQtaGlkZS1kaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHUwMEEwdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudD8ucmVtb3ZlQ2hpbGQodGhpcy5jb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHUwMEEwdGhpcy5jb250YWluZXIucGFyZW50RWxlbWVudD8ucmVtb3ZlQ2hpbGQoaW1nRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyQTBcdThGN0RcdTRFOEJcdTRFRjZcdTU5MDRcdTc0MDZcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmlmcmFtZUVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlmcmFtZSA9IHJlc3VsdC5pZnJhbWVFbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFaWZyYW1lXHU0RThCXHU0RUY2XHU1OTA0XHU3NDA2XG4gICAgICAgICAgICAgICAgICAgIGlmcmFtZS5vbmVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJpbnQoYFx1NUQ0Q1x1NTE2NVx1NTJBMFx1OEY3RFx1NTkzMVx1OEQyNTogJHt0aGlzLnVybH1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGBcdTUyQTBcdThGN0RcdTU5MzFcdThEMjU6ICR7dGhpcy51cmx9YCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgaWZyYW1lLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByaW50KGBcdTVENENcdTUxNjVcdTUyQTBcdThGN0RcdTYyMTBcdTUyOUY6ICR7dGhpcy51cmx9YCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBwcmludChgXHU0RTBEXHU1RTk0XHU4QkU1XHU1RDRDXHU1MTY1XHU2QjY0VVJMOiAke3RoaXMudXJsfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJlYWdsZS1lbWJlZC1wbGFjZWhvbGRlclwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci50ZXh0Q29udGVudCA9IGBcdTRFMERcdTY1MkZcdTYzMDFcdTc2ODRcdTVENENcdTUxNjVcdTUxODVcdTVCQjk6ICR7dGhpcy51cmwuc3Vic3RyaW5nKDAsIDUwKX0uLi5gO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgLy8gcHJpbnQoYFx1NTkwNFx1NzQwNlx1NUQ0Q1x1NTE2NVx1NjVGNlx1NTFGQVx1OTUxOTogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd0Vycm9yKGBcdTU5MDRcdTc0MDZcdTVENENcdTUxNjVcdTY1RjZcdTUxRkFcdTk1MTk6ICR7ZXJyb3J9YCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgfVxuXG4gICAgLy8gXHU2NjNFXHU3OTNBXHU5NTE5XHU4QkVGXHU0RkUxXHU2MDZGXG4gICAgcHJpdmF0ZSBzaG93RXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybjtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcImVhZ2xlLWVtYmVkLWVycm9yXCIpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgaWdub3JlRXZlbnQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztB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QW1CLG9CQUFJLElBQUk7QUFBQSxFQUM3QjtBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFNO0FBQUEsRUFBSztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBWTtBQUFBLEVBQVc7QUFBQSxFQUFTO0FBQUEsRUFDckY7QUFBQSxFQUFPO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQVk7QUFBQSxFQUFNO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFNO0FBQUEsRUFDMUU7QUFBQSxFQUFPO0FBQUEsRUFBUTtBQUFBLEVBQU07QUFBQSxFQUFPO0FBQUEsRUFBTTtBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFBTztBQUFBLEVBQ3hEO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBUztBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFDdkY7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBUTtBQUFBLEVBQVE7QUFBQSxFQUFPO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUFZO0FBQUEsRUFBTztBQUFBLEVBQ3JGO0FBQUEsRUFBUztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFDdkI7QUFBQSxFQUFhO0FBQUEsRUFBYTtBQUFBLEVBQWE7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFDcEU7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU07QUFBQSxFQUFPO0FBQUEsRUFBUTtBQUFBLEVBQVc7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFDMUU7QUFBQSxFQUFNO0FBQUEsRUFBTTtBQUFBLEVBQU87QUFBQSxFQUFXO0FBQUEsRUFBTTtBQUFBLEVBQ3BDO0FBQUEsRUFBUTtBQUFBLEVBQVE7QUFBQSxFQUFRO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUM1RDtBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFBTztBQUFBLEVBQVE7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUNuRDtBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU07QUFBQSxFQUFPO0FBQUEsRUFBUTtBQUFBLEVBQzFDO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQVE7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFDckY7QUFBQSxFQUFRO0FBQUEsRUFBTztBQUFBLEVBQVM7QUFBQSxFQUN4QjtBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFDdEM7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQVc7QUFBQSxFQUN6QjtBQUFBLEVBQUs7QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFDdEQ7QUFBQSxFQUFTO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQy9FO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUNmO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUFRO0FBQUEsRUFBUTtBQUFBLEVBQU87QUFBQSxFQUFPO0FBQUEsRUFBTztBQUFBLEVBQU87QUFBQSxFQUNqRjtBQUFBLEVBQ0E7QUFBQSxFQUFPO0FBQUEs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LFdBQW9CO0FBQ3BDLFNBQUs7QUFBQSxNQUNKO0FBQUEsUUFDQ0E7QUFBQSxRQUNBO0FBQUEsUUFDQTtBQUFBLFFBQ0EsMEJBQTBCLEtBQUssSUFBSTtBQUFBLFFBQ25DLEVBQUUsU0FBUyxLQUFLO0FBQUEsTUFDakI7QUFBQSxJQUNEO0FBQUEsRUFDRDtBQUFBLEVBQ0EsWUFBWSxLQUEyQztBQUN0RCxRQUFJO0FBQ0gsWUFBTSxNQUFNLElBQUksT0FBTztBQUN2QixZQUFNLE1BQU0sSUFBSTtBQUtoQixVQUFJLFdBQVcsS0FBSyxHQUFHLEdBQUc7QUFDekIsWUFBSSxNQUFNLElBQUksUUFBUSxZQUFZLEVBQUUsRUFBRSxLQUFLO0FBRTNDLGVBQU87QUFBQSxNQUNSO0FBR0EsVUFBSSxlQUFlLEdBQUcsR0FBRztBQUV4QixlQUFPO0FBQUEsTUFDUjtBQUdBLFVBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDLGFBQWEsWUFBWSxLQUFLLEdBQUcsR0FBRztBQUV2RCxlQUFPO0FBQUEsTUFDUjtBQUdBLFlBQU0sY0FBYyxhQUFhLE9BQU8sR0FBRztBQUMzQyxZQUFNLFlBQVksWUFBWTtBQUU5QixVQUFJLENBQUMsSUFBSSxlQUFlO0FBRXZCLGVBQU87QUFBQSxNQUNSO0FBR0EsVUFBSSxjQUFjLGFBQWEsV0FBVyxHQUFHO0FBRzdDLGFBQU87QUFBQSxJQUNSLFNBQVMsT0FBUDtBQUNELGNBQVEsTUFBTSwrQ0FBWSxLQUFLO0FBQy9CLGFBQU87QUFBQSxJQUNSO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJzZXREZWJ1ZyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X2ZzIiwgImltcG9ydF9wcm9taXNlcyIsICJzeXNQYXRoIiwgInBhdGgiLCAicGF0aFJlc29sdmUiLCAiYmFzZW5hbWUiLCAicGF0aEpvaW4iLCAicGF0aFJlbGF0aXZlIiwgInBhdGhTZXAiLCAiaW1wb3J0X3Byb21pc2VzIiwgIm9zVHlwZSIsICJwYXRoIiwgImZzX3dhdGNoIiwgInJhd0VtaXR0ZXIiLCAibGlzdGVuZXIiLCAiYmFzZW5hbWUiLCAiZGlybmFtZSIsICJuZXdTdGF0cyIsICJjbG9zZXIiLCAiZnNyZWFscGF0aCIsICJyZXNvbHZlIiwgInJlYWxwYXRoIiwgInN0YXRzIiwgInJlbGF0aXZlIiwgInBhdGgiLCAiRE9VQkxFX1NMQVNIX1JFIiwgInRlc3RTdHJpbmciLCAic3RhdHMiLCAic3RhdGNiIiwgIm5vdyIsICJzdGF0IiwgImltcG9ydF9ldmVudHMiLCAiZXJyIiwgImRhdGEiLCAiZnMiLCAicGF0aCIsICJsYXRlc3REaXJVcmwiLCAicmVzb2x2ZSIsICJyZXF1ZXN0T3B0aW9ucyIsICJyZXNwb25zZSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9mcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGF0aCIsICJpbXBvcnRfb2JzaWRpYW4iLCAicGF0aCIsICJpbXBvcnRfZnMiLCAiZG9jdW1lbnQiLCAiZXZlbnQiLCAibGluZV90ZXh0IiwgImltcG9ydF92aWV3IiwgImltcG9ydF9vYnNpZGlhbiIsICJzZXREZWJ1ZyIsICJ3aW5kb3ciLCAiY2xpcGJvYXJkIiwgInBhdGgiLCAiZG9jdW1lbnQiXQp9Cg==
